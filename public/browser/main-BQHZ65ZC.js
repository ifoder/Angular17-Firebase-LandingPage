import{$ as Br,$a as Cd,A as Au,Aa as Xu,Ab as Rd,B as tn,Ba as Zn,Bb as Pd,C as nn,Ca as Yn,Cb as Od,D as Vn,Da as Xn,E as jn,Ea as Qn,F as rn,Fa as Jn,G as xu,Ga as ei,H as Me,Ha as U,I as on,Ia as At,J as Pr,Ja as Qu,K as Nu,Ka as Ju,L as Or,La as O,M as Du,Ma as Pe,N as $n,Na as to,O as Ru,Oa as Dt,P as Wn,Pa as Rt,Q as Pu,Qa as Ht,R as q,Ra as We,S as ae,Sa as Gt,T as le,Ta as ft,U as Fr,Ua as Pt,V as Lr,Va as Ot,W as Ou,Wa as ud,X as Ur,Xa as dd,Y as Fu,Ya as no,Z as Lu,Za as io,_ as Uu,_a as yd,a as _u,aa as Bu,ab as bd,b as vu,ba as Hn,bb as Pi,c as yu,ca as Gn,cb as Ls,d as Cu,da as Vu,db as wd,e as bu,ea as Vr,eb as Ed,f as wu,fa as Kn,fb as Sd,g as Ar,ga as ju,gb as Id,h as xr,ha as jr,hb as Td,i as Eu,ia as $u,ib as Us,j as se,ja as ee,jb as kd,k as at,ka as te,kb as ro,l as Nr,la as Mt,lb as Md,m as Su,ma as zt,mb as oo,n as Iu,na as sn,nb as Ft,o as Tu,oa as $r,ob as ii,p as ku,pa as Wr,pb as we,q as Dr,qa as Hr,qb as zd,r as Rr,ra as Wu,rb as cn,s as Mu,sa as Hu,sb as He,t as ke,ta as Gr,tb as Ad,u as me,ua as Gu,ub as un,v as fe,va as Ku,vb as xd,w as Tt,wa as qn,wb as Nd,x as zu,xa as qu,xb as so,y as lt,ya as Zu,yb as ao,z as kt,za as Yu,zb as Dd}from"./chunk-RRYNUCDK.js";import{$ as Zc,$b as E,Aa as A,Ba as x,Bb as _,Bc as Ms,Cc as du,E as Ti,Ec as zs,F as ki,Fc as Te,Ha as pe,Ja as tu,Ka as En,Kb as su,Lb as I,Lc as Mr,Mb as K,Nb as Fn,O as Hc,Ob as Ln,Pa as Ke,Pb as nt,Pc as As,Qb as it,R as Ir,Rb as u,Sb as p,Ta as wt,Tb as C,Ua as nu,Ub as Ts,V as Gc,Vb as ks,W as Kc,Xb as re,Xc as hu,Z as qc,_ as ws,aa as Es,bc as M,c as wn,ca as Yc,cc as au,da as Xc,dc as lu,ea as Ve,ec as rt,f as bs,fa as Ss,fc as kr,g as Er,gb as Et,gc as G,hc as g,hd as zr,ib as iu,ic as X,j as $c,jb as ru,jc as oe,ka as Qc,kb as ou,kc as cu,kd as Ce,ld as st,ma as Jc,mb as en,md as pu,n as Ii,na as je,nb as Tr,nd as mu,o as Sr,oa as Ne,oc as k,p as Jt,pc as Un,q as tt,qb as h,ra as de,rb as Y,rd as Bn,sa as N,sd as fu,ta as b,u as xe,ub as St,uc as ot,va as T,vb as J,vc as It,vd as $,w as Wc,wa as De,wc as uu,xa as eu,xd as Mi,yd as gu,za as Is}from"./chunk-UZUCE4LF.js";import{a as Fd}from"./chunk-J7IX5MLJ.js";import{a as gt}from"./chunk-2QU4JL6V.js";import{B as pd,K as md,L as fd,S as Os,ca as gd,da as _d,ha as Fs,ia as vd,u as hd}from"./chunk-ISPV3OIH.js";import"./chunk-6ATVBBSN.js";import{$ as Ps,A as Zr,B as ge,C as id,D as rd,E as ct,F as an,G as Yr,H as Di,I as od,J as sd,M as ad,O as z,P as $e,Q as _e,R as Ds,S as ld,T as Ri,U as Xr,V as ne,W as ve,X as Qr,Y as Rs,Z as cd,_ as ln,a as y,aa as Jr,b as ti,c as Kr,d as ed,ea as Re,f as td,fa as mt,ha as eo,i as zi,ja as Nt,k as be,l as qr,ma as Z,n as xs,q as Ns,r as nd,t as xt,v as Sn,w as Ai,x as xi,y as Ni,z as ni}from"./chunk-MFV7QFFA.js";import{a as Ie,b as et,f as S}from"./chunk-FO65GQC2.js";var Ld={title:"Kade\u0159nictv\xED Miko Brno",phone:"+420 775 495 488",addressText:"Skacelova 1648/24, Brno-Kralovo Pole",workHour:"Po-P\xE0 09:00-20:00 So-N\u011B 10:00-18:00",buttontext:"\u041E\u043D\u043B\u0430\u0439\u043D \u0431\u0440\u043E\u043D\u044E\u0432\u0430\u043D\u043D\u044F"},Ud={title:"\u041B\u0430\u0441\u043A\u0430\u0432\u043E \u043F\u0440\u043E\u0441\u0438\u043C\u043E \u0432 \u0441\u0430\u043B\u043E\u043D Mika Hair \u0432 Brno",description:"",image:"../../../assets/images/about.jpg",image2:"../../../assets/images/about2.jpg",detail:"\u0412\u0438 \u043C\u043E\u0436\u0435\u0442\u0435 \u0437\u043D\u0430\u0439\u0442\u0438 \u043D\u0430\u0441 \u0443 \u0442\u0440\u044C\u043E\u0445 \u0432\u0456\u0434\u0434\u0456\u043B\u0435\u043D\u043D\u044F\u0445 7 \u0434\u043D\u0456\u0432 \u043D\u0430 \u0442\u0438\u0436\u0434\u0435\u043D\u044C. \u041D\u0430\u0448\u0456 \u043F\u043E\u0441\u043B\u0443\u0433\u0438 \u0432\u0456\u0434\u0440\u0456\u0437\u043D\u044F\u044E\u0442\u044C\u0441\u044F \u0456\u043D\u0434\u0438\u0432\u0456\u0434\u0443\u0430\u043B\u044C\u043D\u0438\u043C \u043F\u0456\u0434\u0445\u043E\u0434\u043E\u043C \u0456 \u0432\u0438\u0441\u043E\u043A\u043E\u044E \u0442\u0443\u0440\u0431\u043E\u0442\u043E\u044E. \u041D\u0430\u0448\u0456 \u043A\u043B\u0456\u0454\u043D\u0442\u0438 \u0446\u0456\u043D\u0443\u044E\u0442\u044C \u043D\u0435 \u0442\u0456\u043B\u044C\u043A\u0438 \u043D\u0430\u0448\u0456 \u043F\u0435\u0440\u0443\u043A\u0430\u0440\u0441\u044C\u043A\u0456 \u043F\u043E\u0441\u043B\u0443\u0433\u0438, \u0430 \u0439 \u043F\u0440\u043E\u0444\u0435\u0441\u0456\u0439\u043D\u0456 \u043A\u043E\u0441\u043C\u0435\u0442\u0438\u0447\u043D\u0456 \u043A\u043E\u043D\u0441\u0443\u043B\u044C\u0442\u0430\u0446\u0456\u0457. \u0412\u0441\u044F \u043F\u0440\u043E\u0434\u0443\u043A\u0446\u0456\u044F, \u044F\u043A\u0443 \u043C\u0438 \u0432\u0438\u043A\u043E\u0440\u0438\u0441\u0442\u043E\u0432\u0443\u0454\u043C\u043E, \u0454 \u043E\u0440\u0438\u0433\u0456\u043D\u0430\u043B\u044C\u043D\u043E\u044E \u0442\u0430 \u0431\u0435\u0437\u043F\u043E\u0441\u0435\u0440\u0435\u0434\u043D\u044C\u043E \u0432\u0456\u0434 \u0432\u0438\u0440\u043E\u0431\u043D\u0438\u043A\u0430, \u0449\u043E \u0437\u0430\u0431\u0435\u0437\u043F\u0435\u0447\u0443\u0454 \u0457\u0457 \u043D\u0430\u0439\u0432\u0438\u0449\u0443 \u044F\u043A\u0456\u0441\u0442\u044C. \u041D\u0430\u0448\u0456 \u0441\u043F\u0435\u0446\u0456\u0430\u043B\u0456\u0441\u0442\u0438 \u0440\u0435\u0433\u0443\u043B\u044F\u0440\u043D\u043E \u043F\u0440\u043E\u0445\u043E\u0434\u044F\u0442\u044C \u043D\u0430\u0432\u0447\u0430\u043D\u043D\u044F, \u0449\u043E\u0431 \u0431\u0443\u0442\u0438 \u0432 \u043A\u0443\u0440\u0441\u0456 \u043E\u0441\u0442\u0430\u043D\u043D\u0456\u0445 \u0442\u0435\u043D\u0434\u0435\u043D\u0446\u0456\u0439. \u0417\u0430\u0432\u0456\u0442\u0430\u0439\u0442\u0435 \u0434\u043E \u043D\u0430\u0441, \u0432\u0456\u0434\u0447\u0443\u0439\u0442\u0435 \u043D\u0430\u0448\u0443 \u0434\u0440\u0443\u0436\u043D\u044E \u0430\u0442\u043C\u043E\u0441\u0444\u0435\u0440\u0443 \u0442\u0430 \u0437\u0430\u043B\u0438\u0448\u0438\u0442\u0435\u0441\u044F \u0437\u0430\u0434\u043E\u0432\u043E\u043B\u0435\u043D\u0438\u043C\u0438 \u0442\u0430 \u0433\u0430\u0440\u043D\u0438\u043C \u043D\u0430\u0441\u0442\u0440\u043E\u0454\u043C. \u0423 Em Hair \u043C\u0438 \u0437\u0430\u0431\u0435\u0437\u043F\u0435\u0447\u0438\u043C\u043E \u0432\u0430\u043C \u0447\u0443\u0434\u043E\u0432\u0443 \u0442\u0443\u0440\u0431\u043E\u0442\u0443 \u0442\u0430 \u0432\u0438\u043D\u044F\u0442\u043A\u043E\u0432\u0438\u0439 \u0434\u043E\u0441\u0432\u0456\u0434. \u041C\u0438 \u0437 \u043D\u0435\u0442\u0435\u0440\u043F\u0456\u043D\u043D\u044F\u043C \u0447\u0435\u043A\u0430\u0454\u043C\u043E \u043D\u0430 \u0432\u0430\u0441!"},lo={title:"\u041A\u043E\u043D\u0442\u0430\u043A\u0442\u0438",addressText:"Skacelova 1648/24, Brno-Kralovo Pole",telegram:"t.me/ifoder",phone:"+420604445152",workHour:"\u041F\u043D-\u041F\u0442: 10:00-20:00 \u0421\u0431-\u041D\u0434: 10:00-18:00",description:"\u0417\u0432\u044F\u0436\u0456\u0442\u044C\u0441\u044F \u0437 \u043D\u0430\u043C\u0438"},Bd={title:"\u041F\u0440\u0430\u0439\u0441-\u043B\u0438\u0441\u0442",cardButton:"\u0417\u0430\u0431\u0440\u043E\u043D\u044E\u0432\u0430\u0442\u0438 \u0434\u0430\u0442\u0443",currently:"K\u010D"},Vd={title:"Gallery",description:"Project images",detail:`Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do
eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam!`,GalleryImages:[{id:1,url:"../assets/images/gallery-images/gallery-image-1.jpg",name:"Tree"},{id:2,url:"../assets/images/gallery-images/gallery-image-2.jpg",name:"Fingerprint"},{id:3,url:"../assets/images/gallery-images/gallery-image-3.jpg",name:"The Man"},{id:4,url:"../assets/images/gallery-images/gallery-image-4.jpg",name:"Mustache"},{id:5,url:"../assets/images/gallery-images/gallery-image-5.jpg",name:"Moose"},{id:6,url:"../assets/images/gallery-images/gallery-image-6.jpg",name:"Justice"}]};var Oi=["10:00","10:30","11:00","12:00","13:00","14:00","14:30","16:00"];var co=(()=>{let e=class e{constructor(){this.about=Ud}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=T({type:e,selectors:[["app-about"]],standalone:!0,features:[k],decls:15,vars:14,consts:[["id","about",1,"introduction","scrollto"],["nz-row","",1,"row2","clearfix"],["nz-col","","nzSpan","20",1,"section-heading"],[1,"section-title"],["nz-col","",3,"nzXl","nzLg","nzMd","nzSm","nzXs"],[1,"section-subtitle"],["nz-col","","nzOffset","2",1,"right-content",3,"nzXl","nzLg","nzMd","nzSm","nzXs"],["alt","",3,"src"]],template:function(r,o){r&1&&(u(0,"section",0)(1,"div",1)(2,"div",2)(3,"h3"),g(4,"About"),p(),u(5,"h2",3),g(6),p()(),u(7,"div",4),C(8,"h3"),u(9,"h2",3),g(10),p(),u(11,"p",5),g(12),p()(),u(13,"div",6),C(14,"img",7),p()()()),r&2&&(h(6),X(o.about.title),h(1),_("nzXl",12)("nzLg",12)("nzMd",8)("nzSm",20)("nzXs",20),h(3),X(o.about.description),h(2),X(o.about.detail),h(1),_("nzXl",6)("nzLg",6)("nzMd",6)("nzSm",20)("nzXs",20),h(1),_("src",o.about.image2,Et))},dependencies:[U,te,ee],styles:[".right-content[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:350px}"]});let t=e;return t})();var pg=["*"],uo=class{_clearListeners(){for(let e of this._listeners)e.remove();this._listeners=[]}constructor(e){this._ngZone=e,this._pending=[],this._listeners=[],this._targetStream=new Er(void 0)}getLazyEmitter(e){return this._targetStream.pipe(Ve(n=>{let i=new wn(r=>{if(!n){this._pending.push({observable:i,observer:r});return}let o=n.addListener(e,s=>{this._ngZone.run(()=>r.next(s))});if(!o){r.complete();return}return this._listeners.push(o),()=>o.remove()});return i}))}setTarget(e){let n=this._targetStream.value;e!==n&&(n&&(this._clearListeners(),this._pending=[]),this._targetStream.next(e),this._pending.forEach(i=>i.observable.subscribe(i.observer)),this._pending=[])}destroy(){this._clearListeners(),this._pending=[],this._targetStream.complete()}},Fi={center:{lat:37.421995,lng:-122.084092},zoom:17,mapTypeId:"roadmap"},jd="500px",$d="500px",Bs=(()=>{let e=class e{set center(i){this._center=i}set zoom(i){this._zoom=i}set options(i){this._options=i||Fi}constructor(i,r,o){if(this._elementRef=i,this._ngZone=r,this._eventManager=new uo(b(J)),this.height=jd,this.width=$d,this._options=Fi,this.mapInitialized=new St,this.authFailure=new St,this.boundsChanged=this._eventManager.getLazyEmitter("bounds_changed"),this.centerChanged=this._eventManager.getLazyEmitter("center_changed"),this.mapClick=this._eventManager.getLazyEmitter("click"),this.mapDblclick=this._eventManager.getLazyEmitter("dblclick"),this.mapDrag=this._eventManager.getLazyEmitter("drag"),this.mapDragend=this._eventManager.getLazyEmitter("dragend"),this.mapDragstart=this._eventManager.getLazyEmitter("dragstart"),this.headingChanged=this._eventManager.getLazyEmitter("heading_changed"),this.idle=this._eventManager.getLazyEmitter("idle"),this.maptypeidChanged=this._eventManager.getLazyEmitter("maptypeid_changed"),this.mapMousemove=this._eventManager.getLazyEmitter("mousemove"),this.mapMouseout=this._eventManager.getLazyEmitter("mouseout"),this.mapMouseover=this._eventManager.getLazyEmitter("mouseover"),this.projectionChanged=this._eventManager.getLazyEmitter("projection_changed"),this.mapRightclick=this._eventManager.getLazyEmitter("rightclick"),this.tilesloaded=this._eventManager.getLazyEmitter("tilesloaded"),this.tiltChanged=this._eventManager.getLazyEmitter("tilt_changed"),this.zoomChanged=this._eventManager.getLazyEmitter("zoom_changed"),this._isBrowser=Mi(o),this._isBrowser){let s=window;s.google,this._existingAuthFailureCallback=s.gm_authFailure,s.gm_authFailure=()=>{this._existingAuthFailureCallback&&this._existingAuthFailureCallback(),this.authFailure.emit()}}}ngOnChanges(i){(i.height||i.width)&&this._setSize();let r=this.googleMap;r&&(i.options&&r.setOptions(this._combineOptions()),i.center&&this._center&&r.setCenter(this._center),i.zoom&&this._zoom!=null&&r.setZoom(this._zoom),i.mapTypeId&&this.mapTypeId&&r.setMapTypeId(this.mapTypeId))}ngOnInit(){this._isBrowser&&(this._mapEl=this._elementRef.nativeElement.querySelector(".map-container"),this._setSize(),google.maps.Map?this._initialize(google.maps.Map):this._ngZone.runOutsideAngular(()=>{google.maps.importLibrary("maps").then(i=>this._initialize(i.Map))}))}_initialize(i){this._ngZone.runOutsideAngular(()=>{this.googleMap=new i(this._mapEl,this._combineOptions()),this._eventManager.setTarget(this.googleMap),this.mapInitialized.emit(this.googleMap)})}ngOnDestroy(){if(this.mapInitialized.complete(),this._eventManager.destroy(),this._isBrowser){let i=window;i.gm_authFailure=this._existingAuthFailureCallback}}fitBounds(i,r){this._assertInitialized(),this.googleMap.fitBounds(i,r)}panBy(i,r){this._assertInitialized(),this.googleMap.panBy(i,r)}panTo(i){this._assertInitialized(),this.googleMap.panTo(i)}panToBounds(i,r){this._assertInitialized(),this.googleMap.panToBounds(i,r)}getBounds(){return this._assertInitialized(),this.googleMap.getBounds()||null}getCenter(){return this._assertInitialized(),this.googleMap.getCenter()}getClickableIcons(){return this._assertInitialized(),this.googleMap.getClickableIcons()}getHeading(){return this._assertInitialized(),this.googleMap.getHeading()}getMapTypeId(){return this._assertInitialized(),this.googleMap.getMapTypeId()}getProjection(){return this._assertInitialized(),this.googleMap.getProjection()||null}getStreetView(){return this._assertInitialized(),this.googleMap.getStreetView()}getTilt(){return this._assertInitialized(),this.googleMap.getTilt()}getZoom(){return this._assertInitialized(),this.googleMap.getZoom()}get controls(){return this._assertInitialized(),this.googleMap.controls}get data(){return this._assertInitialized(),this.googleMap.data}get mapTypes(){return this._assertInitialized(),this.googleMap.mapTypes}get overlayMapTypes(){return this._assertInitialized(),this.googleMap.overlayMapTypes}_resolveMap(){return this.googleMap?Promise.resolve(this.googleMap):this.mapInitialized.pipe(Hc(1)).toPromise()}_setSize(){if(this._mapEl){let i=this._mapEl.style;i.height=this.height===null?"":Wd(this.height)||jd,i.width=this.width===null?"":Wd(this.width)||$d}}_combineOptions(){let i=this._options||{};return et(Ie({},i),{center:this._center||i.center||Fi.center,zoom:this._zoom??i.zoom??Fi.zoom,mapTypeId:this.mapTypeId||i.mapTypeId||Fi.mapTypeId,mapId:this.mapId||i.mapId})}_assertInitialized(){this.googleMap}};e.\u0275fac=function(r){return new(r||e)(Y(ru),Y(J),Y(wt))},e.\u0275cmp=T({type:e,selectors:[["google-map"]],inputs:{height:"height",width:"width",mapId:"mapId",mapTypeId:"mapTypeId",center:"center",zoom:"zoom",options:"options"},outputs:{mapInitialized:"mapInitialized",authFailure:"authFailure",boundsChanged:"boundsChanged",centerChanged:"centerChanged",mapClick:"mapClick",mapDblclick:"mapDblclick",mapDrag:"mapDrag",mapDragend:"mapDragend",mapDragstart:"mapDragstart",headingChanged:"headingChanged",idle:"idle",maptypeidChanged:"maptypeidChanged",mapMousemove:"mapMousemove",mapMouseout:"mapMouseout",mapMouseover:"mapMouseover",projectionChanged:"projectionChanged",mapRightclick:"mapRightclick",tilesloaded:"tilesloaded",tiltChanged:"tiltChanged",zoomChanged:"zoomChanged"},exportAs:["googleMap"],standalone:!0,features:[Is,k],ngContentSelectors:pg,decls:2,vars:0,consts:[[1,"map-container"]],template:function(r,o){r&1&&(au(),C(0,"div",0),lu(1))},encapsulation:2,changeDetection:0});let t=e;return t})(),mg=/([A-Za-z%]+)$/;function Wd(t){return t==null?"":mg.test(t)?t:`${t}px`}var fg={position:{lat:37.221995,lng:-122.184092}},Hd=(()=>{let e=class e{set title(i){this._title=i}set position(i){this._position=i}set content(i){this._content=i}set gmpDraggable(i){this._draggable=i}set options(i){this._options=i}set zIndex(i){this._zIndex=i}constructor(i,r){this._googleMap=i,this._ngZone=r,this._eventManager=new uo(b(J)),this.mapClick=this._eventManager.getLazyEmitter("click"),this.mapDrag=this._eventManager.getLazyEmitter("drag"),this.mapDragend=this._eventManager.getLazyEmitter("dragend"),this.mapDragstart=this._eventManager.getLazyEmitter("dragstart"),this.markerInitialized=new St}ngOnInit(){this._googleMap._isBrowser&&(google.maps.marker?.AdvancedMarkerElement&&this._googleMap.googleMap?this._initialize(this._googleMap.googleMap,google.maps.marker.AdvancedMarkerElement):this._ngZone.runOutsideAngular(()=>{Promise.all([this._googleMap._resolveMap(),google.maps.importLibrary("marker")]).then(([i,r])=>{this._initialize(i,r.AdvancedMarkerElement)})}))}_initialize(i,r){this._ngZone.runOutsideAngular(()=>{this.advancedMarker=new r(this._combineOptions()),this._assertInitialized(),this.advancedMarker.map=i,this._eventManager.setTarget(this.advancedMarker),this.markerInitialized.next(this.advancedMarker)})}ngOnChanges(i){let{advancedMarker:r,_content:o,_position:s,_title:a,_draggable:l,_zIndex:c}=this;r&&(i.title&&(r.title=a),i.content&&(r.content=o),i.gmpDraggable&&(r.gmpDraggable=l),i.content&&(r.content=o),i.position&&(r.position=s),i.zIndex&&(r.zIndex=c))}ngOnDestroy(){this.markerInitialized.complete(),this._eventManager.destroy(),this.advancedMarker&&(this.advancedMarker.map=null)}_combineOptions(){let i=this._options||fg;return et(Ie({},i),{title:this._title||i.title,position:this._position||i.position,content:this._content||i.content,zIndex:this._zIndex??i.zIndex,gmpDraggable:this._draggable??i.gmpDraggable,map:this._googleMap.googleMap})}_assertInitialized(){}};e.\u0275fac=function(r){return new(r||e)(Y(Bs),Y(J))},e.\u0275dir=eu({type:e,selectors:[["map-advanced-marker"]],inputs:{title:"title",position:"position",content:"content",gmpDraggable:"gmpDraggable",options:"options",zIndex:"zIndex"},outputs:{mapClick:"mapClick",mapDrag:"mapDrag",mapDragend:"mapDragend",mapDragstart:"mapDragstart",markerInitialized:"markerInitialized"},exportAs:["mapAdvancedMarker"],standalone:!0,features:[Is]});let t=e;return t})();var ho=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=De({type:e}),e.\u0275inj=Ne({});let t=e;return t})();var po=(()=>{let e=class e{constructor(){this.marker={position:{lat:At.lat,lng:At.lng}},this.options={mapId:"DEMO_MAP_ID",disableDefaultUI:!0,center:{lat:At.lat,lng:At.lng},zoom:14},this.client=lo}ngOnInit(){}googleNav(){window.open("https://maps.google.com/maps?daddr="+At.lat+","+At.lng)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=T({type:e,selectors:[["app-clients"]],standalone:!0,features:[k],decls:27,vars:20,consts:[["id","clients",1,"secondary-color","scrollto","clearfix"],["nz-row","",1,"row","clearfix"],["nz-col","",1,"col-3",3,"nzXl","nzLg","nzMd","nzSm","nzXs"],[1,"section-heading"],[1,"section-title"],[1,"section-subtitle"],[1,"fa","fa-clock-o","fa-2x"],[1,"fa","fa-map-marker","fa-2x"],[3,"click"],[1,"fa","fa-telegram","fa-2x"],[3,"href"],[1,"fa","fa-phone","fa-2x"],["id","map"],["height","400px","width","400px",3,"options","mapClick"],[3,"position","mapClick"]],template:function(r,o){r&1&&(u(0,"aside",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3"),g(5),p(),u(6,"h2",4),g(7),p(),u(8,"div",5),C(9,"i",6),g(10),p(),u(11,"div",5),C(12,"i",7),u(13,"a",8),E("click",function(){return o.googleNav()}),g(14),p()(),u(15,"div",5),C(16,"i",9),u(17,"a",10),g(18),p()(),u(19,"div",5),C(20,"i",11),u(21,"a",10),g(22),p()()()(),u(23,"div",2)(24,"div",12)(25,"google-map",13),E("mapClick",function(){return o.googleNav()}),u(26,"map-advanced-marker",14),E("mapClick",function(){return o.googleNav()}),p()()()()()()),r&2&&(h(2),_("nzXl",8)("nzLg",8)("nzMd",12)("nzSm",20)("nzXs",20),h(3),X(o.client.title),h(2),X(o.client.description),h(3),oe(" ",o.client.workHour," "),h(4),X(o.client.addressText),h(3),kr("href","http://",o.client.telegram,"",Et),h(1),X(o.client.telegram),h(3),rt("href","tel:"+o.client.phone,Et),h(1),oe(" ",o.client.phone,""),h(1),_("nzXl",8)("nzLg",8)("nzMd",20)("nzSm",20)("nzXs",20),h(2),_("options",o.options),h(1),_("position",o.marker.position))},dependencies:[$,ho,Bs,Hd,U,te,ee]});let t=e;return t})();function _g(t,e){if(t&1&&(u(0,"blockquote",4),C(1,"img",5),u(2,"q"),g(3),p(),u(4,"footer"),g(5),p()()),t&2){let n=e.$implicit;_("nzXl",8)("nzLg",8)("nzMd",12)("nzSm",20)("nzXs",20),h(1),rt("src",n.userimage,Et),h(2),X(n.comments),h(2),oe("",n.name," - Happy Customer")}}var mo=(()=>{let e=class e{constructor(){this.testimonials={title:"\u0412\u0456\u0434\u0433\u0443\u043A\u0438",description:"\u0429\u043E \u043F\u0440\u043E \u043D\u0430\u0441 \u043A\u0430\u0436\u0443\u0442\u044C",detail:"",feedbacks:[{name:"John Doe",userimage:"../assets/images/user-images/user-1.jpg",comments:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua",company:"ABC"},{name:"Roslyn Doe",userimage:"../assets/images/user-images/user-2.jpg",comments:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua",company:"XYZ"},{name:"Thomas Doe",userimage:"../assets/images/user-images/user-3.jpg",comments:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua",company:"PQR"}]}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=T({type:e,selectors:[["app-feedback"]],standalone:!0,features:[k],decls:9,vars:3,consts:[["id","testimonials","data-enllax-ratio",".2",1,"scrollto"],["nz-row","",1,"row2","clearfix"],["nz-col","",1,"section-heading",3,"nzSpan"],[1,"section-title"],["nz-col","",1,"col-3","testimonial","classic",3,"nzXl","nzLg","nzMd","nzSm","nzXs"],["alt","User",3,"src"],["nz-col","","class","col-3 testimonial classic",3,"nzXl","nzLg","nzMd","nzSm","nzXs"]],template:function(r,o){r&1&&(u(0,"aside",0)(1,"div",1)(2,"div",2)(3,"h3"),g(4),p(),u(5,"h2",3),g(6),p()(),nt(7,_g,6,8,"blockquote",6,Ln),p()()),r&2&&(h(2),_("nzSpan",20),h(2),X(o.testimonials.title),h(2),X(o.testimonials.description),h(1),it(o.testimonials.feedbacks))},dependencies:[U,te,ee]});let t=e;return t})();function vg(t,e){if(t&1&&(u(0,"p"),g(1),p()),t&2){let n=M().$implicit;h(1),oe(" ",n.description," ")}}function yg(t,e){if(t&1){let n=re();u(0,"div",6)(1,"nz-card",7),E("click",function(){let o=A(n).$implicit,s=M(2);return x(s.submitService(o))}),I(2,vg,2,1,"p",8),u(3,"div",9)(4,"span",10),g(5),p(),u(6,"button",11),g(7," \u0417\u0430\u043F\u0438\u0441\u0430\u0442\u0438\u0441\u044F "),p()()()()}if(t&2){let n=e.$implicit;_("nzXl",8)("nzLg",8)("nzMd",12)("nzSm",20)("nzXs",20),h(1),_("nzTitle",n.title),h(1),_("ngIf",n.description),h(3),oe("",n.price," K\u010D"),h(1),kr("routerLink","/reserve/",n.id,"")}}function Cg(t,e){if(t&1&&(u(0,"div",4)(1,"h4"),g(2),p()(),I(3,yg,8,9,"div",5)),t&2){let n=e.$implicit;_("nzSpan",20),h(2),X(n.title),h(1),_("ngForOf",n.list)}}var fo=(()=>{let e=class e{constructor(){this._servicesService=b(Ft),this.visibleServices=en(()=>{let i=this._servicesService.servicesSig(),r=this._servicesService.servicesCategorySig();return r.map(o=>o.list=i.filter(s=>o.id===s.categoryId)),r})}ngOnInit(){this._servicesService.getServices().subscribe(i=>this._servicesService.servicesSig.set(i)),this._servicesService.getServicesCategory().subscribe(i=>this._servicesService.servicesCategorySig.set(i))}submitService(i){}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=T({type:e,selectors:[["app-services"]],standalone:!0,features:[k],decls:9,vars:2,consts:[["id","pricing",1,"secondary-color","scrollto"],["nz-row","",1,"row2","clearfix"],["nz-col","",1,"section-heading",3,"nzSpan"],["nz-col","",1,"section-title",3,"nzSpan"],["nz-col","",3,"nzSpan"],["nz-col","","class","service-category",3,"nzXl","nzLg","nzMd","nzSm","nzXs",4,"ngFor","ngForOf"],["nz-col","",1,"service-category",3,"nzXl","nzLg","nzMd","nzSm","nzXs"],["nzSize","small",1,"service-card",3,"nzTitle","click"],[4,"ngIf"],[1,"service-card-action"],[1,"card-price"],["nz-button","","nzType","primary","nzGhost","",3,"routerLink"]],template:function(r,o){r&1&&(u(0,"section",0)(1,"div",1)(2,"div",2)(3,"h3"),g(4,"\u0426\u0456\u043D\u0438"),p(),u(5,"h2",3),g(6,"\u041F\u0440\u0430\u0439\u0441-\u043B\u0438\u0441\u0442"),p()(),nt(7,Cg,4,3,null,null,Fn),p()()),r&2&&(h(2),_("nzSpan",20),h(3),_("nzSpan",20),h(2),it(o.visibleServices()))},dependencies:[$,Ce,st,O,le,q,ae,Kn,te,ee,U,at],styles:[".content[_ngcontent-%COMP%]{margin:0 auto;text-align:start;padding:90px 40px 50px;max-width:1100px}.steps-action[_ngcontent-%COMP%]{margin-top:24px}button[_ngcontent-%COMP%]{margin-right:8px}h3[_ngcontent-%COMP%]{margin-top:20px}h4[_ngcontent-%COMP%]{padding-top:20px;padding-left:3%;font-weight:700}.service-card[_ngcontent-%COMP%]{transition:all .2s;cursor:pointer;padding-left:0!important;padding-right:0!important;margin:10px 5px}.service-card[_ngcontent-%COMP%]:hover{box-shadow:0 2px 8px #0000001a,0 3px 20px #00000017}.card-price[_ngcontent-%COMP%]{color:#000000d2;font-size:18px;font-weight:600;padding-right:10px}.service-card-action[_ngcontent-%COMP%]{display:flex;width:100%;justify-content:end}.service-category[_ngcontent-%COMP%]{padding-bottom:0}"]});let t=e;return t})();var Vs=(()=>{let e=class e{constructor(){this.header=Ld,this.client=lo}googleNav(){window.open("https://maps.google.com/maps?daddr="+At.lat+","+At.lng)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=T({type:e,selectors:[["app-home"]],standalone:!0,features:[k],decls:19,vars:7,consts:[["id","banner","data-enllax-ratio",".5",1,"scrollto","clearfix"],["nz-row","","id","banner-content",1,"row2","clearfix"],["nz-col","",1,"section-heading",3,"nzSpan"],[1,"section-title"],["nz-row","",1,"ant-flex-justify-center","big-padding-top","big-padding-bottom"],["nz-col","",1,"section-subtitle",3,"nzSpan"],["nz-col","",3,"nzSpan"],["routerLink","/reserve","routerLinkActive","active",1,"button"]],template:function(r,o){r&1&&(u(0,"header",0)(1,"div",1)(2,"div",2)(3,"h1",3),g(4),p()(),u(5,"div",4)(6,"div",5)(7,"p")(8,"b"),g(9),p()(),u(10,"p"),g(11),p()()(),u(12,"div",6)(13,"a",7),g(14),p()()()(),C(15,"app-about")(16,"app-services")(17,"app-feedback")(18,"app-clients")),r&2&&(h(2),_("nzSpan",20),h(2),X(o.header.title),h(2),_("nzSpan",20),h(3),X(o.client.addressText),h(2),X(o.client.phone),h(1),_("nzSpan",20),h(2),X(o.header.buttontext))},dependencies:[po,at,Nr,co,mo,fo,U,te,ee],encapsulation:2});let t=e;return t})();function bg(t,e){if(t&1&&(u(0,"a",1),C(1,"img",2),p()),t&2){let n=e.$implicit;rt("href",n.url,Et),h(1),rt("src",n.url,Et),rt("alt",n.name)}}var Kd=(()=>{let e=class e{constructor(){this.Gallery=Vd}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=T({type:e,selectors:[["app-gallery"]],standalone:!0,features:[k],decls:3,vars:0,consts:[["id","gallery","data-featherlight-gallery","","data-featherlight-filter","a",1,"row2","text-center","scrollto","clearfix"],["data-featherlight","image","data-wow-delay","0.1s",1,"col-3","wow","fadeIn",3,"href"],[3,"src","alt"],["data-featherlight","image","class","col-3 wow fadeIn","data-wow-delay","0.1s",3,"href"]],template:function(r,o){r&1&&(u(0,"aside",0),nt(1,bg,2,3,"a",3,Ln),p()),r&2&&(h(1),it(o.Gallery.GalleryImages))}});let t=e;return t})();function Eg(t,e){if(t&1&&C(0,"nz-avatar",10),t&2){let n=M().$implicit;_("nzSrc",n.avatar)}}function Sg(t,e){if(t&1){let n=re();u(0,"div",6)(1,"nz-card",7),E("click",function(){let o=A(n).$implicit,s=M(2);return x(s.submitBarber(o))}),C(2,"nz-card-meta",8),p(),I(3,Eg,1,1,"ng-template",null,9,Te),p()}if(t&2){let n=e.$implicit,i=G(4),r,o;_("nzXl",8)("nzLg",8)("nzMd",8)("nzSm",20)("nzXs",20),h(2),_("nzAvatar",i)("nzTitle",((r=n.name)!==null&&r!==void 0?r:n.name)||null)("nzDescription",((o=n.description)!==null&&o!==void 0?o:n.description)||null)}}function Ig(t,e){if(t&1&&(u(0,"section",1)(1,"div",2)(2,"div",3)(3,"h2",4),g(4,"\u041F\u0440\u0430\u0446\u0456\u0432\u043D\u0438\u043A\u0438"),p()(),I(5,Sg,5,8,"div",5),p()()),t&2){let n=e.ngIf;h(2),_("nzSpan",22),h(3),_("ngForOf",n)}}var qd=(()=>{let e=class e{constructor(){this.eventBarber=new St,this._barbersService=b(ii)}ngOnInit(){this.barbers$=this._barbersService.getBarbers()}submitBarber(i){this.eventBarber.emit(i)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=T({type:e,selectors:[["app-barbers"]],outputs:{eventBarber:"eventBarber"},standalone:!0,features:[k],decls:2,vars:3,consts:[["id","services","class","secondary-color scrollto",4,"ngIf"],["id","services",1,"secondary-color","scrollto"],["nz-row","",1,"row2","clearfix"],["nz-col","",1,"section-heading",3,"nzSpan"],["nz-col","","nzSpan","22",1,"section-title"],["nz-col","","class","service-category",3,"nzXl","nzLg","nzMd","nzSm","nzXs",4,"ngFor","ngForOf"],["nz-col","",1,"service-category",3,"nzXl","nzLg","nzMd","nzSm","nzXs"],["nzSize","small",1,"service-card",3,"click"],[3,"nzAvatar","nzTitle","nzDescription"],["avatarTemplate",""],[3,"nzSrc"]],template:function(r,o){r&1&&(I(0,Ig,6,2,"section",0),ot(1,"async")),r&2&&_("ngIf",It(1,1,o.barbers$))},dependencies:[$,Ce,st,Bn,U,Or,Kn,ju,te,ee,O],styles:[".service-card[_ngcontent-%COMP%]{transition:all .2s;cursor:pointer;padding-left:0!important;padding-right:0!important;margin:10px 5px}.service-card[_ngcontent-%COMP%]:hover{transform:scale(1.01);box-shadow:0 4px 8px #0003,0 6px 20px #00000030}.card-price[_ngcontent-%COMP%]{color:#f3751cd2;font-size:16px;font-weight:600}"]});let t=e;return t})();function Tg(t,e){if(t&1&&(u(0,"a",9),g(1),p()),t&2){let n=M().$implicit;h(1),oe("",n.price," K\u010D")}}function kg(t,e){if(t&1){let n=re();u(0,"div",6)(1,"nz-card",7),E("click",function(){let o=A(n).$implicit,s=M(2);return x(s.submitService(o))}),u(2,"p"),g(3),p()(),I(4,Tg,2,1,"ng-template",null,8,Te),p()}if(t&2){let n=e.$implicit,i=G(5);_("nzXl",8)("nzLg",8)("nzMd",8)("nzSm",22)("nzXs",22),h(1),_("nzTitle",n.title)("nzExtra",i),h(2),oe(" ",n.description," ")}}function Mg(t,e){if(t&1&&(u(0,"h4",4),g(1),p(),I(2,kg,6,8,"div",5)),t&2){let n=e.$implicit;h(1),X(n.title),h(1),_("ngForOf",n.list)}}var Zd=(()=>{let e=class e{constructor(){this.eventService=new St,this._servicesService=b(Ft),this.visibleServices=en(()=>{let i=this._servicesService.servicesSig(),r=this._servicesService.servicesCategorySig();return r.map(o=>o.list=i.filter(s=>o.id===s.categoryId)),r})}ngOnInit(){this._servicesService.getServices().subscribe(i=>this._servicesService.servicesSig.set(i)),this._servicesService.getServicesCategory().subscribe(i=>this._servicesService.servicesCategorySig.set(i))}submitService(i){this.eventService.emit(i)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=T({type:e,selectors:[["app-services"]],outputs:{eventService:"eventService"},standalone:!0,features:[k],decls:7,vars:1,consts:[["id","services",1,"secondary-color","scrollto"],["nz-row","",1,"row2","clearfix",2,"margin","0 auto"],["nz-col","","cl","","ass","section-heading",3,"nzSpan"],["nz-col","","nzSpan","22",1,"section-title"],["nz-col","","nzSpan","22"],["nz-col","","class","service-category",3,"nzXl","nzLg","nzMd","nzSm","nzXs",4,"ngFor","ngForOf"],["nz-col","",1,"service-category",3,"nzXl","nzLg","nzMd","nzSm","nzXs"],["nzSize","small",1,"service-card",3,"nzTitle","nzExtra","click"],["extraTemplate",""],[1,"card-price"]],template:function(r,o){r&1&&(u(0,"section",0)(1,"div",1)(2,"div",2)(3,"h2",3),g(4,"\u041F\u043E\u0441\u043B\u0443\u0433\u0438"),p()(),nt(5,Mg,3,2,null,null,Fn),p()()),r&2&&(h(2),_("nzSpan",22),h(3),it(o.visibleServices()))},dependencies:[$,Ce,U,Kn,te,ee],styles:[".service-card[_ngcontent-%COMP%]{transition:all .2s;cursor:pointer;padding-left:0!important;padding-right:0!important;margin:10px 5px}.service-card[_ngcontent-%COMP%]:hover{transform:scale(1.01);box-shadow:0 4px 8px #0003,0 6px 20px #00000030}.card-price[_ngcontent-%COMP%]{color:#f3751cd2;font-size:16px;font-weight:600}"]});let t=e;return t})();function Ag(t,e){if(t&1&&(u(0,"label",11),g(1),p()),t&2){let n=e.$implicit;_("nzValue",n),h(1),X(n)}}var Yd=(()=>{let e=class e{constructor(){this.clickEvent=new St,this.selectedDate=new Date,this.timePicker=Oi,this._calendarEvents=b(cn),this.calendarEvents=this._calendarEvents.$calendarEvents,this.disabledDate=i=>{let r=Ou(i,new Date)<0;return this.disabledTime(i),this.timePicker.length<1?!0:r}}ngOnInit(){this.disabledTime(this.selectedDate)}selectDate(i){this.selectedTime=void 0,this.disabledTime(i)}disabledTime(i){let r=this._calendarEvents.getCalendarEventsOfDate(i);this.timePicker=Oi,this.timePicker.filter(o=>r),r.forEach(o=>this.timePicker=this.timePicker.filter(s=>Ur(new Date(o.date),"HH:mm")!=s))}selectTime(i){let r=i.split(":");this.selectedDate.setHours(r[0],r[1],0)}clickNext(){this.clickEvent.emit(this.selectedDate)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=T({type:e,selectors:[["app-datepicker"]],outputs:{clickEvent:"clickEvent"},standalone:!0,features:[k],decls:15,vars:16,consts:[["id","services",1,"secondary-color","scrollto"],["nz-row","",1,"row2","clearfix"],["nz-col","",1,"section-heading",3,"nzSpan"],["nz-col","","nzSpan","20"],["nz-row","","nzJustify","space-around",1,"row2","big-padding-top","big-padding-bottom"],["nz-col","",3,"nzXl","nzLg","nzMd","nzSm","nzXs"],[3,"ngModel","nzDisabledDate","nzFullscreen","ngModelChange","nzSelectChange"],["nz-col","",1,"big-padding-top",3,"nzXl","nzLg","nzMd","nzSm","nzXs"],["nzSize","large",3,"ngModel","ngModelChange"],["nz-col","","nzSpan","20",1,"big-padding-top"],["nz-button","","nzType","primary","nzBlock","",2,"width","100%",3,"disabled","click"],["nz-radio-button","",2,"margin","5px 10px",3,"nzValue"],["style","margin: 5px 10px","nz-radio-button","",3,"nzValue"]],template:function(r,o){r&1&&(u(0,"section",0)(1,"div",1)(2,"div",2)(3,"h2",3),g(4,"\u0412\u0438\u0431\u0435\u0440\u0456\u0442\u044C \u0442\u0435\u0440\u043C\u0456\u043D"),p()(),u(5,"div",4)(6,"div",5)(7,"nz-calendar",6),E("ngModelChange",function(a){return o.selectedDate=a})("nzSelectChange",function(a){return o.selectDate(a)}),p()(),u(8,"div",7)(9,"nz-radio-group",8),E("ngModelChange",function(a){return o.selectedTime=a})("ngModelChange",function(a){return o.selectTime(a)}),nt(10,Ag,2,2,"label",12,Fn),p()(),u(12,"div",9)(13,"button",10),E("click",function(){return o.clickNext()}),g(14," \u041F\u0440\u043E\u0434\u043E\u0432\u0436\u0438\u0442\u0438 "),p()()()()()),r&2&&(h(2),_("nzSpan",24),h(4),_("nzXl",10)("nzLg",10)("nzMd",20)("nzSm",20)("nzXs",20),h(1),_("ngModel",o.selectedDate)("nzDisabledDate",o.disabledDate)("nzFullscreen",!1),h(1),_("nzXl",10)("nzLg",10)("nzMd",20)("nzSm",20)("nzXs",20),h(1),_("ngModel",o.selectedTime),h(1),it(o.timePicker),h(3),_("disabled",!o.selectedTime))},dependencies:[$,O,fe,lt,le,q,ae,Vr,te,ee,Lu,Fu,U],styles:[".time-lebel[_ngcontent-%COMP%]{margin-left:10px!important}"]});let t=e;return t})();function xg(t,e){if(t&1){let n=re();u(0,"app-services",2),E("eventService",function(r){A(n);let o=M();return x(o.setSelectedService(r))}),p()}}function Ng(t,e){if(t&1){let n=re();u(0,"app-barbers",3),E("eventBarber",function(r){A(n);let o=M();return x(o.setSelectedBarber(r))}),p()}}function Dg(t,e){if(t&1){let n=re();u(0,"app-datepicker",4),E("clickEvent",function(r){A(n);let o=M();return x(o.setSelectedDate(r))}),p()}}var js=(()=>{let e=class e{constructor(){this.auth=b(we),this.route=b(Ar),this.router=b(se),this._calendarEventService=b(cn),this._servicesService=b(Ft),this._storage=b(He),this.calendarEvent={},this.current=0,this.timePicker=Oi,this.price=Bd}ngOnInit(){Number(this.route.snapshot.paramMap.get("service"))&&(this.current=1)}setSelectedBarber(i){this.current++,this._calendarEventService.$currentReserve.update(r=>r=et(Ie({},r),{barber:i})),this.calendarEvent.barber=i.id}setSelectedService(i){this.current++,this._calendarEventService.$currentReserve.update(r=>r=et(Ie({},r),{service:i})),this.calendarEvent.service=i.id}setSelectedDate(i){this.calendarEvent.date=i,this._calendarEventService.$currentReserve.update(r=>r=et(Ie({},r),{date:i})),this.auth.isAuth()?(this._calendarEventService.compliteReservace(),this.router.navigate(["home"])):this._calendarEventService.compliteReservace()}submitForm(i){}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=T({type:e,selectors:[["app-reserve"]],standalone:!0,features:[k],decls:10,vars:4,consts:[["id","pricing",1,"secondary-color","scrollto","clearfix"],[1,"steps",3,"nzCurrent"],[3,"eventService"],[3,"eventBarber"],[3,"clickEvent"]],template:function(r,o){r&1&&(u(0,"section",0)(1,"div")(2,"nz-steps",1),C(3,"nz-step")(4,"nz-step")(5,"nz-step")(6,"nz-step"),p()(),I(7,xg,1,0,"app-services")(8,Ng,1,0,"app-barbers")(9,Dg,1,0,"app-datepicker"),p()),r&2&&(h(2),_("nzCurrent",o.current),h(5),K(7,o.current==0?7:-1),h(1),K(8,o.current==1?8:-1),h(1),K(9,o.current==2?9:-1))},dependencies:[$,O,Xu,Yu,U,qd,Zd,Yd],styles:["nz-select[_ngcontent-%COMP%]{margin:0 8px 10px 0;width:120px}.content[_ngcontent-%COMP%]{margin:0 auto;text-align:start;padding:90px 40px 50px}[nz-form][_ngcontent-%COMP%]{max-width:600px;padding-top:20px}.steps[_ngcontent-%COMP%]{max-width:500px;margin:0 auto;padding-bottom:5px}.phone-select[_ngcontent-%COMP%]{width:90px}.register-are[_ngcontent-%COMP%]{margin-bottom:8px}.steps-content[_ngcontent-%COMP%]{max-width:400;margin-top:16px;border:1px dashed #e9e9e9;border-radius:6px;background-color:#fafafa;min-height:200px;padding-top:80px}.steps-action[_ngcontent-%COMP%]{margin-top:24px}button[_ngcontent-%COMP%]{margin-right:8px}h3[_ngcontent-%COMP%]{margin-top:20px}.service-card[_ngcontent-%COMP%]{transition:all .2s;cursor:pointer;padding-left:0!important;padding-right:0!important;margin:10px 5px}.service-card[_ngcontent-%COMP%]:hover{transform:scale(1.01);box-shadow:0 4px 8px #0003,0 6px 20px #00000030}.card-price[_ngcontent-%COMP%]{color:#f3751cd2;font-size:16px;font-weight:600}.time-picker[_ngcontent-%COMP%]{display:flex}label[_ngcontent-%COMP%]{margin:4px}"]});let t=e;return t})();function Rg(t,e){if(t&1&&C(0,"nz-option",13),t&2){let n=e.$implicit;_("nzValue",n.id)("nzLabel",n.title||null)}}var Pg=()=>({minRows:2,maxRows:20});function Og(t,e){if(t&1){let n=re();u(0,"tr",5),E("click",function(){let o=A(n).$implicit,s=M();return x(s.startEdit(o))}),u(1,"td")(2,"div",6),g(3),p(),u(4,"input",7),E("ngModelChange",function(r){let s=A(n).$implicit;return x(s.title=r)}),p()(),u(5,"td")(6,"div",6),g(7),p(),u(8,"nz-select",8),E("ngModelChange",function(r){let s=A(n).$implicit;return x(s.categoryId=r)}),I(9,Rg,1,2,"nz-option",9),p()(),u(10,"td")(11,"div",6),g(12),p(),u(13,"input",10),E("ngModelChange",function(r){let s=A(n).$implicit;return x(s.price=r)}),p()(),u(14,"td")(15,"div",6),g(16),p(),u(17,"textarea",11),E("ngModelChange",function(r){let s=A(n).$implicit;return x(s.description=r)}),p()(),u(18,"td")(19,"a",12),E("nzOnConfirm",function(){let o=A(n).$implicit,s=M(),a=G(5);return x(s.deleteRow(o.id,a.data))}),g(20,"Delete"),p()()()}if(t&2){let n=e.$implicit,i=M();h(2),_("hidden",i.editService===n),h(1),oe(" ",n.title," "),h(1),_("hidden",i.editService!==n)("ngModel",n.title),h(2),_("hidden",i.editService===n),h(1),oe(" ",i.getCategoryTitle(n.categoryId)," "),h(1),_("ngModel",n.categoryId)("hidden",i.editService!==n),h(1),_("ngForOf",i._servicesService.servicesCategorySig()),h(2),_("hidden",i.editService===n),h(1),oe(" ",n.price," "),h(1),_("hidden",i.editService!==n)("ngModel",n.price),h(2),_("hidden",i.editService===n),h(1),oe(" ",n.description," "),h(1),_("hidden",i.editService!==n)("ngModel",n.description)("nzAutosize",Un(18,Pg))}}var eh=(()=>{let e=class e{constructor(){this._servicesService=b(Ft),this.editService=null}startEdit(i){this.editService=i}stopEdit(i){i.forEach(r=>this._servicesService.updateServices(r)),this.editService=null}getCategoryTitle(i){return this._servicesService.servicesCategorySig().find(o=>o.id==i)?.title}addRow(){this._servicesService.addServices({title:"",categoryId:this._servicesService.servicesCategorySig().at(0)?.id,price:0,description:""})}deleteRow(i,r){this.stopEdit(r),this._servicesService.deleteServices(i)}ngOnInit(){this._servicesService.getServices().subscribe(i=>this._servicesService.servicesSig.set(i)),this._servicesService.getServicesCategory().subscribe(i=>this._servicesService.servicesCategorySig.set(i))}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=T({type:e,selectors:[["app-services-admin"]],standalone:!0,features:[k],decls:22,vars:3,consts:[["nz-button","","nzType","primary",3,"click"],["nzBordered","",3,"nzData"],["editRowTable",""],["class","editable-row",3,"click",4,"ngFor","ngForOf"],["nz-button","","nzType","primary",3,"hidden","click"],[1,"editable-row",3,"click"],[1,"editable-cell",3,"hidden"],["type","text","nz-input","",3,"hidden","ngModel","ngModelChange"],[3,"ngModel","hidden","ngModelChange"],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],["type","number","nz-input","",3,"hidden","ngModel","ngModelChange"],["nz-input","","placeholder","data.description",3,"hidden","ngModel","nzAutosize","ngModelChange"],["nz-popconfirm","","nzPopconfirmTitle","\u0412\u043F\u0435\u0432\u043D\u0435\u043D\u0456 \u0449\u043E \u043F\u043E\u0442\u0440\u0456\u0431\u043D\u043E \u0432\u0438\u0434\u0430\u043B\u0438\u0442\u0438?",3,"nzOnConfirm"],[3,"nzValue","nzLabel"]],template:function(r,o){if(r&1){let s=re();u(0,"h2"),g(1,"\u041F\u043E\u0441\u043B\u0443\u0433\u0438"),p(),u(2,"button",0),E("click",function(){return o.addRow()}),g(3,"Add"),p(),u(4,"nz-table",1,2)(6,"thead")(7,"tr")(8,"th"),g(9,"\u041D\u0430\u0437\u0432\u0430 \u043F\u043E\u0441\u043B\u0443\u0433\u0438"),p(),u(10,"th"),g(11,"\u041A\u0430\u0442\u0435\u0433\u043E\u0440\u0456\u044F"),p(),u(12,"th"),g(13,"\u0426\u0456\u043D\u0430"),p(),u(14,"th"),g(15,"\u041E\u043F\u0438\u0441"),p(),u(16,"th"),g(17,"Action"),p()()(),u(18,"tbody"),I(19,Og,21,19,"tr",3),u(20,"button",4),E("click",function(){A(s);let l=G(5);return x(o.stopEdit(l.data))}),g(21," \u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C "),p()()()}if(r&2){let s=G(5);h(4),_("nzData",o._servicesService.servicesSig()),h(15),_("ngForOf",s.data),h(1),_("hidden",o.editService==null)}},dependencies:[$,Ce,U,le,q,ae,Me,Pr,qn,Hn,Gn,Qn,Zn,Yn,ei,Xn,Jn,O,ke,Au,fe,lt,Nu],styles:[".editable-cell[_ngcontent-%COMP%]{position:relative;padding:5px 12px;cursor:pointer}.editable-row[_ngcontent-%COMP%]:hover   .editable-cell[_ngcontent-%COMP%]{border:1px solid #d9d9d9;border-radius:4px;padding:4px 11px}"]});let t=e;return t})();function Fg(t,e){if(t&1){let n=re();u(0,"tr",5),E("click",function(){let o=A(n).$implicit,s=M();return x(s.startEdit(o))}),u(1,"td")(2,"div",6),g(3),p(),u(4,"input",7),E("ngModelChange",function(r){let s=A(n).$implicit;return x(s.title=r)}),p()(),u(5,"td")(6,"a",8),E("nzOnConfirm",function(){let o=A(n).$implicit,s=M(),a=G(5);return x(s.deleteRow(o.id,a.data))}),g(7,"Delete"),p()()()}if(t&2){let n=e.$implicit,i=M();h(2),_("hidden",i.editCategory===n),h(1),oe(" ",n.title," "),h(1),_("hidden",i.editCategory!==n)("ngModel",n.title)}}var th=(()=>{let e=class e{constructor(){this._servicesService=b(Ft),this.editCategory=null}startEdit(i){this.editCategory=i}stopEdit(i){this.editCategory=null,this._servicesService.updateServicesCategory(this.editCategory),i.forEach(r=>this._servicesService.updateServicesCategory(r))}addRow(){this._servicesService.addServicesCategory({title:""})}deleteRow(i,r){this._servicesService.deleteServicesCategory(i),this.stopEdit(r),this._servicesService.deleteServicesCategory(i)}ngOnInit(){this._servicesService.getServicesCategory().subscribe(i=>this._servicesService.servicesCategorySig.set(i))}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=T({type:e,selectors:[["app-category-admin"]],standalone:!0,features:[k],decls:16,vars:3,consts:[["nz-button","","nzType","primary",3,"click"],["nzBordered","",3,"nzData"],["editRowTable",""],["class","editable-row",3,"click",4,"ngFor","ngForOf"],["nz-button","","nzType","primary",3,"hidden","click"],[1,"editable-row",3,"click"],[1,"editable-cell",3,"hidden"],["type","text","nz-input","",3,"hidden","ngModel","ngModelChange"],["nz-popconfirm","","nzPopconfirmTitle","\u0412\u043F\u0435\u0432\u043D\u0435\u043D\u0456 \u0449\u043E \u043F\u043E\u0442\u0440\u0456\u0431\u043D\u043E \u0432\u0438\u0434\u0430\u043B\u0438\u0442\u0438?",3,"nzOnConfirm"]],template:function(r,o){if(r&1){let s=re();u(0,"h2"),g(1,"\u041A\u0430\u0442\u0435\u0433\u043E\u0440\u0456\u0457 \u043F\u043E\u0441\u043B\u0443\u0433"),p(),u(2,"button",0),E("click",function(){return o.addRow()}),g(3,"Add"),p(),u(4,"nz-table",1,2)(6,"thead")(7,"tr")(8,"th"),g(9,"\u041D\u0430\u0437\u0432\u0430 \u043A\u0430\u0442\u0435\u0433\u043E\u0440\u0456\u0457"),p(),u(10,"th"),g(11,"Action"),p()()(),u(12,"tbody"),I(13,Fg,8,4,"tr",3),u(14,"button",4),E("click",function(){A(s);let l=G(5);return x(o.stopEdit(l.data))}),g(15," \u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C "),p()()()}if(r&2){let s=G(5);h(4),_("nzData",o._servicesService.servicesCategorySig()),h(9),_("ngForOf",s.data),h(1),_("hidden",o.editCategory==null)}},dependencies:[$,Ce,U,le,q,ae,Me,qn,Qn,Zn,Yn,ei,Xn,Jn,O,ke,fe,lt]});let t=e;return t})();var nh=(()=>{let e=class e{constructor(i){this.firestore=i,this.contactsSource=new Er(null),this.contacts$=this.contactsSource.asObservable()}addContacts(i){let r=Pi(this.firestore,"contacts");return Id(r,i)}getContacts(i=""){let r=Pi(this.firestore,"contacts"),o=ro(r,oo("id","==",1));return Sd(o)}updateContacts(i){return S(this,null,function*(){console.log(i);let r=Pi(this.firestore,"contacts"),o=ro(r,oo("id","==",1));(yield Ls(o)).forEach(a=>S(this,null,function*(){let l=Us(this.firestore,"contacts",a.id);yield Md(l,Ie({},i))}))})}deleteContacts(i){return S(this,null,function*(){let r=Pi(this.firestore,"contacts"),o=ro(r,oo("id","==",i));(yield Ls(o)).forEach(a=>S(this,null,function*(){let l=Us(this.firestore,"contacts",a.id);Td(l)}))})}};e.\u0275fac=function(r){return new(r||e)(N(wd))},e.\u0275prov=je({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Lg=["contactForm"];function Ug(t,e){if(t&1){let n=re();u(0,"form",2,3),E("ngSubmit",function(){A(n);let r=M(2);return x(r.submitForm())}),u(2,"div",4)(3,"nz-form-item",5)(4,"nz-form-label",6),g(5,"Telegram"),p(),u(6,"input",7),E("ngModelChange",function(r){A(n);let o=M(2);return x(o.contact.telegram=r)}),p()(),u(7,"nz-form-item",5)(8,"nz-form-label",8),g(9,"Instagram"),p(),u(10,"input",9),E("ngModelChange",function(r){A(n);let o=M(2);return x(o.contact.instagram=r)}),p()(),u(11,"nz-form-item",10)(12,"nz-form-label",11),g(13,"Facebook"),p(),u(14,"input",12),E("ngModelChange",function(r){A(n);let o=M(2);return x(o.contact.facebook=r)}),p()(),u(15,"nz-form-item",10)(16,"nz-form-label",13),g(17,"\u041D\u043E\u043C\u0435\u0440 \u0442\u0435\u043B\u0435\u0444\u043E\u043D\u0443"),p(),u(18,"input",14),E("ngModelChange",function(r){A(n);let o=M(2);return x(o.contact.phone=r)}),p()(),u(19,"nz-form-item",10)(20,"nz-form-label",15),g(21,"\u0410\u0434\u0440\u0435\u0441\u0430"),p(),u(22,"input",16),E("ngModelChange",function(r){A(n);let o=M(2);return x(o.contact.location=r)}),p()(),u(23,"nz-form-item",10)(24,"nz-form-label",17),g(25,"\u0413\u0440\u0430\u0444\u0456\u043A \u0440\u043E\u0431\u043E\u0442\u0438"),p(),u(26,"input",18),E("ngModelChange",function(r){A(n);let o=M(2);return x(o.contact.workDay=r)}),p()(),u(27,"nz-form-item",19)(28,"button",20),g(29,"\u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438"),p()()()()}if(t&2){let n=M(2);h(4),_("nzSpan",20),h(2),_("ngModel",n.contact.telegram),h(2),_("nzSpan",20),h(2),_("ngModel",n.contact.instagram),h(2),_("nzSpan",20),h(2),_("ngModel",n.contact.facebook),h(2),_("nzSpan",20),h(2),_("ngModel",n.contact.phone),h(2),_("nzSpan",20),h(2),_("ngModel",n.contact.location),h(2),_("nzSpan",20),h(2),_("ngModel",n.contact.workDay),h(1),_("nzSpan",20)}}function Bg(t,e){if(t&1&&(u(0,"section")(1,"h2"),g(2,"\u041A\u043E\u043D\u0442\u0430\u043A\u0442\u0438"),p(),I(3,Ug,30,13,"form",1),p()),t&2){let n=e.ngIf;h(3),_("ngForOf",n)}}var ih=(()=>{let e=class e{constructor(){this._contactsService=b(nh)}ngOnInit(){this.getContacts()}submitForm(){this._contactsService.updateContacts(this.contact)}getContacts(){this.contacts$=this._contactsService.getContacts(),this._contactsService.getContacts().forEach(i=>i.find(r=>{(r.id=1)&&(this.contact=r)}))}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=T({type:e,selectors:[["app-kadernictvi-admin"]],viewQuery:function(r,o){if(r&1&&du(Lg,5),r&2){let s;Ms(s=zs())&&(o.contactForm=s.first)}},standalone:!0,features:[k],decls:2,vars:3,consts:[[4,"ngIf"],["nz-form","",3,"ngSubmit",4,"ngFor","ngForOf"],["nz-form","",3,"ngSubmit"],["contactForm",""],["nz-row","","nzJustify","space-between"],["nz-row",""],["nzLabelAlign","left","for","telegram",3,"nzSpan"],["nz-input","","id","telegram","name","telegram",3,"ngModel","ngModelChange"],["nzLabelAlign","left","for","instagram",3,"nzSpan"],["nz-input","","id","instagram","name","instagram",3,"ngModel","ngModelChange"],["nz-col",""],["nzLabelAlign","left","for","facebook",3,"nzSpan"],["nz-input","","id","facebook","name","facebook",3,"ngModel","ngModelChange"],["nzLabelAlign","left","for","phone",3,"nzSpan"],["nz-input","","id","phone","name","phone",3,"ngModel","ngModelChange"],["nzLabelAlign","left","for","location",3,"nzSpan"],["nz-input","","id","location","name","location",3,"ngModel","ngModelChange"],["nzLabelAlign","left","for","workDay",3,"nzSpan"],["nz-input","","id","workDay","name","workDay",3,"ngModel","ngModelChange"],["nz-col","",1,"register-area",3,"nzSpan"],["nz-button","","nzType","primary"]],template:function(r,o){r&1&&(I(0,Bg,4,1,"section",0),ot(1,"async")),r&2&&_("ngIf",It(1,1,o.contacts$))},dependencies:[$,Ce,st,Bn,U,le,q,ae,te,ee,zt,Mt,$r,Me,O,kt,ke,fe,Tt,lt,zu]});let t=e;return t})();function Vg(t,e){if(t&1&&(u(0,"li")(1,"nz-badge",5),g(2),ot(3,"date"),p()()),t&2){let n=e.$implicit,i=M(4),r;h(1),_("nzStatus",i.getTimelineColor(n)),h(1),cu("",uu(3,3,n.date,"H:mm")," - ",(r=i.getBarber(n.barber))==null?null:r.name,"")}}function jg(t,e){if(t&1&&(Ts(0),I(1,Vg,4,6,"li",4),ks()),t&2){let n=M(2).$implicit,i=M();h(1),_("ngForOf",i.listDataEvent(n))}}function $g(t,e){if(t&1&&I(0,jg,2,1,"ng-container",3),t&2){let n=e.$implicit;_("ngSwitchCase",n)}}function Wg(t,e){if(t&1){let n=re();u(0,"ul",1),E("click",function(){let o=A(n).$implicit,s=M();return x(s.showModal(o))}),Ts(1,2),nt(2,$g,1,1,"ng-container",null,Ln),ks(),p()}if(t&2){let n=e.$implicit,i=M();h(1),_("ngSwitch",n.getDate()),h(1),it(i.days)}}var _o=(()=>{let e=class e{constructor(i,r,o){this.i18n=i,this.modal=r,this.viewContainerRef=o,this.calendarEvents=[],this.barbers=[],this.isVisible=!1,this.isOkLoading=!1,this.days=[],this._datepickerService=b(un),this._barberService=b(ii)}ngOnInit(){this._barberService.getBarbers().forEach(i=>this.barbers=[...i]),this.i18n.setLocale(Bu),this._datepickerService.getCalendarEvents().subscribe(i=>{this.getDaysOfEvents(),this._datepickerService.calendarEventsSig.set(i)})}getBarber(i){return this.barbers.find(r=>r.id==i)}getMonthData(i){return i.getMonth()===8?1394:null}getDaysOfEvents(){let i=[];this._datepickerService.calendarEventsSig().forEach(r=>{i.push(new Date(r.date).getDate()),console.log(r.date)}),this.days=i.filter((r,o)=>i.indexOf(r)===o)}listDataEvent(i){let r=this._datepickerService.calendarEventsSig();return r=r.filter(o=>new Date(o.date).getDate()==new Date(i).getDate()),r}showModal(i){let r=this.listDataEvent(i);this.createComponentModal(r,i),this.isVisible=!0}createComponentModal(i,r){let o=Ur(r,"EEEE, d MMMM",{locale:Ad}),s=this.modal.create({nzTitle:o,nzContent:xd,nzViewContainerRef:this.viewContainerRef,nzData:{list:i,day:r},nzOnOk:()=>new Promise(l=>setTimeout(l,1e3))}),a=s.getContentComponent();s.afterOpen.subscribe(()=>console.log("[afterOpen] emitted!")),s.afterClose.subscribe(l=>console.log("[afterClose] The result is:",l)),setTimeout(()=>{a.subtitle="sub title is changed"},2e3)}getTimelineColor(i){return i.date.seconds-Date.parse(new Date().toString())/1e3<0?"error":"success"}};e.\u0275fac=function(r){return new(r||e)(Y(Br),Y(Ku),Y(su))},e.\u0275cmp=T({type:e,selectors:[["app-dashboard"]],standalone:!0,features:[k],decls:2,vars:0,consts:[["class","events",3,"click",4,"nzDateCell"],[1,"events",3,"click"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngFor","ngForOf"],[3,"nzStatus"]],template:function(r,o){r&1&&(u(0,"nz-calendar"),I(1,Wg,4,1,"ul",0),p())},dependencies:[$,Ce,pu,mu,fu,U,Du,Vr,Vu,O],styles:[".events[_ngcontent-%COMP%]{list-style:none;margin:0;padding:0;width:100%;height:100%}.events[_ngcontent-%COMP%]   .ant-badge-status[_ngcontent-%COMP%]{overflow:hidden;white-space:nowrap;width:100%;text-overflow:ellipsis;font-size:12px}.notes-month[_ngcontent-%COMP%]{text-align:center;font-size:28px}.notes-month[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]{font-size:28px}"]});let t=e;return t})();function Kg(t,e){t&1&&C(0,"app-dashboard")}var oh=(()=>{let e=class e{constructor(i,r,o){this.route=i,this.router=r,this.auth=o,this.hide=!0,this.admin=!1}ngOnInit(){}};e.\u0275fac=function(r){return new(r||e)(Y(Ar),Y(se),Y(we))},e.\u0275cmp=T({type:e,selectors:[["app-admin"]],standalone:!0,features:[k],decls:37,vars:2,consts:[[1,"layout"],["nzCollapsible","","nzBreakpoint","lg",3,"nzCollapsedWidth"],[1,"logo"],["href","http://localhost:4200/"],["nz-menu","","nzTheme","dark","nzMode","inline",1,"sider-menu"],["nz-submenu","","nzOpen","","nzIcon","user","nzTitle","Dashboard"],["nz-menu-item","","routerLink","dashboard"],["nz-icon","","nzType","file"],["nz-submenu","","nzOpen","","nzIcon","user","nzTitle","\u041D\u0430\u0441\u0442\u0440\u043E\u0439\u043A\u0438"],["nz-menu-item","","routerLink","category"],["nz-menu-item","","routerLink","services"],["nz-icon","","nzType","video-camera"],["nz-menu-item","","routerLink","kadernictvi"],["nz-icon","","nzType","upload"],["nz-menu-item","","routerLink","barbers"],["nz-icon","","nzType","bar-chart"],[1,"right-layout"],[1,"inner-content"],[4,"ngIf"]],template:function(r,o){r&1&&(u(0,"nz-layout",0)(1,"nz-sider",1)(2,"div",2)(3,"a",3),g(4,"\u041D\u0430 \u0433\u043E\u043B\u043E\u0432\u043D\u0443"),p()(),u(5,"ul",4)(6,"li",5)(7,"ul")(8,"li",6),C(9,"span",7),u(10,"span"),g(11,"Calendar"),p()()()(),u(12,"li",8)(13,"ul")(14,"li",9),C(15,"span",7),u(16,"span"),g(17,"\u041A\u0430\u0442\u0435\u0433\u043E\u0440\u0456\u0457 \u043F\u043E\u0441\u043B\u0443\u0433"),p()(),u(18,"li",10),C(19,"span",11),u(20,"span"),g(21,"\u041F\u043E\u0441\u043B\u0443\u0433\u0438"),p()(),u(22,"li",12),C(23,"span",13),u(24,"span"),g(25,"\u041A\u043E\u043D\u0442\u0430\u043A\u0442\u0438"),p()(),u(26,"li",14),C(27,"span",15),u(28,"span"),g(29,"\u0411\u0430\u0440\u0431\u0435\u0440\u0438"),p()()()()()(),u(30,"nz-layout",16)(31,"nz-content")(32,"div",17),I(33,Kg,1,0,"app-dashboard",18),C(34,"router-outlet"),p()(),u(35,"nz-footer"),g(36,"Ant Design \xA92020 Implement By Angular"),p()()()),r&2&&(h(1),_("nzCollapsedWidth",0),h(32),_("ngIf",o.hide))},dependencies:[U,q,Wn,$n,Ru,Rr,Gr,Wr,Hr,Hu,$,st,O,_o,Dr,xr,at,$u],styles:[".logo[_ngcontent-%COMP%]{height:32px;background:#fff3;margin:16px}.layout[_ngcontent-%COMP%]{min-height:100vh}nz-header[_ngcontent-%COMP%]{background:#fff;padding:0}nz-content[_ngcontent-%COMP%]{margin:24px 16px 0;overflow:initial}.inner-content[_ngcontent-%COMP%]{padding:24px;background:#fff}nz-footer[_ngcontent-%COMP%]{text-align:center}"]});let t=e;return t})();var qg=()=>({minRows:2,maxRows:20});function Zg(t,e){if(t&1){let n=re();u(0,"tr",5)(1,"td")(2,"div",6),E("click",function(){let o=A(n).$implicit,s=M(2);return x(s.startEdit(o))}),g(3),p(),u(4,"input",7),E("ngModelChange",function(r){let s=A(n).$implicit;return x(s.name=r)})("blur",function(){A(n);let r=M(2);return x(r.stopEdit())}),p()(),u(5,"td")(6,"div",6),E("click",function(){let o=A(n).$implicit,s=M(2);return x(s.startEdit(o))}),g(7),p(),u(8,"input",7),E("ngModelChange",function(r){let s=A(n).$implicit;return x(s.avatar=r)})("blur",function(){A(n);let r=M(2);return x(r.stopEdit())}),p()(),u(9,"td")(10,"div",8),E("click",function(){let o=A(n).$implicit,s=M(2);return x(s.startEdit(o))}),g(11),p(),u(12,"textarea",9),E("ngModelChange",function(r){let s=A(n).$implicit;return x(s.description=r)})("blur",function(){A(n);let r=M(2);return x(r.stopEdit())}),p()(),u(13,"td")(14,"a",10),E("nzOnConfirm",function(){let o=A(n).$implicit,s=M(2);return x(s.deleteRow(o.id))}),g(15,"Delete"),p()()()}if(t&2){let n=e.$implicit,i=M(2);h(2),_("hidden",i.editId===n.id),h(1),oe(" ",n.name," "),h(1),_("hidden",i.editId!==n.id)("ngModel",n.name),h(2),_("hidden",i.editId===n.id),h(1),oe(" ",n.avatar," "),h(1),_("hidden",i.editId!==n.id)("ngModel",n.avatar),h(2),_("hidden",i.editId===n.id),h(1),oe(" ",n.description," "),h(1),_("hidden",i.editId!==n.id)("ngModel",n.description)("nzAutosize",Un(13,qg))}}function Yg(t,e){if(t&1){let n=re();u(0,"section")(1,"h2"),g(2,"\u041F\u043E\u0441\u043B\u0443\u0433\u0438"),p(),u(3,"button",1),E("click",function(){A(n);let r=M();return x(r.addRow())}),g(4,"Add"),p(),u(5,"nz-table",2,3)(7,"thead")(8,"tr")(9,"th"),g(10,"\u0424\u0406\u041E"),p(),u(11,"th"),g(12,"\u0410\u0432\u0430\u0442\u0430\u0440"),p(),u(13,"th"),g(14,"\u041F\u0440\u043E \u0441\u0435\u0431\u0435"),p()()(),u(15,"tbody"),I(16,Zg,16,14,"tr",4),p()()()}if(t&2){let n=e.ngIf,i=G(6);h(5),_("nzData",n),h(11),_("ngForOf",i.data)}}var sh=(()=>{let e=class e{constructor(){this._barbersService=b(ii),this.i=0,this.editId=null,this.editService=null,this.listOfData=[]}startEdit(i){this.editId=i.id,this.editService=i}stopEdit(){this.editId=null,this._barbersService.updateBarbers(this.editService)}getCategoryTitle(i){return this.barberss.find(o=>o.id==i)}addRow(){this._barbersService.addBarbers({id:new Date().getMilliseconds().toString(),name:"----",avatar:"-----",description:""}),this.i++}deleteRow(i){this._barbersService.deleteBarbers(i)}ngOnInit(){this.barbers$=this._barbersService.getBarbers(),this._barbersService.getBarbers().forEach(i=>this.barberss=[...i])}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=T({type:e,selectors:[["app-barbers-admin"]],standalone:!0,features:[k],decls:2,vars:3,consts:[[4,"ngIf"],["nz-button","","nzType","primary",3,"click"],["nzBordered","",3,"nzData"],["editRowTable",""],["class","editable-row",4,"ngFor","ngForOf"],[1,"editable-row"],[1,"editable-cell",3,"hidden","click"],["type","text","nz-input","",3,"hidden","ngModel","ngModelChange","blur"],["cl","",1,"editable-cell",3,"hidden","click"],["nz-input","","placeholder","data.description",3,"hidden","ngModel","nzAutosize","ngModelChange","blur"],["nz-popconfirm","","nzPopconfirmTitle","\u0412\u043F\u0435\u0432\u043D\u0435\u043D\u0456 \u0449\u043E \u043F\u043E\u0442\u0440\u0456\u0431\u043D\u043E \u0432\u0438\u0434\u0430\u043B\u0438\u0442\u0438?",3,"nzOnConfirm"]],template:function(r,o){r&1&&(I(0,Yg,17,2,"section",0),ot(1,"async")),r&2&&_("ngIf",It(1,1,o.barbers$))},dependencies:[$,Ce,st,Bn,U,le,q,ae,Me,Pr,qn,Qn,Zn,Yn,ei,Xn,Jn,O,ke,fe,lt]});let t=e;return t})();var dn=(()=>{let e=class e{constructor(){this.firebaseAuth=b(no),this.auth=b(we),this.storage=b(He),this.calendarEvent=b(cn),this.sms=b(zd),this.router=b(se),this.currentUserSi=Tr(void 0)}login(i,r){let o=fd(this.firebaseAuth,i,r).then(s=>{this.storage.saveUser({uid:s.user.uid,username:s.user.displayName,email:s.user.email}),this.sms.createNotification("success","\u0423\u0441\u043F\u0456\u0448\u043D\u043E!","\u0422\u0435\u043F\u0435\u0440 \u0432\u0438 \u043C\u043E\u0436\u0435\u0442\u0435 \u043F\u0435\u0440\u0435\u0433\u043B\u044F\u043D\u0443\u0442\u0438 \u0432\u0430\u0448\u0456 \u0431\u0440\u043E\u043D\u044E\u0432\u0430\u043D\u043D\u044F \u0432 \u043F\u0440\u043E\u0444\u0456\u043B\u0456!"),setTimeout(()=>{this.router.navigate(["home"])},1e3)}).catch(s=>{console.log(s.code,s.message),alert(s.message),setTimeout(()=>{window.location.reload()},5e3)});return Jt(o)}register(i,r,o){let s=md(this.firebaseAuth,r,o).then(a=>{Os(a.user,{displayName:i}),this.storage.saveUser({uid:a.user.uid,username:i,email:a.user.email})}).catch(a=>{console.log(a.code,a.message),alert(a.message),setTimeout(()=>{window.location.reload()},5e3)});return Jt(s)}signInWithGoogle(){let i=new hd;i.addScope("email"),vd(this.firebaseAuth,i).then(r=>{let o=r.user;this.auth.fetchAuth(),console.log(this.auth.$user()),this.sms.createNotification("success","\u0423\u0441\u043F\u0456\u0448\u043D\u043E!","\u0422\u0435\u043F\u0435\u0440 \u0432\u0438 \u043C\u043E\u0436\u0435\u0442\u0435 \u043F\u0435\u0440\u0435\u0433\u043B\u044F\u043D\u0443\u0442\u0438 \u0432\u0430\u0448\u0456 \u0431\u0440\u043E\u043D\u044E\u0432\u0430\u043D\u043D\u044F \u0432 \u043F\u0440\u043E\u0444\u0456\u043B\u0456!"),this.calendarEvent.compliteReservace(),this.router.navigate(["home"])}).catch(r=>{console.log(r.code,r.message),alert(r.message),setTimeout(()=>{window.location.reload()},5e3)})}reCaptcha(){return new gd(this.firebaseAuth,"sign-in-button",{size:"invisible"})}signInWithPhone(i,r){let o=_d(this.firebaseAuth,r,i).then(s=>{this.storage.save("verificationId",s.verificationId),console.log(s)}).catch(s=>{console.log(s.code,s.message),alert(s.message),setTimeout(()=>{window.location.reload()},5e3)});return Jt(o)}withCredentional(i,r,o){let s=Fs.credential(i,r);return console.log(s),pd(this.firebaseAuth,s).then(l=>{console.log(l),Os(l.user,{displayName:o.username}),this.storage.saveUser({uid:l.user.uid,username:o.username,phone:o.phone}),this.sms.createNotification("success","\u0423\u0441\u043F\u0456\u0448\u043D\u043E!","\u0422\u0435\u043F\u0435\u0440 \u0432\u0438 \u043C\u043E\u0436\u0435\u0442\u0435 \u043F\u0435\u0440\u0435\u0433\u043B\u044F\u043D\u0443\u0442\u0438 \u0432\u0430\u0448\u0456 \u0431\u0440\u043E\u043D\u044E\u0432\u0430\u043D\u043D\u044F \u0432 \u043F\u0440\u043E\u0444\u0456\u043B\u0456!"),setTimeout(()=>{this.router.navigate(["home"])},1e3)}).catch(l=>{console.log(l.code,l.message),alert(l.message),setTimeout(()=>{window.location.reload()},5e3)})}PhoneVerified(i,r){return new Fs(this.firebaseAuth).verifyPhoneNumber(i,r).then(()=>{}).catch(s=>{console.log(s.code,s.message),alert(s.message),setTimeout(()=>{window.location.reload()},5e3)})}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=je({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var ri=(()=>{let e=class e{constructor(){this.buttons=[],this._signIn=b(dn),this.router=b(se)}ngOnInit(){}currentButton(i){return this.buttons.includes(i)}signInGoogle(){this._signIn.signInWithGoogle()}signInPhone(){this.router.navigate(["phone"])}signInEmail(){this.router.navigate(["login"])}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=T({type:e,selectors:[["button-login"]],inputs:{buttons:"buttons"},standalone:!0,features:[k],decls:10,vars:3,consts:[[1,"login-form"],["nz-button","","nzSize","large","nzShape","round",1,"login-form-button","login-form-margin",3,"hidden","click"],["nz-icon","","nzType","google","nzTheme","outline"],["nz-icon","","nzType","phone","nzTheme","outline"],["nz-icon","","nzType","mail","nzTheme","outline"]],template:function(r,o){r&1&&(u(0,"div",0)(1,"button",1),E("click",function(){return o.signInGoogle()}),C(2,"span",2),g(3," \u0423\u0432\u0456\u0439\u0442\u0438 \u0437 Google Account "),p(),u(4,"button",1),E("click",function(){return o.signInPhone()}),C(5,"span",3),g(6," \u0423\u0432\u0456\u0439\u0442\u0438 \u0437 \u043D\u043E\u043C\u0435\u0440\u043E\u043C \u0442\u0435\u043B\u0435\u0444\u043E\u043D\u0443 "),p(),u(7,"button",1),E("click",function(){return o.signInEmail()}),C(8,"span",4),g(9," \u0423\u0432\u0456\u0439\u0442\u0438 \u0437 \u0435\u043B\u0435\u043A\u0442\u0440\u043E\u043D\u043D\u043E\u044E \u043F\u043E\u0447\u0442\u043E\u044E "),p()()),r&2&&(h(1),_("hidden",!o.currentButton("google")),h(3),_("hidden",!o.currentButton("phone")),h(3),_("hidden",!o.currentButton("email")))},dependencies:[$,U,le,q,ae,Rr],encapsulation:2});let t=e;return t})();function Qg(t,e){t&1&&g(0," The input is not valid E-mail! ")}function Jg(t,e){t&1&&g(0," Please input your E-mail! ")}function e_(t,e){if(t&1&&I(0,Qg,1,0)(1,Jg,1,0),t&2){let n=e.$implicit;K(0,n.errors!=null&&n.errors.email?0:-1),h(1),K(1,n.errors!=null&&n.errors.required?1:-1)}}function t_(t,e){t&1&&g(0," MaxLength is 40 ")}function n_(t,e){t&1&&g(0," MinLength is 6 ")}function i_(t,e){t&1&&g(0," Password is required ")}function r_(t,e){if(t&1&&I(0,t_,1,0)(1,n_,1,0)(2,i_,1,0),t&2){let n=e.$implicit;K(0,n.errors!=null&&n.errors.maxlength?0:-1),h(1),K(1,n.errors!=null&&n.errors.minlength?1:-1),h(1),K(2,n.errors!=null&&n.errors.required?2:-1)}}var ah=(()=>{let e=class e{constructor(i,r){this.fb=i,this.router=r,this._signIn=b(dn),this.buttonsLogin=["google","phone"],this.isLoginFailed=!1,this.errorMessage="",this.validateForm=this.fb.group({email:["",[me.required,me.email]],password:["",me.required],remember:[!1]})}ngOnInit(){}submitForm(){this.validateForm.valid?console.log(this.validateForm.value):Object.values(this.validateForm.controls).forEach(i=>{i.invalid&&(i.markAsDirty(),i.updateValueAndValidity({onlySelf:!0}))})}signInGoogle(){this._signIn.signInWithGoogle()}signInPhone(){this.router.navigate(["phone"])}};e.\u0275fac=function(r){return new(r||e)(Y(rn),Y(se))},e.\u0275cmp=T({type:e,selectors:[["app-login"]],standalone:!0,features:[k],decls:33,vars:7,consts:[["nz-row","","nzJustify","center",1,"row2"],["nz-col","",1,"section-heading",3,"nzSpan"],["nz-col","","nzSpan","20",1,"section-title"],["nz-col","","nzXs","20","nzSm","20","nzMd","10","nzLg","10","nzXl","10"],["nz-form","",1,"login-form",3,"formGroup","ngSubmit"],["nzHasFeedback","",3,"nzErrorTip"],["nzPrefixIcon","user"],["nz-input","","formControlName","email","placeholder","E-mail","id","email","type","email"],["emailErrorTpl",""],["nzPrefixIcon","lock"],["nz-input","","minlength","6","maxlength","12","placeholder","Password","formControlName","password","id","password"],["passwordErrorTpl",""],["nz-row","",1,"login-form-margin"],["nz-col","",3,"nzSpan"],["nz-checkbox","","formControlName","remember"],[1,"login-form-forgot"],["nz-button","","nzType","primary",1,"login-form-button","login-form-margin"],["routerLink","/register"],[3,"buttons"]],template:function(r,o){if(r&1&&(u(0,"div",0)(1,"div",1)(2,"h2",2),g(3,"\u0412\u0445\u0456\u0434"),p()(),u(4,"div",3)(5,"form",4),E("ngSubmit",function(){return o.submitForm()}),u(6,"nz-form-item")(7,"nz-form-control",5)(8,"nz-input-group",6),C(9,"input",7),I(10,e_,2,2,"ng-template",null,8,Te),p()()(),u(12,"nz-form-item")(13,"nz-form-control",5)(14,"nz-input-group",9),C(15,"input",10),I(16,r_,3,3,"ng-template",null,11,Te),p()()(),u(18,"div",12)(19,"div",13)(20,"label",14)(21,"span"),g(22," \u0417\u0430\u043F\u043E\u043C\u043D\u0438\u0442\u0438 \u043C\u0435\u043D\u0435"),p()()(),u(23,"div",13)(24,"a",15),g(25,"\u0417\u0430\u0431\u0443\u0432 \u043F\u0430\u0440\u043E\u043B\u044C?"),p()()(),u(26,"button",16),g(27," \u0423\u0432\u0456\u0439\u0442\u0438 "),p(),g(28," \u0430\u0431\u043E "),u(29,"a",17),g(30,"\u0437\u0430\u0440\u0435\u0454\u0441\u0442\u0440\u0443\u0432\u0430\u0442\u0438\u0441\u044C!"),p()()(),u(31,"div",3),C(32,"button-login",18),p()()),r&2){let s=G(11),a=G(17);h(1),_("nzSpan",20),h(4),_("formGroup",o.validateForm),h(2),_("nzErrorTip",s),h(6),_("nzErrorTip",a),h(6),_("nzSpan",12),h(4),_("nzSpan",12),h(9),_("buttons",o.buttonsLogin)}},dependencies:[O,kt,ke,fe,Tt,Vn,jn,tn,nn,le,q,ae,jr,te,ee,zt,Mt,sn,Me,on,ri,at]});let t=e;return t})();function s_(t,e){t&1&&g(0," The input is not valid firstName! ")}function a_(t,e){t&1&&g(0," Please input your firstName! ")}function l_(t,e){if(t&1&&I(0,s_,1,0)(1,a_,1,0),t&2){let n=e.$implicit;K(0,n.errors!=null&&n.errors.firstName?0:-1),h(1),K(1,n.errors!=null&&n.errors.required?1:-1)}}function c_(t,e){t&1&&g(0," The input is not valid E-mail! ")}function u_(t,e){t&1&&g(0," Please input your E-mail! ")}function d_(t,e){if(t&1&&I(0,c_,1,0)(1,u_,1,0),t&2){let n=e.$implicit;K(0,n.errors!=null&&n.errors.email?0:-1),h(1),K(1,n.errors!=null&&n.errors.required?1:-1)}}function h_(t,e){t&1&&g(0," MaxLength is 40 ")}function p_(t,e){t&1&&g(0," MinLength is 6 ")}function m_(t,e){t&1&&g(0," Password is required ")}function f_(t,e){if(t&1&&I(0,h_,1,0)(1,p_,1,0)(2,m_,1,0),t&2){let n=e.$implicit;K(0,n.errors!=null&&n.errors.maxlength?0:-1),h(1),K(1,n.errors!=null&&n.errors.minlength?1:-1),h(1),K(2,n.errors!=null&&n.errors.required?2:-1)}}var lh=(()=>{let e=class e{constructor(i,r,o,s){this._storage=i,this._datePicker=r,this.fb=o,this.router=s,this.authService=b(we),this.buttonsLogin=["email","google","phone"],this.validateForm=this.fb.group({firstName:["",me.required],email:["",[me.required,me.email]],password:["",me.required]})}submitForm(){this.validateForm.valid?console.log(this.validateForm.value):Object.values(this.validateForm.controls).forEach(i=>{i.invalid&&(i.markAsDirty(),i.updateValueAndValidity({onlySelf:!0}))})}};e.\u0275fac=function(r){return new(r||e)(Y(He),Y(un),Y(rn),Y(se))},e.\u0275cmp=T({type:e,selectors:[["app-register"]],standalone:!0,features:[k],decls:28,vars:6,consts:[["nz-row","","nzJustify","center",1,"row2"],["nz-col","",1,"section-heading",3,"nzSpan"],["nz-col","","nzSpan","20",1,"section-title"],["nz-col","","nzXs","20","nzSm","20","nzMd","10","nzLg","10","nzXl","10"],["nz-form","",1,"login-form",3,"formGroup","ngSubmit"],["nzHasFeedback","",3,"nzErrorTip"],["nzPrefixIcon","user"],["nz-input","","formControlName","firstName","placeholder","\u0412\u0430\u0448\u0435 \u0456\u043C'\u044F","id","firstName","type","firstName"],["firstNameErrorTpl",""],["nzPrefixIcon","mail"],["nz-input","","formControlName","email","placeholder","E-mail","id","email","type","email"],["emailErrorTpl",""],["nzPrefixIcon","lock"],["nz-input","","minlength","6","maxlength","12","placeholder","\u041F\u0430\u0440\u043E\u043B\u044C","formControlName","password","id","password"],["passwordErrorTpl",""],["nz-button","","nzType","primary",1,"login-form-button","login-form-margin"],[3,"buttons"]],template:function(r,o){if(r&1&&(u(0,"div",0)(1,"div",1)(2,"h2",2),g(3,"\u0420\u0435\u0454\u0441\u0442\u0440\u0430\u0446\u0456\u044F"),p()(),u(4,"div",3)(5,"form",4),E("ngSubmit",function(){return o.submitForm()}),u(6,"nz-form-item")(7,"nz-form-control",5)(8,"nz-input-group",6),C(9,"input",7),I(10,l_,2,2,"ng-template",null,8,Te),p()()(),u(12,"nz-form-item")(13,"nz-form-control",5)(14,"nz-input-group",9),C(15,"input",10),I(16,d_,2,2,"ng-template",null,11,Te),p()()(),u(18,"nz-form-item")(19,"nz-form-control",5)(20,"nz-input-group",12),C(21,"input",13),I(22,f_,3,3,"ng-template",null,14,Te),p()()(),u(24,"button",15),g(25," \u0423\u0432\u0456\u0439\u0442\u0438 "),p()()(),u(26,"div",3),C(27,"button-login",16),p()()),r&2){let s=G(11),a=G(17),l=G(23);h(1),_("nzSpan",20),h(4),_("formGroup",o.validateForm),h(2),_("nzErrorTip",s),h(6),_("nzErrorTip",a),h(6),_("nzErrorTip",l),h(8),_("buttons",o.buttonsLogin)}},dependencies:[O,kt,ke,fe,Tt,Vn,jn,tn,nn,le,q,ae,te,ee,zt,Mt,sn,Me,on,ri],styles:["label[_ngcontent-%COMP%]{display:block;margin-top:10px}.card-container.card[_ngcontent-%COMP%]{max-width:400px!important;padding:40px}.card[_ngcontent-%COMP%]{background-color:#f7f7f7;padding:20px 25px 30px;margin:50px auto 25px;-moz-border-radius:2px;-webkit-border-radius:2px;border-radius:2px;-moz-box-shadow:0px 2px 2px rgba(0,0,0,.3);-webkit-box-shadow:0px 2px 2px rgba(0,0,0,.3);box-shadow:0 2px 2px #0000004d}.profile-img-card[_ngcontent-%COMP%]{width:96px;height:96px;margin:0 auto 10px;display:block;-moz-border-radius:50%;-webkit-border-radius:50%;border-radius:50%}"]});let t=e;return t})();var oi=(()=>{let e=class e{constructor(){this.authService=b(we),this.router=b(se),this.localStorage=b(He)}canActivate(i,r){return!0}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=je({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function g_(t,e){t&1&&g(0," The input is not valid E-mail! ")}function __(t,e){t&1&&g(0," Please input your E-mail! ")}function v_(t,e){if(t&1&&I(0,g_,1,0)(1,__,1,0),t&2){let n=e.$implicit;K(0,n.errors!=null&&n.errors.email?0:-1),h(1),K(1,n.errors!=null&&n.errors.required?1:-1)}}function y_(t,e){t&1&&g(0," MaxLength is 40 ")}function C_(t,e){t&1&&g(0," MinLength is 6 ")}function b_(t,e){t&1&&g(0," Password is required ")}function w_(t,e){if(t&1&&I(0,y_,1,0)(1,C_,1,0)(2,b_,1,0),t&2){let n=e.$implicit;K(0,n.errors!=null&&n.errors.maxlength?0:-1),h(1),K(1,n.errors!=null&&n.errors.minlength?1:-1),h(1),K(2,n.errors!=null&&n.errors.required?2:-1)}}var ch=(()=>{let e=class e{constructor(i,r){this.storage=i,this.fb=r,this.authService=b(we),this.router=b(se),this.currentUser$=en(()=>this.authService.$user()),this.validateForm=this.fb.group({email:["",[me.required,me.email]],password:["",me.required],remember:[!1]})}ngOnInit(){}submitForm(){this.validateForm.valid?console.log(this.validateForm.value):Object.values(this.validateForm.controls).forEach(i=>{i.invalid&&(i.markAsDirty(),i.updateValueAndValidity({onlySelf:!0}))})}};e.\u0275fac=function(r){return new(r||e)(Y(He),Y(rn))},e.\u0275cmp=T({type:e,selectors:[["edit-user-app"]],standalone:!0,features:[k],decls:31,vars:7,consts:[["nz-row","","nzJustify","center",1,"row2"],["nz-col","",1,"section-heading",3,"nzSpan"],["nz-col","","nzSpan","20",1,"section-title"],["nz-col","",1,"big-padding-bottom","big-padding-top",3,"nzSpan"],["nz-form","",1,"login-form",3,"formGroup","ngSubmit"],["nzHasFeedback","",3,"nzErrorTip"],["nzPrefixIcon","user"],["nz-input","","formControlName","email","placeholder","E-mail","id","email","type","email"],["emailErrorTpl",""],["nz-input","","minlength","6","maxlength","40","placeholder","Password","formControlName","password","id","password"],["passwordErrorTpl",""],["nz-row","",1,"login-form-margin"],["nz-col","",3,"nzSpan"],["nz-checkbox","","formControlName","remember"],[1,"login-form-forgot"],["nz-button","","nzType","primary",1,"login-form-button","login-form-margin"]],template:function(r,o){if(r&1&&(u(0,"div",0)(1,"div",1)(2,"h2",2),g(3,"\u041F\u0440\u043E\u0444\u0456\u043B\u044C"),p()(),u(4,"div",3)(5,"form",4),E("ngSubmit",function(){return o.submitForm()}),u(6,"nz-form-item")(7,"nz-form-control",5)(8,"nz-input-group",6),C(9,"input",7),I(10,v_,2,2,"ng-template",null,8,Te),p()()(),u(12,"nz-form-item")(13,"nz-form-control",5)(14,"nz-input-group",6),C(15,"input",9),I(16,w_,3,3,"ng-template",null,10,Te),p()()(),u(18,"div",11)(19,"div",12)(20,"label",13)(21,"span"),g(22,"Remember me"),p()()(),u(23,"div",12)(24,"a",14),g(25,"Forgot password"),p()()(),u(26,"button",15),g(27," \u041F\u0440\u043E\u0434\u043E\u0432\u0436\u0438\u0442\u0438 "),p(),g(28," Or "),u(29,"a"),g(30,"register now!"),p()()()()),r&2){let s=G(11),a=G(17);h(1),_("nzSpan",20),h(3),_("nzSpan",12),h(1),_("formGroup",o.validateForm),h(2),_("nzErrorTip",s),h(6),_("nzErrorTip",a),h(6),_("nzSpan",12),h(4),_("nzSpan",12)}},dependencies:[$,U,le,q,ae,jr,te,ee,zt,Mt,sn,Me,on,O,kt,ke,fe,Tt,Vn,jn,tn,nn],styles:[".login-form[_ngcontent-%COMP%]{max-width:300px}.login-form-margin[_ngcontent-%COMP%]{margin-bottom:16px}.login-form-forgot[_ngcontent-%COMP%]{float:right}.login-form-button[_ngcontent-%COMP%]{width:100%}"]});let t=e;return t})();function E_(t,e){t&1&&(u(0,"nz-select",20),C(1,"nz-option",21)(2,"nz-option",22),p())}function S_(t,e){t&1&&g(0," Use correct phone number use numbers [0-9] ")}function I_(t,e){if(t&1&&I(0,S_,1,0),t&2){let n=e.$implicit;K(0,n.errors!=null&&n.errors.pattern?0:-1)}}var uh=(()=>{let e=class e{ngOnInit(){}getOTP(){this.applicationVerifier=this._signIn.reCaptcha(),console.log(this.applicationVerifier),this.isLoading=!0,this.newUser={phone:this.validateForm.value.phoneNumberPrefix+this.validateForm.value.phoneNumber,username:this.validateForm.value.name},this._signIn.signInWithPhone(this.applicationVerifier,this.newUser.phone).subscribe(i=>{this.verificationId=this._storage.get("verificationId"),this.confirmationResult=i,this.isLoading=!1,this.hideFirstStep=!0})}constructor(i){this.fb=i,this._signIn=b(dn),this._storage=b(He),this._router=b(se),this._datePicker=b(un),this.isLoading=!1,this.hideFirstStep=!1,this.buttonsLogin=["google","email"],this.newUser={},this.validateForm=this.fb.group({name:["",me.required],phoneNumber:["",[me.required,me.minLength(6),me.maxLength(12),me.pattern("[0-9]*")]],phoneNumberPrefix:"+420",verificationId:["",me.required]})}submitForm(){if(this.validateForm.valid){let i=this._signIn.withCredentional(this.verificationId,this.validateForm.value.verificationId,this.newUser).then(()=>{this._router.navigate(["home"])});console.log(i)}else Object.values(this.validateForm.controls).forEach(i=>{i.invalid&&(i.markAsDirty(),i.updateValueAndValidity({onlySelf:!0}))})}};e.\u0275fac=function(r){return new(r||e)(Y(rn))},e.\u0275cmp=T({type:e,selectors:[["app-phone"]],standalone:!0,features:[k],decls:32,vars:9,consts:[["nz-row","","nzJustify","space-around","nzAlign","middle",1,"row2"],["nz-col","",1,"section-heading",3,"nzSpan"],["nz-col","","nzSpan","20",1,"section-title"],["nz-col","","nzXs","20","nzSm","20","nzMd","10","nzLg","10","nzXl","10"],["nz-col","","nz-form","",1,"login-form",3,"formGroup","ngSubmit"],["nzErrorTip","\u041D\u0435 \u043C\u043E\u0436\u0435 \u0431\u0443\u0442\u0438 \u043F\u0443\u0441\u0442\u0438\u043C"],["for","name","nzSpan","22"],["nz-input","","formControlName","name","name","name","placeholder","Username","id","name"],["nzHasFeedback","",3,"nzErrorTip"],["nzSpan","22"],[3,"nzAddOnBefore"],["addOnBeforeTemplate",""],["placeholder","000 000 000","formControlName","phoneNumber","id","phoneNumber","nz-input",""],["phoneErrorTpl",""],["nzType","info","nzMessage","\u041D\u0430 \u0432\u0430\u0448 \u043D\u043E\u043C\u0435\u0440 \u043D\u0430\u0434\u0456\u0439\u0434\u0435 \u043A\u043E\u0434 \u0434\u043B\u044F \u043F\u0456\u0434\u0442\u0432\u0435\u0440\u0434\u0436\u0435\u043D\u043D\u044F","nzShowIcon","",3,"hidden"],[3,"hidden"],["nz-input","","formControlName","verificationId","placeholder","Verification code","id","verificationId","type","text"],["nz-button","","nzType","primary",1,"login-form-button",3,"nzLoading","disabled","click"],["id","sign-in-button"],[3,"buttons"],["formControlName","phoneNumberPrefix","name","phoneNumberPrefix",1,"phone-select"],["nzLabel","+420","nzValue","+420"],["nzLabel","+380","nzValue","+380"]],template:function(r,o){if(r&1&&(u(0,"div",0)(1,"div",1)(2,"h2",2),g(3,"\u0412\u0445\u0456\u0434"),p()(),u(4,"div",3)(5,"form",4),E("ngSubmit",function(){return o.submitForm()}),u(6,"nz-form-item")(7,"nz-form-control",5)(8,"nz-form-label",6),g(9,"\u0406\u043C'\u044F"),p(),C(10,"input",7),p()(),u(11,"nz-form-item")(12,"nz-form-control",8)(13,"nz-form-label",9),g(14,"\u0412\u0432\u0435\u0434\u0456\u0442\u044C \u0432\u0430\u0448 \u043D\u043E\u043C\u0435\u0440 \u0442\u0435\u043B\u0435\u0444\u043E\u043D\u0443"),p(),u(15,"nz-input-group",10),I(16,E_,3,0,"ng-template",null,11,Te),C(18,"input",12),I(19,I_,1,1,"ng-template",null,13,Te),p()()(),C(21,"nz-alert",14),u(22,"nz-form-item",15)(23,"nz-form-control")(24,"nz-form-label"),g(25,"\u0412\u0432\u0435\u0434\u0456\u0442\u044C \u043A\u043E\u0434 \u0437 \u0441\u043C\u0441 \u0442\u0443\u0442"),p(),C(26,"input",16),p()(),u(27,"button",17),E("click",function(){return o.hideFirstStep?o.submitForm:o.getOTP()}),g(28," \u041F\u0440\u043E\u0434\u043E\u043B\u0436\u0438\u0442\u044C "),p(),C(29,"div",18),p()(),u(30,"div",3),C(31,"button-login",19),p()()),r&2){let s=G(17),a=G(20);h(1),_("nzSpan",20),h(4),_("formGroup",o.validateForm),h(7),_("nzErrorTip",a),h(3),_("nzAddOnBefore",s),h(6),_("hidden",!o.hideFirstStep),h(1),_("hidden",!o.hideFirstStep),h(5),_("nzLoading",o.isLoading)("disabled",o.validateForm.controls.phoneNumber.status=="INVALID"||(o.validateForm.controls.name.errors==null?null:o.validateForm.controls.name.errors.required)),h(4),_("buttons",o.buttonsLogin)}},dependencies:[O,kt,ke,fe,Tt,tn,nn,Mu,le,q,ae,te,ee,zt,Mt,$r,sn,Me,on,Hn,Gn,ri]});let t=e;return t})();var dh=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=T({type:e,selectors:[["app-success"]],standalone:!0,features:[k],decls:6,vars:0,consts:[["nzStatus","success","nzTitle","Successfully Purchased Cloud Server ECS!","nzSubTitle","Order number: 2017182818828182881 Cloud server configuration takes 1-5 minutes, please wait."],["nz-result-extra",""],["nz-button","","nzType","primary"],["nz-button",""]],template:function(r,o){r&1&&(u(0,"nz-result",0)(1,"div",1)(2,"button",2),g(3,"Go Console"),p(),u(4,"button",3),g(5,"Buy Again"),p()()())},dependencies:[O,le,q,ae,Zu,qu]});let t=e;return t})();var hh=[{title:"Home",path:"home",component:Vs},{title:"About",path:"about",component:co},{title:"Client",path:"clients",component:po},{title:"Reserve",path:"reserve",component:js},{title:"Reserve",path:"reserve/:service",component:js},{title:"Success",path:"success",component:dh},{title:"FireAdmin",path:"admin",loadChildren:()=>import("./chunk-ACDYOICH.js").then(t=>t.FireAdminRoutingModule)},{title:"Feedback",path:"feedback",component:mo},{title:"Gallery",path:"gallery",component:Kd},{title:"Login",path:"login",component:ah,canActivate:[oi],data:{role:"notLoggined"}},{title:"Register",path:"register",component:lh,canActivate:[oi],data:{role:"notLoggined"}},{path:"phone",component:uh,canActivate:[oi],data:{role:"notLoggined"}},{title:"Services",path:"services",component:fo},{title:"Profile",path:"user",component:ch,canActivate:[oi]},{title:"Admin",path:"admin2",component:oh,canActivate:[oi],data:{role:"admin"},children:[{path:"category",component:th},{path:"services",component:eh},{path:"kadernictvi",component:ih},{path:"barbers",component:sh},{path:"dashboard",component:_o}]},{title:"Home",path:"**",component:Vs}];var T_="@",Ws=class{constructor(e,n,i,r,o){this.doc=e,this.delegate=n,this.zone=i,this.animationType=r,this.moduleImpl=o,this._rendererFactoryPromise=null}loadImpl(){return(this.moduleImpl??import("./chunk-F6QMN7EX.js")).catch(n=>{throw new Jc(5300,!1)}).then(({\u0275createEngine:n,\u0275AnimationRendererFactory:i})=>{let r=n(this.animationType,this.doc),o=new i(this.delegate,r,this.zone);return this.delegate=o,o})}createRenderer(e,n){let i=this.delegate.createRenderer(e,n);if(i.\u0275type===0)return i;typeof i.throwOnSyntheticProps=="boolean"&&(i.throwOnSyntheticProps=!1);let r=new Hs(i);return n?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(o=>{let s=o.createRenderer(e,n);r.use(s)}).catch(o=>{r.use(i)}),r}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}},Hs=class{constructor(e){this.delegate=e,this.replay=[],this.\u0275type=1}use(e){if(this.delegate=e,this.replay!==null){for(let n of this.replay)n(e);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(e,n){return this.delegate.createElement(e,n)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}get destroyNode(){return this.delegate.destroyNode}appendChild(e,n){this.delegate.appendChild(e,n)}insertBefore(e,n,i,r){this.delegate.insertBefore(e,n,i,r)}removeChild(e,n,i){this.delegate.removeChild(e,n,i)}selectRootElement(e,n){return this.delegate.selectRootElement(e,n)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,n,i,r){this.delegate.setAttribute(e,n,i,r)}removeAttribute(e,n,i){this.delegate.removeAttribute(e,n,i)}addClass(e,n){this.delegate.addClass(e,n)}removeClass(e,n){this.delegate.removeClass(e,n)}setStyle(e,n,i,r){this.delegate.setStyle(e,n,i,r)}removeStyle(e,n,i){this.delegate.removeStyle(e,n,i)}setProperty(e,n,i){this.shouldReplay(n)&&this.replay.push(r=>r.setProperty(e,n,i)),this.delegate.setProperty(e,n,i)}setValue(e,n){this.delegate.setValue(e,n)}listen(e,n,i){return this.shouldReplay(n)&&this.replay.push(r=>r.listen(e,n,i)),this.delegate.listen(e,n,i)}shouldReplay(e){return this.replay!==null&&e.startsWith(T_)}};function ph(t="animations"){return tu([{provide:ou,useFactory:(e,n,i)=>new Ws(e,n,i,t),deps:[hu,vu,J]},{provide:nu,useValue:t==="noop"?"NoopAnimations":"BrowserAnimations"}])}var vo="analytics",k_="firebase_id",M_="origin",z_=60*1e3,A_="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Qs="https://www.googletagmanager.com/gtag/js";var Oe=new ln("@firebase/analytics");var x_={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},qe=new ni("analytics","Analytics",x_);function N_(t){if(!t.startsWith(Qs)){let e=qe.create("invalid-gtag-resource",{gtagURL:t});return Oe.warn(e.message),""}return t}function Ch(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function D_(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function R_(t,e){let n=D_("firebase-js-sdk-policy",{createScriptURL:N_}),i=document.createElement("script"),r=`${Qs}?l=${t}&id=${e}`;i.src=n?n?.createScriptURL(r):r,i.async=!0,document.head.appendChild(i)}function P_(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}function O_(t,e,n,i,r,o){return S(this,null,function*(){let s=i[r];try{if(s)yield e[s];else{let l=(yield Ch(n)).find(c=>c.measurementId===r);l&&(yield e[l.appId])}}catch(a){Oe.error(a)}t("config",r,o)})}function F_(t,e,n,i,r){return S(this,null,function*(){try{let o=[];if(r&&r.send_to){let s=r.send_to;Array.isArray(s)||(s=[s]);let a=yield Ch(n);for(let l of s){let c=a.find(m=>m.measurementId===l),d=c&&e[c.appId];if(d)o.push(d);else{o=[];break}}}o.length===0&&(o=Object.values(e)),yield Promise.all(o),t("event",i,r||{})}catch(o){Oe.error(o)}})}function L_(t,e,n,i){function r(o,...s){return S(this,null,function*(){try{if(o==="event"){let[a,l]=s;yield F_(t,e,n,a,l)}else if(o==="config"){let[a,l]=s;yield O_(t,e,n,i,a,l)}else if(o==="consent"){let[a]=s;t("consent","update",a)}else if(o==="get"){let[a,l,c]=s;t("get",a,l,c)}else if(o==="set"){let[a]=s;t("set",a)}else t(o,...s)}catch(a){Oe.error(a)}})}return r}function U_(t,e,n,i,r){let o=function(...s){window[i].push(arguments)};return window[r]&&typeof window[r]=="function"&&(o=window[r]),window[r]=L_(o,t,e,n),{gtagCore:o,wrappedGtag:window[r]}}function B_(t){let e=window.document.getElementsByTagName("script");for(let n of Object.values(e))if(n.src&&n.src.includes(Qs)&&n.src.includes(t))return n;return null}var V_=30,j_=1e3,Ks=class{constructor(e={},n=j_){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}},bh=new Ks;function $_(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}function W_(t){return S(this,null,function*(){var e;let{appId:n,apiKey:i}=t,r={method:"GET",headers:$_(i)},o=A_.replace("{app-id}",n),s=yield fetch(o,r);if(s.status!==200&&s.status!==304){let a="";try{let l=yield s.json();!((e=l.error)===null||e===void 0)&&e.message&&(a=l.error.message)}catch{}throw qe.create("config-fetch-failed",{httpStatus:s.status,responseMessage:a})}return s.json()})}function H_(i){return S(this,arguments,function*(t,e=bh,n){let{appId:r,apiKey:o,measurementId:s}=t.options;if(!r)throw qe.create("no-app-id");if(!o){if(s)return{measurementId:s,appId:r};throw qe.create("no-api-key")}let a=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},l=new qs;return setTimeout(()=>S(this,null,function*(){l.abort()}),n!==void 0?n:z_),wh({appId:r,apiKey:o,measurementId:s},a,l,e)})}function wh(o,s,a){return S(this,arguments,function*(t,{throttleEndTimeMillis:e,backoffCount:n},i,r=bh){var l;let{appId:c,measurementId:d}=t;try{yield G_(i,e)}catch(m){if(d)return Oe.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${d} provided in the "measurementId" field in the local Firebase config. [${m?.message}]`),{appId:c,measurementId:d};throw m}try{let m=yield W_(t);return r.deleteThrottleMetadata(c),m}catch(m){let f=m;if(!K_(f)){if(r.deleteThrottleMetadata(c),d)return Oe.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${d} provided in the "measurementId" field in the local Firebase config. [${f?.message}]`),{appId:c,measurementId:d};throw m}let v=Number((l=f?.customData)===null||l===void 0?void 0:l.httpStatus)===503?Xr(n,r.intervalMillis,V_):Xr(n,r.intervalMillis),w={throttleEndTimeMillis:Date.now()+v,backoffCount:n+1};return r.setThrottleMetadata(c,w),Oe.debug(`Calling attemptFetch again in ${v} millis`),wh(t,w,i,r)}})}function G_(t,e){return new Promise((n,i)=>{let r=Math.max(e-Date.now(),0),o=setTimeout(n,r);t.addEventListener(()=>{clearTimeout(o),i(qe.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function K_(t){if(!(t instanceof Ni)||!t.customData)return!1;let e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}var qs=class{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}};var Zs;function q_(t,e,n,i,r){return S(this,null,function*(){if(r&&r.global){t("event",n,i);return}else{let o=yield e,s=Object.assign(Object.assign({},i),{send_to:o});t("event",n,s)}})}function Z_(t,e,n,i){return S(this,null,function*(){if(i&&i.global)return t("set",{user_id:n}),Promise.resolve();{let r=yield e;t("config",r,{update:!0,user_id:n})}})}var Ys;function Y_(t){Ys=t}function X_(t){Zs=t}function Q_(){return S(this,null,function*(){if(Sn())try{yield Ai()}catch(t){return Oe.warn(qe.create("indexeddb-unavailable",{errorInfo:t?.toString()}).message),!1}else return Oe.warn(qe.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0})}function J_(t,e,n,i,r,o,s){return S(this,null,function*(){var a;let l=H_(t);l.then(v=>{n[v.measurementId]=v.appId,t.options.measurementId&&v.measurementId!==t.options.measurementId&&Oe.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${v.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(v=>Oe.error(v)),e.push(l);let c=Q_().then(v=>{if(v)return i.getId()}),[d,m]=yield Promise.all([l,c]);B_(o)||R_(o,d.measurementId),Ys&&(r("consent","default",Ys),Y_(void 0)),r("js",new Date);let f=(a=s?.config)!==null&&a!==void 0?a:{};return f[M_]="firebase",f.update=!0,m!=null&&(f[k_]=m),r("config",d.measurementId,f),Zs&&(r("set",Zs),X_(void 0)),d.measurementId})}var Xs=class{constructor(e){this.app=e}_delete(){return delete si[this.app.options.appId],Promise.resolve()}},si={},mh=[],fh={},Gs="dataLayer",e0="gtag",gh,Js,_h=!1;function t0(){let t=[];if(Ns()&&t.push("This is a browser extension environment."),xi()||t.push("Cookies are not available."),t.length>0){let e=t.map((i,r)=>`(${r+1}) ${i}`).join(" "),n=qe.create("invalid-analytics-context",{errorInfo:e});Oe.warn(n.message)}}function n0(t,e,n){t0();let i=t.options.appId;if(!i)throw qe.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)Oe.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw qe.create("no-api-key");if(si[i]!=null)throw qe.create("already-exists",{id:i});if(!_h){P_(Gs);let{wrappedGtag:o,gtagCore:s}=U_(si,mh,fh,Gs,e0);Js=o,gh=s,_h=!0}return si[i]=J_(t,mh,fh,e,gh,Gs,n),new Xs(t)}function ea(t=Nt()){t=ne(t);let e=mt(t,vo);return e.isInitialized()?e.getImmediate():Eh(t)}function Eh(t,e={}){let n=mt(t,vo);if(n.isInitialized()){let r=n.getImmediate();if(od(e,n.getOptions()))return r;throw qe.create("already-initialized")}return n.initialize({options:e})}function Sh(){return S(this,null,function*(){if(Ns()||!xi()||!Sn())return!1;try{return yield Ai()}catch{return!1}})}function Ih(t,e,n){t=ne(t),Z_(Js,si[t.app.options.appId],e,n).catch(i=>Oe.error(i))}function ta(t,e,n,i){t=ne(t),q_(Js,si[t.app.options.appId],e,n,i).catch(r=>Oe.error(r))}var vh="@firebase/analytics",yh="0.10.2";function i0(){Re(new ve(vo,(e,{options:n})=>{let i=e.getProvider("app").getImmediate(),r=e.getProvider("installations-internal").getImmediate();return n0(i,r,n)},"PUBLIC")),Re(new ve("analytics-internal",t,"PRIVATE")),Z(vh,yh),Z(vh,yh,"esm2017");function t(e){try{let n=e.getProvider(vo).getImmediate();return{logEvent:(i,r,o)=>ta(n,i,r,o)}}catch(n){throw qe.create("interop-component-reg-failed",{reason:n})}}}i0();var Mh="functions";var na=class{constructor(e,n,i){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=n.getImmediate({optional:!0}),this.auth||e.get().then(r=>this.auth=r,()=>{}),this.messaging||n.get().then(r=>this.messaging=r,()=>{}),this.appCheck||i.get().then(r=>this.appCheck=r,()=>{})}getAuthToken(){return S(this,null,function*(){if(this.auth)try{let e=yield this.auth.getToken();return e?.accessToken}catch{return}})}getMessagingToken(){return S(this,null,function*(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return yield this.messaging.getToken()}catch{return}})}getAppCheckToken(e){return S(this,null,function*(){if(this.appCheck){let n=e?yield this.appCheck.getLimitedUseToken():yield this.appCheck.getToken();return n.error?null:n.token}return null})}getContext(e){return S(this,null,function*(){let n=yield this.getAuthToken(),i=yield this.getMessagingToken(),r=yield this.getAppCheckToken(e);return{authToken:n,messagingToken:i,appCheckToken:r}})}};var ia="us-central1";var ra=class{constructor(e,n,i,r,o=ia,s){this.app=e,this.fetchImpl=s,this.emulatorOrigin=null,this.contextProvider=new na(n,i,r),this.cancelAllRequests=new Promise(a=>{this.deleteService=()=>Promise.resolve(a())});try{let a=new URL(o);this.customDomain=a.origin,this.region=ia}catch{this.customDomain=null,this.region=o}}_delete(){return this.deleteService()}_url(e){let n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}};function r0(t,e,n){t.emulatorOrigin=`http://${e}:${n}`}var Th="@firebase/functions",kh="0.11.3";var o0="auth-internal",s0="app-check-internal",a0="messaging-internal";function l0(t,e){let n=(i,{instanceIdentifier:r})=>{let o=i.getProvider("app").getImmediate(),s=i.getProvider(o0),a=i.getProvider(a0),l=i.getProvider(s0);return new ra(o,s,a,l,r,t)};Re(new ve(Mh,n,"PUBLIC").setMultipleInstances(!0)),Z(Th,kh,e),Z(Th,kh,"esm2017")}function zh(t=Nt(),e=ia){let i=mt(ne(t),Mh).getImmediate({identifier:e}),r=zi("functions");return r&&Ah(i,...r),i}function Ah(t,e,n){r0(ne(t),e,n)}l0(fetch.bind(self));var Li=class{constructor(e){return e}},xh="functions",oa=class{constructor(){return Rt(xh)}};var sa=new de("angularfire2.functions-instances");function c0(t,e){let n=Dt(xh,t,e);return n&&new Li(n)}function u0(t){return(e,n)=>{let i=e.runOutsideAngular(()=>t(n));return new Li(i)}}var d0={provide:oa,deps:[[new pe,sa]]},h0={provide:Li,useFactory:c0,deps:[[new pe,sa],Pt]},p0=(()=>{class t{constructor(){Z("angularfire",Pe.full,"fn")}static \u0275fac=function(i){return new(i||t)};static \u0275mod=De({type:t});static \u0275inj=Ne({providers:[h0,d0]})}return t})();function Nh(t,...e){return{ngModule:p0,providers:[{provide:sa,useFactory:u0(t),multi:!0,deps:[J,Ke,We,Ot,[new pe,io],[new pe,Ht],...e]}]}}var Dh=ft(zh,!0);var m0="/firebase-messaging-sw.js",f0="/firebase-cloud-messaging-push-scope",Uh="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",g0="https://fcmregistrations.googleapis.com/v1",Bh="google.c.a.c_id",_0="google.c.a.c_l",v0="google.c.a.ts",y0="google.c.a.e";var yo=function(t){return t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked",t}(yo||{});function qt(t){let e=new Uint8Array(t);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function C0(t){let e="=".repeat((4-t.length%4)%4),n=(t+e).replace(/\-/g,"+").replace(/_/g,"/"),i=atob(n),r=new Uint8Array(i.length);for(let o=0;o<i.length;++o)r[o]=i.charCodeAt(o);return r}var aa="fcm_token_details_db",b0=5,Rh="fcm_token_object_Store";function w0(t){return S(this,null,function*(){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(o=>o.name).includes(aa))return null;let e=null;return(yield Ps(aa,b0,{upgrade:(i,r,o,s)=>S(this,null,function*(){var a;if(r<2||!i.objectStoreNames.contains(Rh))return;let l=s.objectStore(Rh),c=yield l.index("fcmSenderId").get(t);if(yield l.clear(),!!c){if(r===2){let d=c;if(!d.auth||!d.p256dh||!d.endpoint)return;e={token:d.fcmToken,createTime:(a=d.createTime)!==null&&a!==void 0?a:Date.now(),subscriptionOptions:{auth:d.auth,p256dh:d.p256dh,endpoint:d.endpoint,swScope:d.swScope,vapidKey:typeof d.vapidKey=="string"?d.vapidKey:qt(d.vapidKey)}}}else if(r===3){let d=c;e={token:d.fcmToken,createTime:d.createTime,subscriptionOptions:{auth:qt(d.auth),p256dh:qt(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:qt(d.vapidKey)}}}else if(r===4){let d=c;e={token:d.fcmToken,createTime:d.createTime,subscriptionOptions:{auth:qt(d.auth),p256dh:qt(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:qt(d.vapidKey)}}}}})})).close(),yield Jr(aa),yield Jr("fcm_vapid_details_db"),yield Jr("undefined"),E0(e)?e:null})}function E0(t){if(!t||!t.subscriptionOptions)return!1;let{subscriptionOptions:e}=t;return typeof t.createTime=="number"&&t.createTime>0&&typeof t.token=="string"&&t.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}var S0="firebase-messaging-database",I0=1,Tn="firebase-messaging-store",la=null;function da(){return la||(la=Ps(S0,I0,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Tn)}}})),la}function Vh(t){return S(this,null,function*(){let e=pa(t),i=yield(yield da()).transaction(Tn).objectStore(Tn).get(e);if(i)return i;{let r=yield w0(t.appConfig.senderId);if(r)return yield ha(t,r),r}})}function ha(t,e){return S(this,null,function*(){let n=pa(t),r=(yield da()).transaction(Tn,"readwrite");return yield r.objectStore(Tn).put(e,n),yield r.done,e})}function T0(t){return S(this,null,function*(){let e=pa(t),i=(yield da()).transaction(Tn,"readwrite");yield i.objectStore(Tn).delete(e),yield i.done})}function pa({appConfig:t}){return t.appId}var k0={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},Fe=new ni("messaging","Messaging",k0);function M0(t,e){return S(this,null,function*(){let n=yield fa(t),i=$h(e),r={method:"POST",headers:n,body:JSON.stringify(i)},o;try{o=yield(yield fetch(ma(t.appConfig),r)).json()}catch(s){throw Fe.create("token-subscribe-failed",{errorInfo:s?.toString()})}if(o.error){let s=o.error.message;throw Fe.create("token-subscribe-failed",{errorInfo:s})}if(!o.token)throw Fe.create("token-subscribe-no-token");return o.token})}function z0(t,e){return S(this,null,function*(){let n=yield fa(t),i=$h(e.subscriptionOptions),r={method:"PATCH",headers:n,body:JSON.stringify(i)},o;try{o=yield(yield fetch(`${ma(t.appConfig)}/${e.token}`,r)).json()}catch(s){throw Fe.create("token-update-failed",{errorInfo:s?.toString()})}if(o.error){let s=o.error.message;throw Fe.create("token-update-failed",{errorInfo:s})}if(!o.token)throw Fe.create("token-update-no-token");return o.token})}function jh(t,e){return S(this,null,function*(){let i={method:"DELETE",headers:yield fa(t)};try{let o=yield(yield fetch(`${ma(t.appConfig)}/${e}`,i)).json();if(o.error){let s=o.error.message;throw Fe.create("token-unsubscribe-failed",{errorInfo:s})}}catch(r){throw Fe.create("token-unsubscribe-failed",{errorInfo:r?.toString()})}})}function ma({projectId:t}){return`${g0}/projects/${t}/registrations`}function fa(n){return S(this,arguments,function*({appConfig:t,installations:e}){let i=yield e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":`FIS ${i}`})})}function $h({p256dh:t,auth:e,endpoint:n,vapidKey:i}){let r={web:{endpoint:n,auth:e,p256dh:t}};return i!==Uh&&(r.web.applicationPubKey=i),r}var A0=7*24*60*60*1e3;function x0(t){return S(this,null,function*(){let e=yield R0(t.swRegistration,t.vapidKey),n={vapidKey:t.vapidKey,swScope:t.swRegistration.scope,endpoint:e.endpoint,auth:qt(e.getKey("auth")),p256dh:qt(e.getKey("p256dh"))},i=yield Vh(t.firebaseDependencies);if(i){if(P0(i.subscriptionOptions,n))return Date.now()>=i.createTime+A0?D0(t,{token:i.token,createTime:Date.now(),subscriptionOptions:n}):i.token;try{yield jh(t.firebaseDependencies,i.token)}catch(r){console.warn(r)}return Ph(t.firebaseDependencies,n)}else return Ph(t.firebaseDependencies,n)})}function N0(t){return S(this,null,function*(){let e=yield Vh(t.firebaseDependencies);e&&(yield jh(t.firebaseDependencies,e.token),yield T0(t.firebaseDependencies));let n=yield t.swRegistration.pushManager.getSubscription();return n?n.unsubscribe():!0})}function D0(t,e){return S(this,null,function*(){try{let n=yield z0(t.firebaseDependencies,e),i=Object.assign(Object.assign({},e),{token:n,createTime:Date.now()});return yield ha(t.firebaseDependencies,i),n}catch(n){throw yield N0(t),n}})}function Ph(t,e){return S(this,null,function*(){let i={token:yield M0(t,e),createTime:Date.now(),subscriptionOptions:e};return yield ha(t,i),i.token})}function R0(t,e){return S(this,null,function*(){let n=yield t.pushManager.getSubscription();return n||t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:C0(e)})})}function P0(t,e){let n=e.vapidKey===t.vapidKey,i=e.endpoint===t.endpoint,r=e.auth===t.auth,o=e.p256dh===t.p256dh;return n&&i&&r&&o}function Oh(t){let e={from:t.from,collapseKey:t.collapse_key,messageId:t.fcmMessageId};return O0(e,t),F0(e,t),L0(e,t),e}function O0(t,e){if(!e.notification)return;t.notification={};let n=e.notification.title;n&&(t.notification.title=n);let i=e.notification.body;i&&(t.notification.body=i);let r=e.notification.image;r&&(t.notification.image=r);let o=e.notification.icon;o&&(t.notification.icon=o)}function F0(t,e){e.data&&(t.data=e.data)}function L0(t,e){var n,i,r,o,s;if(!e.fcmOptions&&!(!((n=e.notification)===null||n===void 0)&&n.click_action))return;t.fcmOptions={};let a=(r=(i=e.fcmOptions)===null||i===void 0?void 0:i.link)!==null&&r!==void 0?r:(o=e.notification)===null||o===void 0?void 0:o.click_action;a&&(t.fcmOptions.link=a);let l=(s=e.fcmOptions)===null||s===void 0?void 0:s.analytics_label;l&&(t.fcmOptions.analyticsLabel=l)}function U0(t){return typeof t=="object"&&!!t&&Bh in t}Wh("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o");Wh("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");function Wh(t,e){let n=[];for(let i=0;i<t.length;i++)n.push(t.charAt(i)),i<e.length&&n.push(e.charAt(i));return n.join("")}function B0(t){if(!t||!t.options)throw ca("App Configuration Object");if(!t.name)throw ca("App Name");let e=["projectId","apiKey","appId","messagingSenderId"],{options:n}=t;for(let i of e)if(!n[i])throw ca(i);return{appName:t.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}function ca(t){return Fe.create("missing-app-config-values",{valueName:t})}var ua=class{constructor(e,n,i){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;let r=B0(e);this.firebaseDependencies={app:e,appConfig:r,installations:n,analyticsProvider:i}}_delete(){return Promise.resolve()}};function V0(t){return S(this,null,function*(){try{t.swRegistration=yield navigator.serviceWorker.register(m0,{scope:f0}),t.swRegistration.update().catch(()=>{})}catch(e){throw Fe.create("failed-service-worker-registration",{browserErrorMessage:e?.message})}})}function j0(t,e){return S(this,null,function*(){if(!e&&!t.swRegistration&&(yield V0(t)),!(!e&&t.swRegistration)){if(!(e instanceof ServiceWorkerRegistration))throw Fe.create("invalid-sw-registration");t.swRegistration=e}})}function $0(t,e){return S(this,null,function*(){e?t.vapidKey=e:t.vapidKey||(t.vapidKey=Uh)})}function W0(t,e){return S(this,null,function*(){if(!navigator)throw Fe.create("only-available-in-window");if(Notification.permission==="default"&&(yield Notification.requestPermission()),Notification.permission!=="granted")throw Fe.create("permission-blocked");return yield $0(t,e?.vapidKey),yield j0(t,e?.serviceWorkerRegistration),x0(t)})}function H0(t,e,n){return S(this,null,function*(){let i=G0(e);(yield t.firebaseDependencies.analyticsProvider.get()).logEvent(i,{message_id:n[Bh],message_name:n[_0],message_time:n[v0],message_device_time:Math.floor(Date.now()/1e3)})})}function G0(t){switch(t){case yo.NOTIFICATION_CLICKED:return"notification_open";case yo.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function K0(t,e){return S(this,null,function*(){let n=e.data;if(!n.isFirebaseMessaging)return;t.onMessageHandler&&n.messageType===yo.PUSH_RECEIVED&&(typeof t.onMessageHandler=="function"?t.onMessageHandler(Oh(n)):t.onMessageHandler.next(Oh(n)));let i=n.data;U0(i)&&i[y0]==="1"&&(yield H0(t,n.messageType,i))})}var Fh="@firebase/messaging",Lh="0.12.7";var q0=t=>{let e=new ua(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),t.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",n=>K0(e,n)),e},Z0=t=>{let e=t.getProvider("messaging").getImmediate();return{getToken:i=>W0(e,i)}};function Y0(){Re(new ve("messaging",q0,"PUBLIC")),Re(new ve("messaging-internal",Z0,"PRIVATE")),Z(Fh,Lh),Z(Fh,Lh,"esm2017")}function ga(){return S(this,null,function*(){try{yield Ai()}catch{return!1}return typeof window<"u"&&Sn()&&xi()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})}function Hh(t=Nt()){return ga().then(e=>{if(!e)throw Fe.create("unsupported-browser")},e=>{throw Fe.create("indexed-db-unsupported")}),mt(ne(t),"messaging").getImmediate()}Y0();var Ui=class{constructor(e){return e}},Gh="messaging",_a=class{constructor(){return Rt(Gh)}};var Kh="__angularfire_symbol__messagingIsSupported",va="__angularfire_symbol__messagingIsSupportedValue";globalThis[Kh]||=ga().then(t=>globalThis[va]=t).catch(()=>globalThis[va]=!1);var Co={async:()=>globalThis[Kh],sync:()=>{let t=globalThis[va];if(t===void 0)throw new Error(to("Messaging"));return t}},ya=new de("angularfire2.messaging-instances");function X0(t,e){if(!Co.sync())return null;let n=Dt(Gh,t,e);return n&&new Ui(n)}function Q0(t){return(e,n)=>{if(!Co.sync())return null;let i=e.runOutsideAngular(()=>t(n));return new Ui(i)}}var J0={provide:_a,deps:[[new pe,ya]]},ev={provide:Ui,useFactory:X0,deps:[[new pe,ya],Pt]},tv=(()=>{class t{constructor(){Z("angularfire",Pe.full,"fcm")}static \u0275fac=function(i){return new(i||t)};static \u0275mod=De({type:t});static \u0275inj=Ne({providers:[ev,J0,{provide:Mr,useValue:Co.async,multi:!0}]})}return t})();function qh(t,...e){return{ngModule:tv,providers:[{provide:ya,useFactory:Q0(t),multi:!0,deps:[J,Ke,We,Ot,...e]}]}}var Xk=Co.async;var Zh=ft(Hh,!0);var Bi=class{constructor(e){return e}},Yh="performance",Ca=class{constructor(){return Rt(Yh)}};var ba=new de("angularfire2.performance-instances");function nv(t,e,n){if(!Mi(n))return null;let i=Dt(Yh,t,e);return i&&new Bi(i)}function iv(t){return(e,n,i)=>{if(!Mi(n))return null;let r=e.runOutsideAngular(()=>t(i));return new Bi(r)}}var rv={provide:Ca,deps:[[new pe,ba]]},ov={provide:Bi,useFactory:nv,deps:[[new pe,ba],Pt,wt]},sv=(()=>{class t{constructor(){Z("angularfire",Pe.full,"perf")}static \u0275fac=function(i){return new(i||t)};static \u0275mod=De({type:t});static \u0275inj=Ne({providers:[ov,rv]})}return t})();function Xh(t,...e){return{ngModule:sv,providers:[{provide:ba,useFactory:iv(t),multi:!0,deps:[J,wt,Ke,We,Ot,...e]}]}}var Qh=ft(Fd,!0);var rp="firebasestorage.googleapis.com",av="storageBucket",lv=2*60*1e3,cv=10*60*1e3;var Ut=class t extends Ni{constructor(e,n,i=0){super(wa(e),`Firebase Storage: ${n} (${wa(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,t.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return wa(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}},Yt=function(t){return t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment",t}(Yt||{});function wa(t){return"storage/"+t}function uv(){let t="An unknown error occurred, please check the error payload for server response.";return new Ut(Yt.UNKNOWN,t)}function dv(){return new Ut(Yt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function hv(){return new Ut(Yt.CANCELED,"User canceled the upload/download.")}function pv(t){return new Ut(Yt.INVALID_URL,"Invalid URL '"+t+"'.")}function mv(t){return new Ut(Yt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function Jh(t){return new Ut(Yt.INVALID_ARGUMENT,t)}function op(){return new Ut(Yt.APP_DELETED,"The Firebase app was deleted.")}function fv(t){return new Ut(Yt.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}var Zt=class t{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){let e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let i;try{i=t.makeFromUrl(e,n)}catch{return new t(e,"")}if(i.path==="")return i;throw mv(e)}static makeFromUrl(e,n){let i=null,r="([A-Za-z0-9.\\-_]+)";function o(ue){ue.path.charAt(ue.path.length-1)==="/"&&(ue.path_=ue.path_.slice(0,-1))}let s="(/(.*))?$",a=new RegExp("^gs://"+r+s,"i"),l={bucket:1,path:3};function c(ue){ue.path_=decodeURIComponent(ue.path)}let d="v[A-Za-z0-9_]+",m=n.replace(/[.]/g,"\\."),f="(/([^?#]*).*)?$",v=new RegExp(`^https?://${m}/${d}/b/${r}/o${f}`,"i"),w={bucket:1,path:3},R=n===rp?"(?:storage.googleapis.com|storage.cloud.google.com)":n,P="([^?#]*)",ye=new RegExp(`^https?://${R}/${r}/${P}`,"i"),j=[{regex:a,indices:l,postModify:o},{regex:v,indices:w,postModify:c},{regex:ye,indices:{bucket:1,path:2},postModify:c}];for(let ue=0;ue<j.length;ue++){let Je=j[ue],ys=Je.regex.exec(e);if(ys){let hg=ys[Je.indices.bucket],Cs=ys[Je.indices.path];Cs||(Cs=""),i=new t(hg,Cs),Je.postModify(i);break}}if(i==null)throw pv(e);return i}},Ea=class{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}};function gv(t,e,n){let i=1,r=null,o=null,s=!1,a=0;function l(){return a===2}let c=!1;function d(...P){c||(c=!0,e.apply(null,P))}function m(P){r=setTimeout(()=>{r=null,t(v,l())},P)}function f(){o&&clearTimeout(o)}function v(P,...ye){if(c){f();return}if(P){f(),d.call(null,P,...ye);return}if(l()||s){f(),d.call(null,P,...ye);return}i<64&&(i*=2);let j;a===1?(a=2,j=0):j=(i+Math.random())*1e3,m(j)}let w=!1;function R(P){w||(w=!0,f(),!c&&(r!==null?(P||(a=2),clearTimeout(r),m(0)):P||(a=1)))}return m(0),o=setTimeout(()=>{s=!0,R(!0)},n),R}function _v(t){t(!1)}function vv(t){return t!==void 0}function ep(t,e,n,i){if(i<e)throw Jh(`Invalid value for '${t}'. Expected ${e} or greater.`);if(i>n)throw Jh(`Invalid value for '${t}'. Expected ${n} or less.`)}function yv(t){let e=encodeURIComponent,n="?";for(let i in t)if(t.hasOwnProperty(i)){let r=e(i)+"="+e(t[i]);n=n+r+"&"}return n=n.slice(0,-1),n}var Sa=function(t){return t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT",t}(Sa||{});function Cv(t,e){let n=t>=500&&t<600,r=[408,429].indexOf(t)!==-1,o=e.indexOf(t)!==-1;return n||r||o}var Ia=class{constructor(e,n,i,r,o,s,a,l,c,d,m,f=!0){this.url_=e,this.method_=n,this.headers_=i,this.body_=r,this.successCodes_=o,this.additionalRetryCodes_=s,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=d,this.connectionFactory_=m,this.retry=f,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((v,w)=>{this.resolve_=v,this.reject_=w,this.start_()})}start_(){let e=(i,r)=>{if(r){i(!1,new ai(!1,null,!0));return}let o=this.connectionFactory_();this.pendingConnection_=o;let s=a=>{let l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&o.addUploadProgressListener(s),o.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(s),this.pendingConnection_=null;let a=o.getErrorCode()===Sa.NO_ERROR,l=o.getStatus();if(!a||Cv(l,this.additionalRetryCodes_)&&this.retry){let d=o.getErrorCode()===Sa.ABORT;i(!1,new ai(!1,null,d));return}let c=this.successCodes_.indexOf(l)!==-1;i(!0,new ai(c,o))})},n=(i,r)=>{let o=this.resolve_,s=this.reject_,a=r.connection;if(r.wasSuccessCode)try{let l=this.callback_(a,a.getResponse());vv(l)?o(l):o()}catch(l){s(l)}else if(a!==null){let l=uv();l.serverResponse=a.getErrorText(),this.errorCallback_?s(this.errorCallback_(a,l)):s(l)}else if(r.canceled){let l=this.appDelete_?op():hv();s(l)}else{let l=dv();s(l)}};this.canceled_?n(!1,new ai(!1,null,!0)):this.backoffId_=gv(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&_v(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}},ai=class{constructor(e,n,i){this.wasSuccessCode=e,this.connection=n,this.canceled=!!i}};function bv(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function wv(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function Ev(t,e){e&&(t["X-Firebase-GMPID"]=e)}function Sv(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function Iv(t,e,n,i,r,o,s=!0){let a=yv(t.urlParams),l=t.url+a,c=Object.assign({},t.headers);return Ev(c,e),bv(c,n),wv(c,o),Sv(c,i),new Ia(l,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r,s)}function Tv(t){if(t.length===0)return null;let e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function kv(t){let e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}var mM=256*1024;var Ta=class t{constructor(e,n){this._service=e,n instanceof Zt?this._location=n:this._location=Zt.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new t(e,n)}get root(){let e=new Zt(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return kv(this._location.path)}get storage(){return this._service}get parent(){let e=Tv(this._location.path);if(e===null)return null;let n=new Zt(this._location.bucket,e);return new t(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw fv(e)}};function tp(t,e){let n=e?.[av];return n==null?null:Zt.makeFromBucketSpec(n,t)}function Mv(t,e,n,i={}){t.host=`${e}:${n}`,t._protocol="http";let{mockUserToken:r}=i;r&&(t._overrideAuthToken=typeof r=="string"?r:qr(r,t.app.options.projectId))}var ka=class{constructor(e,n,i,r,o){this.app=e,this._authProvider=n,this._appCheckProvider=i,this._url=r,this._firebaseVersion=o,this._bucket=null,this._host=rp,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=lv,this._maxUploadRetryTime=cv,this._requests=new Set,r!=null?this._bucket=Zt.makeFromBucketSpec(r,this._host):this._bucket=tp(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Zt.makeFromBucketSpec(this._url,e):this._bucket=tp(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){ep("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){ep("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){return S(this,null,function*(){if(this._overrideAuthToken)return this._overrideAuthToken;let e=this._authProvider.getImmediate({optional:!0});if(e){let n=yield e.getToken();if(n!==null)return n.accessToken}return null})}_getAppCheckToken(){return S(this,null,function*(){let e=this._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Ta(this,e)}_makeRequest(e,n,i,r,o=!0){if(this._deleted)return new Ea(op());{let s=Iv(e,this._appId,i,r,n,this._firebaseVersion,o);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}makeRequestWithTokens(e,n){return S(this,null,function*(){let[i,r]=yield Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,i,r).getPromise()})}},np="@firebase/storage",ip="0.12.3";var sp="storage";function ap(t=Nt(),e){t=ne(t);let i=mt(t,sp).getImmediate({identifier:e}),r=zi("storage");return r&&lp(i,...r),i}function lp(t,e,n,i={}){Mv(t,e,n,i)}function zv(t,{instanceIdentifier:e}){let n=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),r=t.getProvider("app-check-internal");return new ka(n,i,r,e,eo)}function Av(){Re(new ve(sp,zv,"PUBLIC").setMultipleInstances(!0)),Z(np,ip,""),Z(np,ip,"esm2017")}Av();var Vi=class{constructor(e){return e}},cp="storage",Ma=class{constructor(){return Rt(cp)}};var za=new de("angularfire2.storage-instances");function xv(t,e){let n=Dt(cp,t,e);return n&&new Vi(n)}function Nv(t){return(e,n)=>{let i=e.runOutsideAngular(()=>t(n));return new Vi(i)}}var Dv={provide:Ma,deps:[[new pe,za]]},Rv={provide:Vi,useFactory:xv,deps:[[new pe,za],Pt]},Pv=(()=>{class t{constructor(){Z("angularfire",Pe.full,"gcs")}static \u0275fac=function(i){return new(i||t)};static \u0275mod=De({type:t});static \u0275inj=Ne({providers:[Rv,Dv]})}return t})();function up(t,...e){return{ngModule:Pv,providers:[{provide:za,useFactory:Nv(t),multi:!0,deps:[J,Ke,We,Ot,[new pe,io],[new pe,Ht],...e]}]}}var dp=ft(ap,!0);var kn=class{constructor(e){return e}},mp="analytics",xa=class{constructor(){return Rt(mp)}};var Na="__angularfire_symbol__analyticsIsSupportedValue",fp="__angularfire_symbol__analyticsIsSupported";globalThis[fp]||=Sh().then(t=>globalThis[Na]=t).catch(()=>globalThis[Na]=!1);var bo={async:()=>globalThis[fp],sync:()=>{let t=globalThis[Na];if(t===void 0)throw new Error(to("Analytics"));return t}},gp=bo.async;var Ov=ft(ta,!0);var Fv=ft(Ih,!0);var _p=(()=>{class t{initialized;disposables=[];constructor(n,i,r){Z("angularfire",Pe.full,"user-tracking");let o;this.initialized=i.runOutsideAngular(()=>new Promise(s=>{o=s})),gp().then(()=>{let s=r.get(kn);s?this.disposables=[Cd(n).subscribe(a=>{Fv(s,a?.uid),o()})]:o()})}ngOnDestroy(){this.disposables.forEach(n=>n.unsubscribe())}static \u0275fac=function(i){return new(i||t)(N(no),N(J),N(Ke))};static \u0275prov=je({token:t,factory:t.\u0275fac})}return t})(),Lv="firebase_event_origin",Uv="firebase_previous_class",Bv="firebase_previous_id",Vv="firebase_previous_screen",jv="firebase_screen_class",hp="firebase_screen_id",$v="firebase_screen",Da="outlet",Wv="page_path",Hv="page_title",ji="screen_class",pp="screen_name",Gv="screen_view",Kv="auto",qv="#",Zv=Math.floor(Math.random()*(2**32-1))-2**31,Aa={},Yv=t=>{let e=[t[ji],t[Da]].join(qv);if(Aa.hasOwnProperty(e))return Aa[e];{let n=Zv++;return Aa[e]=n,n}},Xv=(t,e,n)=>t.events.pipe(ki(r=>r instanceof wu)).pipe(Ve(r=>{let s=t.parseUrl(t.url.replace(/(?:\().+(?:\))/g,f=>f.replace("://",":///"))).root.children[r.snapshot.outlet]?.toString()||"",a=t.routerState.root.children.map(f=>f).find(f=>f.outlet===r.snapshot.outlet);if(!a)return tt(null);let l=a;for(;l.firstChild;)l=l.firstChild;let c=l.pathFromRoot.map(f=>f.routeConfig?.path).filter(f=>f).join("/")||"/",d={[pp]:c,[Wv]:`/${s}`,[Lv]:Kv,[$v]:c,[Da]:r.snapshot.outlet};e&&(d[Hv]=e.getTitle());let m=a.component;if(m){if(m===Eu){let f=r.snapshot;for(;f.firstChild;)f=f.firstChild;m=f.component}}else m=r.snapshot.component;if(typeof m=="string")return tt(et(Ie({},d),{[ji]:m}));if(m){let f=n.resolveComponentFactory(m);return tt(et(Ie({},d),{[ji]:f.selector}))}return tt(null)}),ki(r=>!!r),xe(r=>Ie({[jv]:r[ji],[hp]:Yv(r)},r)),Kc(r=>r[Da]),Wc(r=>r.pipe(Ir((o,s)=>JSON.stringify(o)===JSON.stringify(s)),Xc(void 0),qc(),xe(([o,s])=>o?Ie({[Uv]:o[ji],[Vv]:o[pp],[Bv]:o[hp]},s):s)))),Qv=(()=>{class t{disposable;constructor(n,i,r,o,s,a){Z("angularfire",Pe.full,"screen-tracking"),gp().then(()=>{let l=a.get(kn);!n||!l||o.runOutsideAngular(()=>{this.disposable=Xv(n,i,r).pipe(Ve(c=>S(this,null,function*(){return s&&(yield s.initialized),Ov(l,Gv,c)}))).subscribe()})})}ngOnDestroy(){this.disposable&&this.disposable.unsubscribe()}static \u0275fac=function(i){return new(i||t)(N(se,8),N(Cu,8),N(iu),N(J),N(_p,8),N(Ke))};static \u0275prov=je({token:t,factory:t.\u0275fac})}return t})(),Ra=new de("angularfire2.analytics-instances");function Jv(t,e){if(!bo.sync())return null;let n=Dt(mp,t,e);return n&&new kn(n)}function ey(t){return(e,n)=>{if(!bo.sync())return null;let i=e.runOutsideAngular(()=>t(n));return new kn(i)}}var ty={provide:xa,deps:[[new pe,Ra]]},ny={provide:kn,useFactory:Jv,deps:[[new pe,Ra],Pt]},iy=(()=>{class t{constructor(n,i){Z("angularfire",Pe.full,"analytics")}static \u0275fac=function(i){return new(i||t)(N(Qv,8),N(_p,8))};static \u0275mod=De({type:t});static \u0275inj=Ne({providers:[ny,ty,{provide:Mr,useValue:bo.async,multi:!0}]})}return t})();function vp(t,...e){return{ngModule:iy,providers:[{provide:Ra,useFactory:ey(t),multi:!0,deps:[J,Ke,We,Ot,...e]}]}}var ry=new Map,oy={activated:!1,tokenObservers:[]},sy={initialized:!1,enabled:!1};function yt(t){return ry.get(t)||Object.assign({},oy)}function Ep(){return sy}var ay="https://content-firebaseappcheck.googleapis.com/v1";var ly="exchangeDebugToken",yp={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},Cz=24*60*60*1e3;var Oa=class{constructor(e,n,i,r,o){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=i,this.lowerBound=r,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=r,r>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return S(this,null,function*(){this.stop();try{this.pending=new be,this.pending.promise.catch(n=>{}),yield cy(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new be,this.pending.promise.catch(n=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}};function cy(t){return new Promise(e=>{setTimeout(e,t)})}var uy={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},hn=new ni("appCheck","AppCheck",uy);function Sp(t){if(!yt(t).activated)throw hn.create("use-before-activation",{appName:t.name})}function Ip(i,r){return S(this,arguments,function*({url:t,body:e},n){let o={"Content-Type":"application/json"},s=n.getImmediate({optional:!0});if(s){let v=yield s.getHeartbeatsHeader();v&&(o["X-Firebase-Client"]=v)}let a={method:"POST",body:JSON.stringify(e),headers:o},l;try{l=yield fetch(t,a)}catch(v){throw hn.create("fetch-network-error",{originalErrorMessage:v?.message})}if(l.status!==200)throw hn.create("fetch-status-error",{httpStatus:l.status});let c;try{c=yield l.json()}catch(v){throw hn.create("fetch-parse-error",{originalErrorMessage:v?.message})}let d=c.ttl.match(/^([\d.]+)(s)$/);if(!d||!d[2]||isNaN(Number(d[1])))throw hn.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${c.ttl}`});let m=Number(d[1])*1e3,f=Date.now();return{token:c.token,expireTimeMillis:f+m,issuedAtTimeMillis:f}})}function Tp(t,e){let{projectId:n,appId:i,apiKey:r}=t.options;return{url:`${ay}/projects/${n}/apps/${i}:${ly}?key=${r}`,body:{debug_token:e}}}var dy="firebase-app-check-database",hy=1,Fa="firebase-app-check-store";var wo=null;function py(){return wo||(wo=new Promise((t,e)=>{try{let n=indexedDB.open(dy,hy);n.onsuccess=i=>{t(i.target.result)},n.onerror=i=>{var r;e(hn.create("storage-open",{originalErrorMessage:(r=i.target.error)===null||r===void 0?void 0:r.message}))},n.onupgradeneeded=i=>{let r=i.target.result;switch(i.oldVersion){case 0:r.createObjectStore(Fa,{keyPath:"compositeKey"})}}}catch(n){e(hn.create("storage-open",{originalErrorMessage:n?.message}))}}),wo)}function my(t,e){return fy(gy(t),e)}function fy(t,e){return S(this,null,function*(){let i=(yield py()).transaction(Fa,"readwrite"),o=i.objectStore(Fa).put({compositeKey:t,value:e});return new Promise((s,a)=>{o.onsuccess=l=>{s()},i.onerror=l=>{var c;a(hn.create("storage-set",{originalErrorMessage:(c=l.target.error)===null||c===void 0?void 0:c.message}))}})})}function gy(t){return`${t.options.appId}-${t.name}`}var La=new ln("@firebase/app-check");function Pa(t,e){return Sn()?my(t,e).catch(n=>{La.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function kp(){return Ep().enabled}function Mp(){return S(this,null,function*(){let t=Ep();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var _y={error:"UNKNOWN_ERROR"};function vy(t){return Kr.encodeString(JSON.stringify(t),!1)}function Ua(t,e=!1){return S(this,null,function*(){let n=t.app;Sp(n);let i=yt(n),r=i.token,o;if(r&&!$i(r)&&(i.token=void 0,r=void 0),!r){let l=yield i.cachedTokenPromise;l&&($i(l)?r=l:yield Pa(n,void 0))}if(!e&&r&&$i(r))return{token:r.token};let s=!1;if(kp()){i.exchangeTokenPromise||(i.exchangeTokenPromise=Ip(Tp(n,yield Mp()),t.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),s=!0);let l=yield i.exchangeTokenPromise;return yield Pa(n,l),i.token=l,{token:l.token}}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),s=!0),r=yield yt(n).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"?La.warn(l.message):La.error(l),o=l}let a;return r?o?$i(r)?a={token:r.token,internalError:o}:a=bp(o):(a={token:r.token},i.token=r,yield Pa(n,r)):a=bp(o),s&&wy(n,a),a})}function yy(t){return S(this,null,function*(){let e=t.app;Sp(e);let{provider:n}=yt(e);if(kp()){let i=yield Mp(),{token:r}=yield Ip(Tp(e,i),t.heartbeatServiceProvider);return{token:r}}else{let{token:i}=yield n.getToken();return{token:i}}})}function Cy(t,e,n,i){let{app:r}=t,o=yt(r),s={next:n,error:i,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&$i(o.token)){let a=o.token;Promise.resolve().then(()=>{n({token:a.token}),Cp(t)}).catch(()=>{})}o.cachedTokenPromise.then(()=>Cp(t))}function zp(t,e){let n=yt(t),i=n.tokenObservers.filter(r=>r.next!==e);i.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=i}function Cp(t){let{app:e}=t,n=yt(e),i=n.tokenRefresher;i||(i=by(t),n.tokenRefresher=i),!i.isRunning()&&n.isTokenAutoRefreshEnabled&&i.start()}function by(t){let{app:e}=t;return new Oa(()=>S(this,null,function*(){let n=yt(e),i;if(n.token?i=yield Ua(t,!0):i=yield Ua(t),i.error)throw i.error;if(i.internalError)throw i.internalError}),()=>!0,()=>{let n=yt(e);if(n.token){let i=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5,r=n.token.expireTimeMillis-5*60*1e3;return i=Math.min(i,r),Math.max(0,i-Date.now())}else return 0},yp.RETRIAL_MIN_WAIT,yp.RETRIAL_MAX_WAIT)}function wy(t,e){let n=yt(t).tokenObservers;for(let i of n)try{i.type==="EXTERNAL"&&e.error!=null?i.error(e.error):i.next(e)}catch{}}function $i(t){return t.expireTimeMillis-Date.now()>0}function bp(t){return{token:vy(_y),error:t}}var Ba=class{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){let{tokenObservers:e}=yt(this.app);for(let n of e)zp(this.app,n.next);return Promise.resolve()}};function Ey(t,e){return new Ba(t,e)}function Sy(t){return{getToken:e=>Ua(t,e),getLimitedUseToken:()=>yy(t),addTokenListener:e=>Cy(t,"INTERNAL",e),removeTokenListener:e=>zp(t.app,e)}}var Iy="@firebase/app-check",Ty="0.8.3";var ky="app-check",wp="app-check-internal";function My(){Re(new ve(ky,t=>{let e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return Ey(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(wp).initialize()})),Re(new ve(wp,t=>{let e=t.getProvider("app-check").getImmediate();return Sy(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Z(Iy,Ty)}My();var zy=["localhost","0.0.0.0","127.0.0.1"],Nz=typeof window<"u"&&zy.includes(window.location.hostname);var Ay="firebase",xy="10.10.0";gt.registerVersion(Ay,xy,"app-compat");var Ny=["ngOnDestroy"],Np=(t,e,n,i={})=>new Proxy(t,{get:(r,o)=>n.runOutsideAngular(()=>{if(t[o])return i?.spy?.get&&i.spy.get(o,t[o]),t[o];if(Ny.indexOf(o)>-1)return()=>{};let s=e.toPromise().then(a=>{let l=a?.[o];return typeof l=="function"?l.bind(a):l?.then?l.then(c=>n.run(()=>c)):n.run(()=>l)});return new Proxy(()=>{},{get:(a,l)=>s[l],apply:(a,l,c)=>s.then(d=>{let m=d?.(...c);return i?.spy?.apply&&i.spy.apply(o,c,m),m})})})});var Va=class{constructor(e){return e}},Eo=new de("angularfire2.app.options"),So=new de("angularfire2.app.name");function Io(t,e,n){let i=typeof n=="string"&&n||"[DEFAULT]",r=typeof n=="object"&&n||{};r.name=r.name||i;let s=gt.apps.filter(a=>a&&a.name===r.name)[0]||e.runOutsideAngular(()=>gt.initializeApp(t,r));try{if(JSON.stringify(t)!==JSON.stringify(s.options)){let a=!!module.hot;Dy("error",`${s.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new Va(s)}var Dy=(t,...e)=>{As()&&typeof console<"u"&&console[t](...e)};function To(t,e,n,i,r){let[,o,s]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===t)||[];if(o)return Ry(r,s)||(xp("error",`${e} was already initialized on the ${n} Firebase App with different settings.${Py?" You may need to reload as Firebase is not HMR aware.":""}`),xp("warn",{is:r,was:s})),o;{let a=i();return globalThis.\u0275AngularfireInstanceCache.push([t,a,r]),a}}function Ry(t,e){try{return t.toString()===e.toString()}catch{return t===e}}var Py=typeof module<"u"&&!!module.hot,xp=(t,...e)=>{As()&&typeof console<"u"&&console[t](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var ja=new de("angularfire2.auth.use-emulator"),$a=new de("angularfire2.auth.settings"),Wa=new de("angularfire2.auth.tenant-id"),Ha=new de("angularfire2.auth.langugage-code"),Ga=new de("angularfire2.auth.use-device-language"),Ka=new de("angularfire.auth.persistence"),qa=(t,e,n,i,r,o,s,a)=>To(`${t.name}.auth`,"AngularFireAuth",t.name,()=>{let l=e.runOutsideAngular(()=>t.auth());if(n&&l.useEmulator(...n),i&&(l.tenantId=i),l.languageCode=r,o&&l.useDeviceLanguage(),s)for(let[c,d]of Object.entries(s))l.settings[c]=d;return a&&l.setPersistence(a),l},[n,i,r,o,s,a]),Dp=(()=>{class t{authState;idToken;user;idTokenResult;credential;constructor(n,i,r,o,s,a,l,c,d,m,f,v){let w=new bs,R=tt(void 0).pipe(Ii(s.outsideAngular),Ve(()=>o.runOutsideAngular(()=>import("./chunk-4T7SIAW7.js"))),xe(()=>Io(n,o,i)),xe(P=>qa(P,o,a,c,d,m,l,f)),Es({bufferSize:1,refCount:!1}));if(gu(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=tt(null);else{R.pipe(Gc()).subscribe();let P=R.pipe(Ve(j=>j.getRedirectResult().then(ue=>ue,()=>null)),Gt,Es({bufferSize:1,refCount:!1})),ye=R.pipe(Ve(j=>new wn(ue=>({unsubscribe:o.runOutsideAngular(()=>j.onAuthStateChanged(Je=>ue.next(Je),Je=>ue.error(Je),()=>ue.complete()))})))),Ae=R.pipe(Ve(j=>new wn(ue=>({unsubscribe:o.runOutsideAngular(()=>j.onIdTokenChanged(Je=>ue.next(Je),Je=>ue.error(Je),()=>ue.complete()))}))));this.authState=P.pipe(Ss(ye),Sr(s.outsideAngular),Ii(s.insideAngular)),this.user=P.pipe(Ss(Ae),Sr(s.outsideAngular),Ii(s.insideAngular)),this.idToken=this.user.pipe(Ve(j=>j?Jt(j.getIdToken()):tt(null))),this.idTokenResult=this.user.pipe(Ve(j=>j?Jt(j.getIdTokenResult()):tt(null))),this.credential=Ti(P,w,this.authState.pipe(ki(j=>!j))).pipe(xe(j=>j?.user?j:null),Sr(s.outsideAngular),Ii(s.insideAngular))}return Np(this,R,o,{spy:{apply:(P,ye,Ae)=>{(P.startsWith("signIn")||P.startsWith("createUser"))&&Ae.then(j=>w.next(j))}}})}static \u0275fac=function(i){return new(i||t)(N(Eo),N(So,8),N(wt),N(J),N(We),N(ja,8),N($a,8),N(Wa,8),N(Ha,8),N(Ga,8),N(Ka,8),N(Ht,8))};static \u0275prov=je({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})();var Rp="@firebase/database",Pp="1.0.4";var sc="";function ac(t){sc=t}var nl=class{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),ge(n))}get(e){let n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Zr(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}};var il=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return ct(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}};var hm=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){let e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new nl(e)}}catch{}return new il},zn=hm("localStorage"),rl=hm("sessionStorage");var di=new ln("@firebase/database"),pm=function(){let t=1;return function(){return t++}}(),mm=function(t){let e=ld(t),n=new ad;n.update(e);let i=n.digest();return Kr.encodeByteArray(i)},pr=function(...t){let e="";for(let n=0;n<t.length;n++){let i=t[n];Array.isArray(i)||i&&typeof i=="object"&&typeof i.length=="number"?e+=pr.apply(null,i):typeof i=="object"?e+=ge(i):e+=i,e+=" "}return e},An=null,Op=!0,fm=function(t,e){y(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(di.logLevel=cd.VERBOSE,An=di.log.bind(di),e&&rl.set("logging_enabled",!0)):typeof t=="function"?An=t:(An=null,rl.remove("logging_enabled"))},Ee=function(...t){if(Op===!0&&(Op=!1,An===null&&rl.get("logging_enabled")===!0&&fm(!0)),An){let e=pr.apply(null,t);An(e)}},mr=function(t){return function(...e){Ee(t,...e)}},ol=function(...t){let e="FIREBASE INTERNAL ERROR: "+pr(...t);di.error(e)},jt=function(...t){let e=`FIREBASE FATAL ERROR: ${pr(...t)}`;throw di.error(e),new Error(e)},ze=function(...t){let e="FIREBASE WARNING: "+pr(...t);di.warn(e)},Ly=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&ze("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},es=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},Uy=function(t){if(xt()||document.readyState==="complete")t();else{let e=!1,n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},gn="[MIN_NAME]",Xt="[MAX_NAME]",Nn=function(t,e){if(t===e)return 0;if(t===gn||e===Xt)return-1;if(e===gn||t===Xt)return 1;{let n=Fp(t),i=Fp(e);return n!==null?i!==null?n-i===0?t.length-e.length:n-i:-1:i!==null?1:t<e?-1:1}},By=function(t,e){return t===e?0:t<e?-1:1},Wi=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+ge(e))},lc=function(t){if(typeof t!="object"||t===null)return ge(t);let e=[];for(let i in t)e.push(i);e.sort();let n="{";for(let i=0;i<e.length;i++)i!==0&&(n+=","),n+=ge(e[i]),n+=":",n+=lc(t[e[i]]);return n+="}",n},gm=function(t,e){let n=t.length;if(n<=e)return[t];let i=[];for(let r=0;r<n;r+=e)r+e>n?i.push(t.substring(r,n)):i.push(t.substring(r,r+e));return i};function Se(t,e){for(let n in t)t.hasOwnProperty(n)&&e(n,t[n])}var _m=function(t){y(!es(t),"Invalid JSON number");let e=11,n=52,i=(1<<e-1)-1,r,o,s,a,l;t===0?(o=0,s=0,r=1/t===-1/0?1:0):(r=t<0,t=Math.abs(t),t>=Math.pow(2,1-i)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),i),o=a+i,s=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(o=0,s=Math.round(t/Math.pow(2,1-i-n))));let c=[];for(l=n;l;l-=1)c.push(s%2?1:0),s=Math.floor(s/2);for(l=e;l;l-=1)c.push(o%2?1:0),o=Math.floor(o/2);c.push(r?1:0),c.reverse();let d=c.join(""),m="";for(l=0;l<64;l+=8){let f=parseInt(d.substr(l,8),2).toString(16);f.length===1&&(f="0"+f),m=m+f}return m.toLowerCase()},Vy=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},jy=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function $y(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");let i=new Error(t+" at "+e._path.toString()+": "+n);return i.code=t.toUpperCase(),i}var Wy=new RegExp("^-?(0*)\\d{1,10}$"),Hy=-2147483648,Gy=2147483647,Fp=function(t){if(Wy.test(t)){let e=Number(t);if(e>=Hy&&e<=Gy)return e}return null},Ci=function(t){try{t()}catch(e){setTimeout(()=>{let n=e.stack||"";throw ze("Exception was thrown by user callback.",n),e},Math.floor(0))}},Ky=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},qi=function(t,e){let n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};var sl=class{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n?.getImmediate({optional:!0}),this.appCheck||n?.get().then(i=>this.appCheck=i)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,i)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,i):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(i=>i.addTokenListener(e))}notifyForInvalidToken(){ze(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}};var al=class{constructor(e,n,i){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(r=>this.auth_=r)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Ee("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,i)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,i):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',ze(e)}},Zi=(()=>{class t{constructor(n){this.accessToken=n}getToken(n){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(n){n(this.accessToken)}removeTokenChangeListener(n){}notifyForInvalidToken(){}}t.OWNER="owner";return t})(),Mo="5",vm="v",ym="s",Cm="r",bm="f",wm=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Em="ls",Sm="p",ll="ac",Im="websocket",Tm="long_polling";var zo=class{constructor(e,n,i,r,o=!1,s="",a=!1,l=!1){this.secure=n,this.namespace=i,this.webSocketOnly=r,this.nodeAdmin=o,this.persistenceKey=s,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=zn.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&zn.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){let e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}};function qy(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function km(t,e,n){y(typeof e=="string","typeof type must == string"),y(typeof n=="object","typeof params must == object");let i;if(e===Im)i=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===Tm)i=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);qy(t)&&(n.ns=t.namespace);let r=[];return Se(n,(o,s)=>{r.push(o+"="+s)}),i+r.join("&")}var cl=class{constructor(){this.counters_={}}incrementCounter(e,n=1){ct(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return td(this.counters_)}};var Za={},Ya={};function cc(t){let e=t.toString();return Za[e]||(Za[e]=new cl),Za[e]}function Zy(t,e){let n=t.toString();return Ya[n]||(Ya[n]=e()),Ya[n]}var ul=class{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){let i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<i.length;++r)i[r]&&Ci(()=>{this.onMessage_(i[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var Lp="start",Yy="close",Xy="pLPCommand",Qy="pRTLPCB",Mm="id",zm="pw",Am="ser",Jy="cb",eC="seg",tC="ts",nC="d",iC="dframe",xm=1870,Nm=30,rC=xm-Nm,oC=25e3,sC=3e4,Ji=class t{constructor(e,n,i,r,o,s,a){this.connId=e,this.repoInfo=n,this.applicationId=i,this.appCheckToken=r,this.authToken=o,this.transportSessionId=s,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=mr(e),this.stats_=cc(n),this.urlFn=l=>(this.appCheckToken&&(l[ll]=this.appCheckToken),km(n,Tm,l))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new ul(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(sC)),Uy(()=>{if(this.isClosed_)return;this.scriptTagHolder=new dl((...o)=>{let[s,a,l,c,d]=o;if(this.incrementIncomingBytes_(o),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,s===Lp)this.id=a,this.password=l;else if(s===Yy)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+s)},(...o)=>{let[s,a]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(s,a)},()=>{this.onClosed_()},this.urlFn);let i={};i[Lp]="t",i[Am]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(i[Jy]=this.scriptTagHolder.uniqueCallbackIdentifier),i[vm]=Mo,this.transportSessionId&&(i[ym]=this.transportSessionId),this.lastSessionId&&(i[Em]=this.lastSessionId),this.applicationId&&(i[Sm]=this.applicationId),this.appCheckToken&&(i[ll]=this.appCheckToken),typeof location<"u"&&location.hostname&&wm.test(location.hostname)&&(i[Cm]=bm);let r=this.urlFn(i);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){t.forceAllow_=!0}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){return xt()?!1:t.forceAllow_?!0:!t.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!Vy()&&!jy()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){let n=ge(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);let i=ed(n),r=gm(i,rC);for(let o=0;o<r.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[o]),this.curSegmentNum++}addDisconnectPingFrame(e,n){if(xt())return;this.myDisconnFrame=document.createElement("iframe");let i={};i[iC]="t",i[Mm]=e,i[zm]=n,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){let n=ge(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}},dl=class t{constructor(e,n,i,r){if(this.onDisconnect=i,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,xt())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=pm(),window[Xy+this.uniqueCallbackIdentifier]=e,window[Qy+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();let o="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(o='<script>document.domain="'+document.domain+'";<\/script>');let s="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(s),this.myIFrame.doc.close()}catch(a){Ee("frame writing exception"),a.stack&&Ee(a.stack),Ee(a)}}}static createIFrame_(){let e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Ee("No IE domain setting required")}catch{let i=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let e={};e[Mm]=this.myID,e[zm]=this.myPW,e[Am]=this.currentSerial;let n=this.urlFn(e),i="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+Nm+i.length<=xm;){let s=this.pendingSegs.shift();i=i+"&"+eC+r+"="+s.seg+"&"+tC+r+"="+s.ts+"&"+nC+r+"="+s.d,r++}return n=n+i,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,i){this.pendingSegs.push({seg:e,ts:n,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);let i=()=>{this.outstandingRequests.delete(n),this.newRequest_()},r=setTimeout(i,Math.floor(oC)),o=()=>{clearTimeout(r),i()};this.addTag(e,o)}addTag(e,n){xt()?this.doNodeLongPoll(e,n):setTimeout(()=>{try{if(!this.sendNewPolls)return;let i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){let r=i.readyState;(!r||r==="loaded"||r==="complete")&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),n())},i.onerror=()=>{Ee("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}};var aC=16384,lC=45e3,Ao=null;typeof MozWebSocket<"u"?Ao=MozWebSocket:typeof WebSocket<"u"&&(Ao=WebSocket);var ci=(()=>{class t{constructor(n,i,r,o,s,a,l){this.connId=n,this.applicationId=r,this.appCheckToken=o,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=mr(this.connId),this.stats_=cc(i),this.connURL=t.connectionURL_(i,a,l,o,r),this.nodeAdmin=i.nodeAdmin}static connectionURL_(n,i,r,o,s){let a={};return a[vm]=Mo,!xt()&&typeof location<"u"&&location.hostname&&wm.test(location.hostname)&&(a[Cm]=bm),i&&(a[ym]=i),r&&(a[Em]=r),o&&(a[ll]=o),s&&(a[Sm]=s),km(n,Im,a)}open(n,i){this.onDisconnect=i,this.onMessage=n,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,zn.set("previous_websocket_failure",!0);try{let r;if(xt()){let o=this.nodeAdmin?"AdminNode":"Node";r={headers:{"User-Agent":`Firebase/${Mo}/${sc}/${process.platform}/${o}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(r.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(r.headers["X-Firebase-AppCheck"]=this.appCheckToken);let s=process.env,a=this.connURL.indexOf("wss://")===0?s.HTTPS_PROXY||s.https_proxy:s.HTTP_PROXY||s.http_proxy;a&&(r.proxy={origin:a})}this.mySock=new Ao(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");let o=r.message||r.data;o&&this.log_(o),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");let o=r.message||r.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){let n=!1;if(typeof navigator<"u"&&navigator.userAgent){let i=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(i);r&&r.length>1&&parseFloat(r[1])<4.4&&(n=!0)}return!n&&Ao!==null&&!t.forceDisallow_}static previouslyFailed(){return zn.isInMemoryStorage||zn.get("previous_websocket_failure")===!0}markConnectionHealthy(){zn.remove("previous_websocket_failure")}appendFrame_(n){if(this.frames.push(n),this.frames.length===this.totalFrames){let i=this.frames.join("");this.frames=null;let r=Zr(i);this.onMessage(r)}}handleNewFrameCount_(n){this.totalFrames=n,this.frames=[]}extractFrameCount_(n){if(y(this.frames===null,"We already have a frame buffer"),n.length<=6){let i=Number(n);if(!isNaN(i))return this.handleNewFrameCount_(i),null}return this.handleNewFrameCount_(1),n}handleIncomingFrame(n){if(this.mySock===null)return;let i=n.data;if(this.bytesReceived+=i.length,this.stats_.incrementCounter("bytes_received",i.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(i);else{let r=this.extractFrameCount_(i);r!==null&&this.appendFrame_(r)}}send(n){this.resetKeepAlive();let i=ge(n);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);let r=gm(i,aC);r.length>1&&this.sendString_(String(r.length));for(let o=0;o<r.length;o++)this.sendString_(r[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(lC))}sendString_(n){try{this.mySock.send(n)}catch(i){this.log_("Exception thrown from WebSocket.send():",i.message||i.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4;return t})(),Dm=(()=>{class t{constructor(n){this.initTransports_(n)}static get ALL_TRANSPORTS(){return[Ji,ci]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(n){let i=ci&&ci.isAvailable(),r=i&&!ci.previouslyFailed();if(n.webSocketOnly&&(i||ze("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[ci];else{let o=this.transports_=[];for(let s of t.ALL_TRANSPORTS)s&&s.isAvailable()&&o.push(s);t.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}t.globalTransportInitialized_=!1;return t})(),cC=6e4,uC=5e3,dC=10*1024,hC=100*1024,Xa="t",Up="d",pC="s",Bp="r",mC="e",Vp="o",jp="a",$p="n",Wp="p",fC="h",hl=class{constructor(e,n,i,r,o,s,a,l,c,d){this.id=e,this.repoInfo_=n,this.applicationId_=i,this.appCheckToken_=r,this.authToken_=o,this.onMessage_=s,this.onReady_=a,this.onDisconnect_=l,this.onKill_=c,this.lastSessionId=d,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=mr("c:"+this.id+":"),this.transportManager_=new Dm(n),this.log_("Connection created"),this.start_()}start_(){let e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,i)},Math.floor(0));let r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=qi(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>hC?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>dC?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){let n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Xa in e){let n=e[Xa];n===jp?this.upgradeIfSecondaryHealthy_():n===Bp?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===Vp&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){let n=Wi("t",e),i=Wi("d",e);if(n==="c")this.onSecondaryControl_(i);else if(n==="d")this.pendingDataMessages.push(i);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:Wp,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:jp,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:$p,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){let n=Wi("t",e),i=Wi("d",e);n==="c"?this.onControl_(i):n==="d"&&this.onDataMessage_(i)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){let n=Wi(Xa,e);if(Up in e){let i=e[Up];if(n===fC){let r=Object.assign({},i);this.repoInfo_.isUsingEmulator&&(r.h=this.repoInfo_.host),this.onHandshake_(r)}else if(n===$p){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===pC?this.onConnectionShutdown_(i):n===Bp?this.onReset_(i):n===mC?ol("Server Error: "+i):n===Vp?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):ol("Unknown control packet command: "+n)}}onHandshake_(e){let n=e.ts,i=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),Mo!==i&&ze("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,i),qi(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(cC))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):qi(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(uC))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:Wp,d:{}}}))}onSecondaryConnectionLost_(){let e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(zn.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var xo=class{put(e,n,i,r){}merge(e,n,i,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,i){}onDisconnectMerge(e,n,i){}onDisconnectCancel(e,n){}reportStats(e){}};var No=class{constructor(e){this.allowedEvents_=e,this.listeners_={},y(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){let i=[...this.listeners_[e]];for(let r=0;r<i.length;r++)i[r].callback.apply(i[r].context,n)}}on(e,n,i){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:i});let r=this.getInitialEvent(e);r&&n.apply(i,r)}off(e,n,i){this.validateEventType_(e);let r=this.listeners_[e]||[];for(let o=0;o<r.length;o++)if(r[o].callback===n&&(!i||i===r[o].context)){r.splice(o,1);return}}validateEventType_(e){y(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}};var Do=class t extends No{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!xs()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new t}getInitialEvent(e){return y(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}};var Hp=32,Gp=768,H=class{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let i=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[i]=this.pieces_[r],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}};function W(){return new H("")}function F(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function _n(t){return t.pieces_.length-t.pieceNum_}function Q(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new H(t.pieces_,e)}function uc(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function gC(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function er(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function Rm(t){if(t.pieceNum_>=t.pieces_.length)return null;let e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new H(e,0)}function ce(t,e){let n=[];for(let i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);if(e instanceof H)for(let i=e.pieceNum_;i<e.pieces_.length;i++)n.push(e.pieces_[i]);else{let i=e.split("/");for(let r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new H(n,0)}function L(t){return t.pieceNum_>=t.pieces_.length}function Le(t,e){let n=F(t),i=F(e);if(n===null)return e;if(n===i)return Le(Q(t),Q(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function _C(t,e){let n=er(t,0),i=er(e,0);for(let r=0;r<n.length&&r<i.length;r++){let o=Nn(n[r],i[r]);if(o!==0)return o}return n.length===i.length?0:n.length<i.length?-1:1}function dc(t,e){if(_n(t)!==_n(e))return!1;for(let n=t.pieceNum_,i=e.pieceNum_;n<=t.pieces_.length;n++,i++)if(t.pieces_[n]!==e.pieces_[i])return!1;return!0}function dt(t,e){let n=t.pieceNum_,i=e.pieceNum_;if(_n(t)>_n(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[i])return!1;++n,++i}return!0}var pl=class{constructor(e,n){this.errorPrefix_=n,this.parts_=er(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=Ri(this.parts_[i]);Pm(this)}};function vC(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Ri(e),Pm(t)}function yC(t){let e=t.parts_.pop();t.byteLength_-=Ri(e),t.parts_.length>0&&(t.byteLength_-=1)}function Pm(t){if(t.byteLength_>Gp)throw new Error(t.errorPrefix_+"has a key path longer than "+Gp+" bytes ("+t.byteLength_+").");if(t.parts_.length>Hp)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Hp+") or object contains a cycle "+Mn(t))}function Mn(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}var ml=class t extends No{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{let i=!document[e];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new t}getInitialEvent(e){return y(e==="visible","Unknown event type: "+e),[this.visible_]}};var Hi=1e3,CC=60*5*1e3,Kp=30*1e3,bC=1.3,wC=3e4,EC="server_kill",qp=3,hc=(()=>{class t extends xo{constructor(n,i,r,o,s,a,l,c){if(super(),this.repoInfo_=n,this.applicationId_=i,this.onDataUpdate_=r,this.onConnectStatus_=o,this.onServerInfoUpdate_=s,this.authTokenProvider_=a,this.appCheckTokenProvider_=l,this.authOverride_=c,this.id=t.nextPersistentConnectionId_++,this.log_=mr("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Hi,this.maxReconnectDelay_=CC,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c&&!xt())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");ml.getInstance().on("visible",this.onVisible_,this),n.host.indexOf("fblocal")===-1&&Do.getInstance().on("online",this.onOnline_,this)}sendRequest(n,i,r){let o=++this.requestNumber_,s={r:o,a:n,b:i};this.log_(ge(s)),y(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),r&&(this.requestCBHash_[o]=r)}get(n){this.initConnection_();let i=new be,o={action:"g",request:{p:n._path.toString(),q:n._queryObject},onComplete:a=>{let l=a.d;a.s==="ok"?i.resolve(l):i.reject(l)}};this.outstandingGets_.push(o),this.outstandingGetCount_++;let s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),i.promise}listen(n,i,r,o){this.initConnection_();let s=n._queryIdentifier,a=n._path.toString();this.log_("Listen called for "+a+" "+s),this.listens.has(a)||this.listens.set(a,new Map),y(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"listen() called for non-default but complete query"),y(!this.listens.get(a).has(s),"listen() called twice for same path/queryId.");let l={onComplete:o,hashFn:i,query:n,tag:r};this.listens.get(a).set(s,l),this.connected_&&this.sendListen_(l)}sendGet_(n){let i=this.outstandingGets_[n];this.sendRequest("g",i.request,r=>{delete this.outstandingGets_[n],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),i.onComplete&&i.onComplete(r)})}sendListen_(n){let i=n.query,r=i._path.toString(),o=i._queryIdentifier;this.log_("Listen on "+r+" for "+o);let s={p:r},a="q";n.tag&&(s.q=i._queryObject,s.t=n.tag),s.h=n.hashFn(),this.sendRequest(a,s,l=>{let c=l.d,d=l.s;t.warnOnListenWarnings_(c,i),(this.listens.get(r)&&this.listens.get(r).get(o))===n&&(this.log_("listen response",l),d!=="ok"&&this.removeListen_(r,o),n.onComplete&&n.onComplete(d,c))})}static warnOnListenWarnings_(n,i){if(n&&typeof n=="object"&&ct(n,"w")){let r=an(n,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){let o='".indexOn": "'+i._queryParams.getIndex().toString()+'"',s=i._path.toString();ze(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(n){this.authToken_=n,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(n)}reduceReconnectDelayIfAdminCredential_(n){(n&&n.length===40||rd(n))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=Kp)}refreshAppCheckToken(n){this.appCheckToken_=n,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let n=this.authToken_,i=id(n)?"auth":"gauth",r={cred:n};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(i,r,o=>{let s=o.s,a=o.d||"error";this.authToken_===n&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},n=>{let i=n.s,r=n.d||"error";i==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(i,r)})}unlisten(n,i){let r=n._path.toString(),o=n._queryIdentifier;this.log_("Unlisten called for "+r+" "+o),y(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,o)&&this.connected_&&this.sendUnlisten_(r,o,n._queryObject,i)}sendUnlisten_(n,i,r,o){this.log_("Unlisten on "+n+" for "+i);let s={p:n},a="n";o&&(s.q=r,s.t=o),this.sendRequest(a,s)}onDisconnectPut(n,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",n,i,r):this.onDisconnectRequestQueue_.push({pathString:n,action:"o",data:i,onComplete:r})}onDisconnectMerge(n,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",n,i,r):this.onDisconnectRequestQueue_.push({pathString:n,action:"om",data:i,onComplete:r})}onDisconnectCancel(n,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",n,null,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"oc",data:null,onComplete:i})}sendOnDisconnect_(n,i,r,o){let s={p:i,d:r};this.log_("onDisconnect "+n,s),this.sendRequest(n,s,a=>{o&&setTimeout(()=>{o(a.s,a.d)},Math.floor(0))})}put(n,i,r,o){this.putInternal("p",n,i,r,o)}merge(n,i,r,o){this.putInternal("m",n,i,r,o)}putInternal(n,i,r,o,s){this.initConnection_();let a={p:i,d:r};s!==void 0&&(a.h=s),this.outstandingPuts_.push({action:n,request:a,onComplete:o}),this.outstandingPutCount_++;let l=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(l):this.log_("Buffering put: "+i)}sendPut_(n){let i=this.outstandingPuts_[n].action,r=this.outstandingPuts_[n].request,o=this.outstandingPuts_[n].onComplete;this.outstandingPuts_[n].queued=this.connected_,this.sendRequest(i,r,s=>{this.log_(i+" response",s),delete this.outstandingPuts_[n],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),o&&o(s.s,s.d)})}reportStats(n){if(this.connected_){let i={c:n};this.log_("reportStats",i),this.sendRequest("s",i,r=>{if(r.s!=="ok"){let s=r.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(n){if("r"in n){this.log_("from server: "+ge(n));let i=n.r,r=this.requestCBHash_[i];r&&(delete this.requestCBHash_[i],r(n.b))}else{if("error"in n)throw"A server-side error has occurred: "+n.error;"a"in n&&this.onDataPush_(n.a,n.b)}}onDataPush_(n,i){this.log_("handleServerMessage",n,i),n==="d"?this.onDataUpdate_(i.p,i.d,!1,i.t):n==="m"?this.onDataUpdate_(i.p,i.d,!0,i.t):n==="c"?this.onListenRevoked_(i.p,i.q):n==="ac"?this.onAuthRevoked_(i.s,i.d):n==="apc"?this.onAppCheckRevoked_(i.s,i.d):n==="sd"?this.onSecurityDebugPacket_(i):ol("Unrecognized action received from server: "+ge(n)+`
Are you using the latest client?`)}onReady_(n,i){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(n),this.lastSessionId=i,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(n){y(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(n))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(n){n&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Hi,this.realtime_||this.scheduleConnect_(0)),this.visible_=n}onOnline_(n){n?(this.log_("Browser went online."),this.reconnectDelay_=Hi,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>wC&&(this.reconnectDelay_=Hi),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let n=new Date().getTime()-this.lastConnectionAttemptTime_,i=Math.max(0,this.reconnectDelay_-n);i=Math.random()*i,this.log_("Trying to reconnect in "+i+"ms"),this.scheduleConnect_(i),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*bC)}this.onConnectStatus_(!1)}establishConnection_(){return S(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let n=this.onDataMessage_.bind(this),i=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),o=this.id+":"+t.nextConnectionId_++,s=this.lastSessionId,a=!1,l=null,c=function(){l?l.close():(a=!0,r())},d=function(f){y(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(f)};this.realtime_={close:c,sendRequest:d};let m=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[f,v]=yield Promise.all([this.authTokenProvider_.getToken(m),this.appCheckTokenProvider_.getToken(m)]);a?Ee("getToken() completed but was canceled"):(Ee("getToken() completed. Creating connection."),this.authToken_=f&&f.accessToken,this.appCheckToken_=v&&v.token,l=new hl(o,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,n,i,r,w=>{ze(w+" ("+this.repoInfo_.toString()+")"),this.interrupt(EC)},s))}catch(f){this.log_("Failed to get token: "+f),a||(this.repoInfo_.nodeAdmin&&ze(f),c())}}})}interrupt(n){Ee("Interrupting connection for reason: "+n),this.interruptReasons_[n]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(n){Ee("Resuming connection for reason: "+n),delete this.interruptReasons_[n],Yr(this.interruptReasons_)&&(this.reconnectDelay_=Hi,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(n){let i=n-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:i})}cancelSentTransactions_(){for(let n=0;n<this.outstandingPuts_.length;n++){let i=this.outstandingPuts_[n];i&&"h"in i.request&&i.queued&&(i.onComplete&&i.onComplete("disconnect"),delete this.outstandingPuts_[n],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(n,i){let r;i?r=i.map(s=>lc(s)).join("$"):r="default";let o=this.removeListen_(n,r);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(n,i){let r=new H(n).toString(),o;if(this.listens.has(r)){let s=this.listens.get(r);o=s.get(i),s.delete(i),s.size===0&&this.listens.delete(r)}else o=void 0;return o}onAuthRevoked_(n,i){Ee("Auth token revoked: "+n+"/"+i),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(n==="invalid_token"||n==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=qp&&(this.reconnectDelay_=Kp,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(n,i){Ee("App check token revoked: "+n+"/"+i),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(n==="invalid_token"||n==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=qp&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(n){this.securityDebugCallback_?this.securityDebugCallback_(n):"msg"in n&&console.log("FIREBASE: "+n.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let n of this.listens.values())for(let i of n.values())this.sendListen_(i);for(let n=0;n<this.outstandingPuts_.length;n++)this.outstandingPuts_[n]&&this.sendPut_(n);for(;this.onDisconnectRequestQueue_.length;){let n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}for(let n=0;n<this.outstandingGets_.length;n++)this.outstandingGets_[n]&&this.sendGet_(n)}sendConnectStats_(){let n={},i="js";xt()&&(this.repoInfo_.nodeAdmin?i="admin_node":i="node"),n["sdk."+i+"."+sc.replace(/\./g,"-")]=1,xs()?n["framework.cordova"]=1:nd()&&(n["framework.reactnative"]=1),this.reportStats(n)}shouldReconnect_(){let n=Do.getInstance().currentlyOnline();return Yr(this.interruptReasons_)&&n}}t.nextPersistentConnectionId_=0,t.nextConnectionId_=0;return t})(),B=class t{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new t(e,n)}};var hi=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){let i=new B(gn,e),r=new B(gn,n);return this.compare(i,r)!==0}minPost(){return B.MIN}};var ko,Ro=class extends hi{static get __EMPTY_NODE(){return ko}static set __EMPTY_NODE(e){ko=e}compare(e,n){return Nn(e.name,n.name)}isDefinedOn(e){throw ti("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return B.MIN}maxPost(){return new B(Xt,ko)}makePost(e,n){return y(typeof e=="string","KeyIndex indexValue must always be a string."),new B(e,ko)}toString(){return".key"}},Vt=new Ro;var ui=class{constructor(e,n,i,r,o=null){this.isReverse_=r,this.resultGenerator_=o,this.nodeStack_=[];let s=1;for(;!e.isEmpty();)if(e=e,s=n?i(e.key,n):1,r&&(s*=-1),s<0)this.isReverse_?e=e.left:e=e.right;else if(s===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},Ct=(()=>{class t{constructor(n,i,r,o,s){this.key=n,this.value=i,this.color=r??t.RED,this.left=o??ht.EMPTY_NODE,this.right=s??ht.EMPTY_NODE}copy(n,i,r,o,s){return new t(n??this.key,i??this.value,r??this.color,o??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||!!n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,i,r){let o=this,s=r(n,o.key);return s<0?o=o.copy(null,null,null,o.left.insert(n,i,r),null):s===0?o=o.copy(null,i,null,null,null):o=o.copy(null,null,null,null,o.right.insert(n,i,r)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return ht.EMPTY_NODE;let n=this;return!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.removeMin_(),null),n.fixUp_()}remove(n,i){let r,o;if(r=this,i(n,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(n,i),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),i(n,r.key)===0){if(r.right.isEmpty())return ht.EMPTY_NODE;o=r.right.min_(),r=r.copy(o.key,o.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(n,i))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let n=this;return n.right.isRed_()&&!n.left.isRed_()&&(n=n.rotateLeft_()),n.left.isRed_()&&n.left.left.isRed_()&&(n=n.rotateRight_()),n.left.isRed_()&&n.right.isRed_()&&(n=n.colorFlip_()),n}moveRedLeft_(){let n=this.colorFlip_();return n.right.left.isRed_()&&(n=n.copy(null,null,null,null,n.right.rotateRight_()),n=n.rotateLeft_(),n=n.colorFlip_()),n}moveRedRight_(){let n=this.colorFlip_();return n.left.left.isRed_()&&(n=n.rotateRight_(),n=n.colorFlip_()),n}rotateLeft_(){let n=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight_(){let n=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip_(){let n=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,i)}checkMaxDepth_(){let n=this.check_();return Math.pow(2,n)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let n=this.left.check_();if(n!==this.right.check_())throw new Error("Black depths differ");return n+(this.isRed_()?0:1)}}return t.RED=!0,t.BLACK=!1,t})(),fl=class{copy(e,n,i,r,o){return this}insert(e,n,i){return new Ct(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},ht=class t{constructor(e,n=t.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Ct.BLACK,null,null))}remove(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Ct.BLACK,null,null))}get(e){let n,i=this.root_;for(;!i.isEmpty();){if(n=this.comparator_(e,i.key),n===0)return i.value;n<0?i=i.left:n>0&&(i=i.right)}return null}getPredecessorKey(e){let n,i=this.root_,r=null;for(;!i.isEmpty();)if(n=this.comparator_(e,i.key),n===0){if(i.left.isEmpty())return r?r.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}else n<0?i=i.left:n>0&&(r=i,i=i.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new ui(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new ui(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new ui(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new ui(this.root_,null,this.comparator_,!0,e)}};ht.EMPTY_NODE=new fl;function SC(t,e){return Nn(t.name,e.name)}function pc(t,e){return Nn(t,e)}var gl;function IC(t){gl=t}var Om=function(t){return typeof t=="number"?"number:"+_m(t):"string:"+t},Fm=function(t){if(t.isLeafNode()){let e=t.val();y(typeof e=="string"||typeof e=="number"||typeof e=="object"&&ct(e,".sv"),"Priority must be a string or number.")}else y(t===gl||t.isEmpty(),"priority of unexpected type.");y(t===gl||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var Zp,pi=(()=>{class t{constructor(n,i=t.__childrenNodeConstructor.EMPTY_NODE){this.value_=n,this.priorityNode_=i,this.lazyHash_=null,y(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),Fm(this.priorityNode_)}static set __childrenNodeConstructor(n){Zp=n}static get __childrenNodeConstructor(){return Zp}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(n){return new t(this.value_,n)}getImmediateChild(n){return n===".priority"?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}getChild(n){return L(n)?this:F(n)===".priority"?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(n,i){return null}updateImmediateChild(n,i){return n===".priority"?this.updatePriority(i):i.isEmpty()&&n!==".priority"?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(n,i).updatePriority(this.priorityNode_)}updateChild(n,i){let r=F(n);return r===null?i:i.isEmpty()&&r!==".priority"?this:(y(r!==".priority"||_n(n)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(Q(n),i)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(n,i){return!1}val(n){return n&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let n="";this.priorityNode_.isEmpty()||(n+="priority:"+Om(this.priorityNode_.val())+":");let i=typeof this.value_;n+=i+":",i==="number"?n+=_m(this.value_):n+=this.value_,this.lazyHash_=mm(n)}return this.lazyHash_}getValue(){return this.value_}compareTo(n){return n===t.__childrenNodeConstructor.EMPTY_NODE?1:n instanceof t.__childrenNodeConstructor?-1:(y(n.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(n))}compareToLeafNode_(n){let i=typeof n.value_,r=typeof this.value_,o=t.VALUE_TYPE_ORDER.indexOf(i),s=t.VALUE_TYPE_ORDER.indexOf(r);return y(o>=0,"Unknown leaf type: "+i),y(s>=0,"Unknown leaf type: "+r),o===s?r==="object"?0:this.value_<n.value_?-1:this.value_===n.value_?0:1:s-o}withIndex(){return this}isIndexed(){return!0}equals(n){if(n===this)return!0;if(n.isLeafNode()){let i=n;return this.value_===i.value_&&this.priorityNode_.equals(i.priorityNode_)}else return!1}}t.VALUE_TYPE_ORDER=["object","boolean","number","string"];return t})(),Lm,Um;function TC(t){Lm=t}function kC(t){Um=t}var _l=class extends hi{compare(e,n){let i=e.node.getPriority(),r=n.node.getPriority(),o=i.compareTo(r);return o===0?Nn(e.name,n.name):o}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return B.MIN}maxPost(){return new B(Xt,new pi("[PRIORITY-POST]",Um))}makePost(e,n){let i=Lm(e);return new B(n,new pi("[PRIORITY-POST]",i))}toString(){return".priority"}},ie=new _l;var MC=Math.log(2),vl=class{constructor(e){let n=o=>parseInt(Math.log(o)/MC,10),i=o=>parseInt(Array(o+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;let r=i(this.count);this.bits_=e+1&r}nextBitIsOne(){let e=!(this.bits_&1<<this.current_);return this.current_--,e}},Po=function(t,e,n,i){t.sort(e);let r=function(l,c){let d=c-l,m,f;if(d===0)return null;if(d===1)return m=t[l],f=n?n(m):m,new Ct(f,m.node,Ct.BLACK,null,null);{let v=parseInt(d/2,10)+l,w=r(l,v),R=r(v+1,c);return m=t[v],f=n?n(m):m,new Ct(f,m.node,Ct.BLACK,w,R)}},o=function(l){let c=null,d=null,m=t.length,f=function(w,R){let P=m-w,ye=m;m-=w;let Ae=r(P+1,ye),j=t[P],ue=n?n(j):j;v(new Ct(ue,j.node,R,null,Ae))},v=function(w){c?(c.left=w,c=w):(d=w,c=w)};for(let w=0;w<l.count;++w){let R=l.nextBitIsOne(),P=Math.pow(2,l.count-(w+1));R?f(P,Ct.BLACK):(f(P,Ct.BLACK),f(P,Ct.RED))}return d},s=new vl(t.length),a=o(s);return new ht(i||e,a)};var Qa,li={},mi=class t{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return y(li&&ie,"ChildrenNode.ts has not been loaded"),Qa=Qa||new t({".priority":li},{".priority":ie}),Qa}get(e){let n=an(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof ht?n:null}hasIndex(e){return ct(this.indexSet_,e.toString())}addIndex(e,n){y(e!==Vt,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let i=[],r=!1,o=n.getIterator(B.Wrap),s=o.getNext();for(;s;)r=r||e.isDefinedOn(s.node),i.push(s),s=o.getNext();let a;r?a=Po(i,e.getCompare()):a=li;let l=e.toString(),c=Object.assign({},this.indexSet_);c[l]=e;let d=Object.assign({},this.indexes_);return d[l]=a,new t(d,c)}addToIndexes(e,n){let i=Di(this.indexes_,(r,o)=>{let s=an(this.indexSet_,o);if(y(s,"Missing index implementation for "+o),r===li)if(s.isDefinedOn(e.node)){let a=[],l=n.getIterator(B.Wrap),c=l.getNext();for(;c;)c.name!==e.name&&a.push(c),c=l.getNext();return a.push(e),Po(a,s.getCompare())}else return li;else{let a=n.get(e.name),l=r;return a&&(l=l.remove(new B(e.name,a))),l.insert(e,e.node)}});return new t(i,this.indexSet_)}removeFromIndexes(e,n){let i=Di(this.indexes_,r=>{if(r===li)return r;{let o=n.get(e.name);return o?r.remove(new B(e.name,o)):r}});return new t(i,this.indexSet_)}};var Gi,D=(()=>{class t{constructor(n,i,r){this.children_=n,this.priorityNode_=i,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&Fm(this.priorityNode_),this.children_.isEmpty()&&y(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Gi||(Gi=new t(new ht(pc),null,mi.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Gi}updatePriority(n){return this.children_.isEmpty()?this:new t(this.children_,n,this.indexMap_)}getImmediateChild(n){if(n===".priority")return this.getPriority();{let i=this.children_.get(n);return i===null?Gi:i}}getChild(n){let i=F(n);return i===null?this:this.getImmediateChild(i).getChild(Q(n))}hasChild(n){return this.children_.get(n)!==null}updateImmediateChild(n,i){if(y(i,"We should always be passing snapshot nodes"),n===".priority")return this.updatePriority(i);{let r=new B(n,i),o,s;i.isEmpty()?(o=this.children_.remove(n),s=this.indexMap_.removeFromIndexes(r,this.children_)):(o=this.children_.insert(n,i),s=this.indexMap_.addToIndexes(r,this.children_));let a=o.isEmpty()?Gi:this.priorityNode_;return new t(o,a,s)}}updateChild(n,i){let r=F(n);if(r===null)return i;{y(F(n)!==".priority"||_n(n)===1,".priority must be the last token in a path");let o=this.getImmediateChild(r).updateChild(Q(n),i);return this.updateImmediateChild(r,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(n){if(this.isEmpty())return null;let i={},r=0,o=0,s=!0;if(this.forEachChild(ie,(a,l)=>{i[a]=l.val(n),r++,s&&t.INTEGER_REGEXP_.test(a)?o=Math.max(o,Number(a)):s=!1}),!n&&s&&o<2*r){let a=[];for(let l in i)a[l]=i[l];return a}else return n&&!this.getPriority().isEmpty()&&(i[".priority"]=this.getPriority().val()),i}hash(){if(this.lazyHash_===null){let n="";this.getPriority().isEmpty()||(n+="priority:"+Om(this.getPriority().val())+":"),this.forEachChild(ie,(i,r)=>{let o=r.hash();o!==""&&(n+=":"+i+":"+o)}),this.lazyHash_=n===""?"":mm(n)}return this.lazyHash_}getPredecessorChildName(n,i,r){let o=this.resolveIndex_(r);if(o){let s=o.getPredecessorKey(new B(n,i));return s?s.name:null}else return this.children_.getPredecessorKey(n)}getFirstChildName(n){let i=this.resolveIndex_(n);if(i){let r=i.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(n){let i=this.getFirstChildName(n);return i?new B(i,this.children_.get(i)):null}getLastChildName(n){let i=this.resolveIndex_(n);if(i){let r=i.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(n){let i=this.getLastChildName(n);return i?new B(i,this.children_.get(i)):null}forEachChild(n,i){let r=this.resolveIndex_(n);return r?r.inorderTraversal(o=>i(o.name,o.node)):this.children_.inorderTraversal(i)}getIterator(n){return this.getIteratorFrom(n.minPost(),n)}getIteratorFrom(n,i){let r=this.resolveIndex_(i);if(r)return r.getIteratorFrom(n,o=>o);{let o=this.children_.getIteratorFrom(n.name,B.Wrap),s=o.peek();for(;s!=null&&i.compare(s,n)<0;)o.getNext(),s=o.peek();return o}}getReverseIterator(n){return this.getReverseIteratorFrom(n.maxPost(),n)}getReverseIteratorFrom(n,i){let r=this.resolveIndex_(i);if(r)return r.getReverseIteratorFrom(n,o=>o);{let o=this.children_.getReverseIteratorFrom(n.name,B.Wrap),s=o.peek();for(;s!=null&&i.compare(s,n)>0;)o.getNext(),s=o.peek();return o}}compareTo(n){return this.isEmpty()?n.isEmpty()?0:-1:n.isLeafNode()||n.isEmpty()?1:n===fr?-1:0}withIndex(n){if(n===Vt||this.indexMap_.hasIndex(n))return this;{let i=this.indexMap_.addIndex(n,this.children_);return new t(this.children_,this.priorityNode_,i)}}isIndexed(n){return n===Vt||this.indexMap_.hasIndex(n)}equals(n){if(n===this)return!0;if(n.isLeafNode())return!1;{let i=n;if(this.getPriority().equals(i.getPriority()))if(this.children_.count()===i.children_.count()){let r=this.getIterator(ie),o=i.getIterator(ie),s=r.getNext(),a=o.getNext();for(;s&&a;){if(s.name!==a.name||!s.node.equals(a.node))return!1;s=r.getNext(),a=o.getNext()}return s===null&&a===null}else return!1;else return!1}}resolveIndex_(n){return n===Vt?null:this.indexMap_.get(n.toString())}}return t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t})(),yl=class extends D{constructor(){super(new ht(pc),D.EMPTY_NODE,mi.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return D.EMPTY_NODE}isEmpty(){return!1}},fr=new yl;Object.defineProperties(B,{MIN:{value:new B(gn,D.EMPTY_NODE)},MAX:{value:new B(Xt,fr)}});Ro.__EMPTY_NODE=D.EMPTY_NODE;pi.__childrenNodeConstructor=D;IC(fr);kC(fr);var zC=!0;function he(t,e=null){if(t===null)return D.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),y(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){let n=t;return new pi(n,he(e))}if(!(t instanceof Array)&&zC){let n=[],i=!1;if(Se(t,(s,a)=>{if(s.substring(0,1)!=="."){let l=he(a);l.isEmpty()||(i=i||!l.getPriority().isEmpty(),n.push(new B(s,l)))}}),n.length===0)return D.EMPTY_NODE;let o=Po(n,SC,s=>s.name,pc);if(i){let s=Po(n,ie.getCompare());return new D(o,he(e),new mi({".priority":s},{".priority":ie}))}else return new D(o,he(e),mi.Default)}else{let n=D.EMPTY_NODE;return Se(t,(i,r)=>{if(ct(t,i)&&i.substring(0,1)!=="."){let o=he(r);(o.isLeafNode()||!o.isEmpty())&&(n=n.updateImmediateChild(i,o))}}),n.updatePriority(he(e))}}TC(he);var tr=class extends hi{constructor(e){super(),this.indexPath_=e,y(!L(e)&&F(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){let i=this.extractChild(e.node),r=this.extractChild(n.node),o=i.compareTo(r);return o===0?Nn(e.name,n.name):o}makePost(e,n){let i=he(e),r=D.EMPTY_NODE.updateChild(this.indexPath_,i);return new B(n,r)}maxPost(){let e=D.EMPTY_NODE.updateChild(this.indexPath_,fr);return new B(Xt,e)}toString(){return er(this.indexPath_,0).join("/")}};var Cl=class extends hi{compare(e,n){let i=e.node.compareTo(n.node);return i===0?Nn(e.name,n.name):i}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return B.MIN}maxPost(){return B.MAX}makePost(e,n){let i=he(e);return new B(n,i)}toString(){return".value"}},mc=new Cl;function Bm(t){return{type:"value",snapshotNode:t}}function fi(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function nr(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function ir(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function AC(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}var rr=class{constructor(e){this.index_=e}updateChild(e,n,i,r,o,s){y(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");let a=e.getImmediateChild(n);return a.getChild(r).equals(i.getChild(r))&&a.isEmpty()===i.isEmpty()||(s!=null&&(i.isEmpty()?e.hasChild(n)?s.trackChildChange(nr(n,a)):y(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?s.trackChildChange(fi(n,i)):s.trackChildChange(ir(n,i,a))),e.isLeafNode()&&i.isEmpty())?e:e.updateImmediateChild(n,i).withIndex(this.index_)}updateFullNode(e,n,i){return i!=null&&(e.isLeafNode()||e.forEachChild(ie,(r,o)=>{n.hasChild(r)||i.trackChildChange(nr(r,o))}),n.isLeafNode()||n.forEachChild(ie,(r,o)=>{if(e.hasChild(r)){let s=e.getImmediateChild(r);s.equals(o)||i.trackChildChange(ir(r,o,s))}else i.trackChildChange(fi(r,o))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?D.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}};var Oo=class t{constructor(e){this.indexedFilter_=new rr(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){let n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,i=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&i}updateChild(e,n,i,r,o,s){return this.matches(new B(n,i))||(i=D.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,i,r,o,s)}updateFullNode(e,n,i){n.isLeafNode()&&(n=D.EMPTY_NODE);let r=n.withIndex(this.index_);r=r.updatePriority(D.EMPTY_NODE);let o=this;return n.forEachChild(ie,(s,a)=>{o.matches(new B(s,a))||(r=r.updateImmediateChild(s,D.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,r,i)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){let n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){let n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}};var bl=class{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{let i=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?i<=0:i<0},this.withinEndPost=n=>{let i=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?i<=0:i<0},this.rangedFilter_=new Oo(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,i,r,o,s){return this.rangedFilter_.matches(new B(n,i))||(i=D.EMPTY_NODE),e.getImmediateChild(n).equals(i)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,i,r,o,s):this.fullLimitUpdateChild_(e,n,i,o,s)}updateFullNode(e,n,i){let r;if(n.isLeafNode()||n.isEmpty())r=D.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){r=D.EMPTY_NODE.withIndex(this.index_);let o;this.reverse_?o=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):o=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let s=0;for(;o.hasNext()&&s<this.limit_;){let a=o.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))r=r.updateImmediateChild(a.name,a.node),s++;else break;else continue}}else{r=n.withIndex(this.index_),r=r.updatePriority(D.EMPTY_NODE);let o;this.reverse_?o=r.getReverseIterator(this.index_):o=r.getIterator(this.index_);let s=0;for(;o.hasNext();){let a=o.getNext();s<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?s++:r=r.updateImmediateChild(a.name,D.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,i)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,i,r,o){let s;if(this.reverse_){let m=this.index_.getCompare();s=(f,v)=>m(v,f)}else s=this.index_.getCompare();let a=e;y(a.numChildren()===this.limit_,"");let l=new B(n,i),c=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),d=this.rangedFilter_.matches(l);if(a.hasChild(n)){let m=a.getImmediateChild(n),f=r.getChildAfterChild(this.index_,c,this.reverse_);for(;f!=null&&(f.name===n||a.hasChild(f.name));)f=r.getChildAfterChild(this.index_,f,this.reverse_);let v=f==null?1:s(f,l);if(d&&!i.isEmpty()&&v>=0)return o?.trackChildChange(ir(n,i,m)),a.updateImmediateChild(n,i);{o?.trackChildChange(nr(n,m));let R=a.updateImmediateChild(n,D.EMPTY_NODE);return f!=null&&this.rangedFilter_.matches(f)?(o?.trackChildChange(fi(f.name,f.node)),R.updateImmediateChild(f.name,f.node)):R}}else return i.isEmpty()?e:d&&s(c,l)>=0?(o!=null&&(o.trackChildChange(nr(c.name,c.node)),o.trackChildChange(fi(n,i))),a.updateImmediateChild(n,i).updateImmediateChild(c.name,D.EMPTY_NODE)):e}};var or=class t{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ie}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return y(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return y(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:gn}hasEnd(){return this.endSet_}getIndexEndValue(){return y(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return y(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Xt}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return y(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===ie}copy(){let e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}};function xC(t){return t.loadsAllData()?new rr(t.getIndex()):t.hasLimit()?new bl(t):new Oo(t)}function NC(t,e){let n=t.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="l",n}function DC(t,e){let n=t.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="r",n}function wl(t,e,n){let i=t.copy();return i.startSet_=!0,e===void 0&&(e=null),i.indexStartValue_=e,n!=null?(i.startNameSet_=!0,i.indexStartName_=n):(i.startNameSet_=!1,i.indexStartName_=""),i}function RC(t,e,n){let i;return t.index_===Vt||n?i=wl(t,e,n):i=wl(t,e,Xt),i.startAfterSet_=!0,i}function El(t,e,n){let i=t.copy();return i.endSet_=!0,e===void 0&&(e=null),i.indexEndValue_=e,n!==void 0?(i.endNameSet_=!0,i.indexEndName_=n):(i.endNameSet_=!1,i.indexEndName_=""),i}function PC(t,e,n){let i;return t.index_===Vt||n?i=El(t,e,n):i=El(t,e,gn),i.endBeforeSet_=!0,i}function ts(t,e){let n=t.copy();return n.index_=e,n}function Yp(t){let e={};if(t.isDefault())return e;let n;if(t.index_===ie?n="$priority":t.index_===mc?n="$value":t.index_===Vt?n="$key":(y(t.index_ instanceof tr,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=ge(n),t.startSet_){let i=t.startAfterSet_?"startAfter":"startAt";e[i]=ge(t.indexStartValue_),t.startNameSet_&&(e[i]+=","+ge(t.indexStartName_))}if(t.endSet_){let i=t.endBeforeSet_?"endBefore":"endAt";e[i]=ge(t.indexEndValue_),t.endNameSet_&&(e[i]+=","+ge(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function Xp(t){let e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==ie&&(e.i=t.index_.toString()),e}var Sl=class t extends xo{constructor(e,n,i,r){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=i,this.appCheckTokenProvider_=r,this.log_=mr("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(y(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,i,r){let o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);let s=t.getListenId_(e,i),a={};this.listens_[s]=a;let l=Yp(e._queryParams);this.restRequest_(o+".json",l,(c,d)=>{let m=d;if(c===404&&(m=null,c=null),c===null&&this.onDataUpdate_(o,m,!1,i),an(this.listens_,s)===a){let f;c?c===401?f="permission_denied":f="rest_error:"+c:f="ok",r(f,null)}})}unlisten(e,n){let i=t.getListenId_(e,n);delete this.listens_[i]}get(e){let n=Yp(e._queryParams),i=e._path.toString(),r=new be;return this.restRequest_(i+".json",n,(o,s)=>{let a=s;o===404&&(a=null,o=null),o===null?(this.onDataUpdate_(i,a,!1,null),r.resolve(a)):r.reject(new Error(a))}),r.promise}refreshAuthToken(e){}restRequest_(e,n={},i){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,o])=>{r&&r.accessToken&&(n.auth=r.accessToken),o&&o.token&&(n.ac=o.token);let s=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+sd(n);this.log_("Sending REST request for "+s);let a=new XMLHttpRequest;a.onreadystatechange=()=>{if(i&&a.readyState===4){this.log_("REST Response for "+s+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=Zr(a.responseText)}catch{ze("Failed to parse JSON response for "+s+": "+a.responseText)}i(null,l)}else a.status!==401&&a.status!==404&&ze("Got unsuccessful REST response for "+s+" Status: "+a.status),i(a.status);i=null}},a.open("GET",s,!0),a.send()})}};var Il=class{constructor(){this.rootNode_=D.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}};function Fo(){return{value:null,children:new Map}}function bi(t,e,n){if(L(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{let i=F(e);t.children.has(i)||t.children.set(i,Fo());let r=t.children.get(i);e=Q(e),bi(r,e,n)}}function Tl(t,e){if(L(e))return t.value=null,t.children.clear(),!0;if(t.value!==null){if(t.value.isLeafNode())return!1;{let n=t.value;return t.value=null,n.forEachChild(ie,(i,r)=>{bi(t,new H(i),r)}),Tl(t,e)}}else if(t.children.size>0){let n=F(e);return e=Q(e),t.children.has(n)&&Tl(t.children.get(n),e)&&t.children.delete(n),t.children.size===0}else return!0}function kl(t,e,n){t.value!==null?n(e,t.value):OC(t,(i,r)=>{let o=new H(e.toString()+"/"+i);kl(r,o,n)})}function OC(t,e){t.children.forEach((n,i)=>{e(i,n)})}var Ml=class{constructor(e){this.collection_=e,this.last_=null}get(){let e=this.collection_.get(),n=Object.assign({},e);return this.last_&&Se(this.last_,(i,r)=>{n[i]=n[i]-r}),this.last_=e,n}};var Qp=10*1e3,FC=30*1e3,LC=5*60*1e3,zl=class{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new Ml(e);let i=Qp+(FC-Qp)*Math.random();qi(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){let e=this.statsListener_.get(),n={},i=!1;Se(e,(r,o)=>{o>0&&ct(this.statsToReport_,r)&&(n[r]=o,i=!0)}),i&&this.server_.reportStats(n),qi(this.reportStats_.bind(this),Math.floor(Math.random()*2*LC))}};var Bt=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}(Bt||{});function fc(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function gc(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function _c(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}var Al=class t{constructor(e,n,i){this.path=e,this.affectedTree=n,this.revert=i,this.type=Bt.ACK_USER_WRITE,this.source=fc()}operationForChild(e){if(L(this.path)){if(this.affectedTree.value!=null)return y(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let n=this.affectedTree.subtree(new H(e));return new t(W(),n,this.revert)}}else return y(F(this.path)===e,"operationForChild called for unrelated child."),new t(Q(this.path),this.affectedTree,this.revert)}};var Lo=class t{constructor(e,n){this.source=e,this.path=n,this.type=Bt.LISTEN_COMPLETE}operationForChild(e){return L(this.path)?new t(this.source,W()):new t(this.source,Q(this.path))}};var gi=class t{constructor(e,n,i){this.source=e,this.path=n,this.snap=i,this.type=Bt.OVERWRITE}operationForChild(e){return L(this.path)?new t(this.source,W(),this.snap.getImmediateChild(e)):new t(this.source,Q(this.path),this.snap)}};var sr=class t{constructor(e,n,i){this.source=e,this.path=n,this.children=i,this.type=Bt.MERGE}operationForChild(e){if(L(this.path)){let n=this.children.subtree(new H(e));return n.isEmpty()?null:n.value?new gi(this.source,W(),n.value):new t(this.source,W(),n)}else return y(F(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,Q(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var $t=class{constructor(e,n,i){this.node_=e,this.fullyInitialized_=n,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(L(e))return this.isFullyInitialized()&&!this.filtered_;let n=F(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}};var xl=class{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}};function UC(t,e,n,i){let r=[],o=[];return e.forEach(s=>{s.type==="child_changed"&&t.index_.indexedValueChanged(s.oldSnap,s.snapshotNode)&&o.push(AC(s.childName,s.snapshotNode))}),Ki(t,r,"child_removed",e,i,n),Ki(t,r,"child_added",e,i,n),Ki(t,r,"child_moved",o,i,n),Ki(t,r,"child_changed",e,i,n),Ki(t,r,"value",e,i,n),r}function Ki(t,e,n,i,r,o){let s=i.filter(a=>a.type===n);s.sort((a,l)=>VC(t,a,l)),s.forEach(a=>{let l=BC(t,a,o);r.forEach(c=>{c.respondsTo(a.type)&&e.push(c.createEvent(l,t.query_))})})}function BC(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function VC(t,e,n){if(e.childName==null||n.childName==null)throw ti("Should only compare child_ events.");let i=new B(e.childName,e.snapshotNode),r=new B(n.childName,n.snapshotNode);return t.index_.compare(i,r)}function ns(t,e){return{eventCache:t,serverCache:e}}function Yi(t,e,n,i){return ns(new $t(e,n,i),t.serverCache)}function Vm(t,e,n,i){return ns(t.eventCache,new $t(e,n,i))}function Uo(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function xn(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}var Ja,jC=()=>(Ja||(Ja=new ht(By)),Ja),Ue=class t{constructor(e,n=jC()){this.value=e,this.children=n}static fromObject(e){let n=new t(null);return Se(e,(i,r)=>{n=n.set(new H(i),r)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:W(),value:this.value};if(L(e))return null;{let i=F(e),r=this.children.get(i);if(r!==null){let o=r.findRootMostMatchingPathAndValue(Q(e),n);return o!=null?{path:ce(new H(i),o.path),value:o.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(L(e))return this;{let n=F(e),i=this.children.get(n);return i!==null?i.subtree(Q(e)):new t(null)}}set(e,n){if(L(e))return new t(n,this.children);{let i=F(e),o=(this.children.get(i)||new t(null)).set(Q(e),n),s=this.children.insert(i,o);return new t(this.value,s)}}remove(e){if(L(e))return this.children.isEmpty()?new t(null):new t(null,this.children);{let n=F(e),i=this.children.get(n);if(i){let r=i.remove(Q(e)),o;return r.isEmpty()?o=this.children.remove(n):o=this.children.insert(n,r),this.value===null&&o.isEmpty()?new t(null):new t(this.value,o)}else return this}}get(e){if(L(e))return this.value;{let n=F(e),i=this.children.get(n);return i?i.get(Q(e)):null}}setTree(e,n){if(L(e))return n;{let i=F(e),o=(this.children.get(i)||new t(null)).setTree(Q(e),n),s;return o.isEmpty()?s=this.children.remove(i):s=this.children.insert(i,o),new t(this.value,s)}}fold(e){return this.fold_(W(),e)}fold_(e,n){let i={};return this.children.inorderTraversal((r,o)=>{i[r]=o.fold_(ce(e,r),n)}),n(e,this.value,i)}findOnPath(e,n){return this.findOnPath_(e,W(),n)}findOnPath_(e,n,i){let r=this.value?i(n,this.value):!1;if(r)return r;if(L(e))return null;{let o=F(e),s=this.children.get(o);return s?s.findOnPath_(Q(e),ce(n,o),i):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,W(),n)}foreachOnPath_(e,n,i){if(L(e))return this;{this.value&&i(n,this.value);let r=F(e),o=this.children.get(r);return o?o.foreachOnPath_(Q(e),ce(n,r),i):new t(null)}}foreach(e){this.foreach_(W(),e)}foreach_(e,n){this.children.inorderTraversal((i,r)=>{r.foreach_(ce(e,i),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,i)=>{i.value&&e(n,i.value)})}};var bt=class t{constructor(e){this.writeTree_=e}static empty(){return new t(new Ue(null))}};function Xi(t,e,n){if(L(e))return new bt(new Ue(n));{let i=t.writeTree_.findRootMostValueAndPath(e);if(i!=null){let r=i.path,o=i.value,s=Le(r,e);return o=o.updateChild(s,n),new bt(t.writeTree_.set(r,o))}else{let r=new Ue(n),o=t.writeTree_.setTree(e,r);return new bt(o)}}}function Nl(t,e,n){let i=t;return Se(n,(r,o)=>{i=Xi(i,ce(e,r),o)}),i}function Jp(t,e){if(L(e))return bt.empty();{let n=t.writeTree_.setTree(e,new Ue(null));return new bt(n)}}function Dl(t,e){return Dn(t,e)!=null}function Dn(t,e){let n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(Le(n.path,e)):null}function em(t){let e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(ie,(i,r)=>{e.push(new B(i,r))}):t.writeTree_.children.inorderTraversal((i,r)=>{r.value!=null&&e.push(new B(i,r.value))}),e}function mn(t,e){if(L(e))return t;{let n=Dn(t,e);return n!=null?new bt(new Ue(n)):new bt(t.writeTree_.subtree(e))}}function Rl(t){return t.writeTree_.isEmpty()}function _i(t,e){return jm(W(),t.writeTree_,e)}function jm(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let i=null;return e.children.inorderTraversal((r,o)=>{r===".priority"?(y(o.value!==null,"Priority writes must always be leaf nodes"),i=o.value):n=jm(ce(t,r),o,n)}),!n.getChild(t).isEmpty()&&i!==null&&(n=n.updateChild(ce(t,".priority"),i)),n}}function is(t,e){return Gm(e,t)}function $C(t,e,n,i,r){y(i>t.lastWriteId,"Stacking an older write on top of newer ones"),r===void 0&&(r=!0),t.allWrites.push({path:e,snap:n,writeId:i,visible:r}),r&&(t.visibleWrites=Xi(t.visibleWrites,e,n)),t.lastWriteId=i}function WC(t,e,n,i){y(i>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:i,visible:!0}),t.visibleWrites=Nl(t.visibleWrites,e,n),t.lastWriteId=i}function HC(t,e){for(let n=0;n<t.allWrites.length;n++){let i=t.allWrites[n];if(i.writeId===e)return i}return null}function GC(t,e){let n=t.allWrites.findIndex(a=>a.writeId===e);y(n>=0,"removeWrite called with nonexistent writeId.");let i=t.allWrites[n];t.allWrites.splice(n,1);let r=i.visible,o=!1,s=t.allWrites.length-1;for(;r&&s>=0;){let a=t.allWrites[s];a.visible&&(s>=n&&KC(a,i.path)?r=!1:dt(i.path,a.path)&&(o=!0)),s--}if(r){if(o)return qC(t),!0;if(i.snap)t.visibleWrites=Jp(t.visibleWrites,i.path);else{let a=i.children;Se(a,l=>{t.visibleWrites=Jp(t.visibleWrites,ce(i.path,l))})}return!0}else return!1}function KC(t,e){if(t.snap)return dt(t.path,e);for(let n in t.children)if(t.children.hasOwnProperty(n)&&dt(ce(t.path,n),e))return!0;return!1}function qC(t){t.visibleWrites=$m(t.allWrites,ZC,W()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function ZC(t){return t.visible}function $m(t,e,n){let i=bt.empty();for(let r=0;r<t.length;++r){let o=t[r];if(e(o)){let s=o.path,a;if(o.snap)dt(n,s)?(a=Le(n,s),i=Xi(i,a,o.snap)):dt(s,n)&&(a=Le(s,n),i=Xi(i,W(),o.snap.getChild(a)));else if(o.children){if(dt(n,s))a=Le(n,s),i=Nl(i,a,o.children);else if(dt(s,n))if(a=Le(s,n),L(a))i=Nl(i,W(),o.children);else{let l=an(o.children,F(a));if(l){let c=l.getChild(Q(a));i=Xi(i,W(),c)}}}else throw ti("WriteRecord should have .snap or .children")}}return i}function Wm(t,e,n,i,r){if(!i&&!r){let o=Dn(t.visibleWrites,e);if(o!=null)return o;{let s=mn(t.visibleWrites,e);if(Rl(s))return n;if(n==null&&!Dl(s,W()))return null;{let a=n||D.EMPTY_NODE;return _i(s,a)}}}else{let o=mn(t.visibleWrites,e);if(!r&&Rl(o))return n;if(!r&&n==null&&!Dl(o,W()))return null;{let s=function(c){return(c.visible||r)&&(!i||!~i.indexOf(c.writeId))&&(dt(c.path,e)||dt(e,c.path))},a=$m(t.allWrites,s,e),l=n||D.EMPTY_NODE;return _i(a,l)}}}function YC(t,e,n){let i=D.EMPTY_NODE,r=Dn(t.visibleWrites,e);if(r)return r.isLeafNode()||r.forEachChild(ie,(o,s)=>{i=i.updateImmediateChild(o,s)}),i;if(n){let o=mn(t.visibleWrites,e);return n.forEachChild(ie,(s,a)=>{let l=_i(mn(o,new H(s)),a);i=i.updateImmediateChild(s,l)}),em(o).forEach(s=>{i=i.updateImmediateChild(s.name,s.node)}),i}else{let o=mn(t.visibleWrites,e);return em(o).forEach(s=>{i=i.updateImmediateChild(s.name,s.node)}),i}}function XC(t,e,n,i,r){y(i||r,"Either existingEventSnap or existingServerSnap must exist");let o=ce(e,n);if(Dl(t.visibleWrites,o))return null;{let s=mn(t.visibleWrites,o);return Rl(s)?r.getChild(n):_i(s,r.getChild(n))}}function QC(t,e,n,i){let r=ce(e,n),o=Dn(t.visibleWrites,r);if(o!=null)return o;if(i.isCompleteForChild(n)){let s=mn(t.visibleWrites,r);return _i(s,i.getNode().getImmediateChild(n))}else return null}function JC(t,e){return Dn(t.visibleWrites,e)}function eb(t,e,n,i,r,o,s){let a,l=mn(t.visibleWrites,e),c=Dn(l,W());if(c!=null)a=c;else if(n!=null)a=_i(l,n);else return[];if(a=a.withIndex(s),!a.isEmpty()&&!a.isLeafNode()){let d=[],m=s.getCompare(),f=o?a.getReverseIteratorFrom(i,s):a.getIteratorFrom(i,s),v=f.getNext();for(;v&&d.length<r;)m(v,i)!==0&&d.push(v),v=f.getNext();return d}else return[]}function tb(){return{visibleWrites:bt.empty(),allWrites:[],lastWriteId:-1}}function Bo(t,e,n,i){return Wm(t.writeTree,t.treePath,e,n,i)}function vc(t,e){return YC(t.writeTree,t.treePath,e)}function tm(t,e,n,i){return XC(t.writeTree,t.treePath,e,n,i)}function Vo(t,e){return JC(t.writeTree,ce(t.treePath,e))}function nb(t,e,n,i,r,o){return eb(t.writeTree,t.treePath,e,n,i,r,o)}function yc(t,e,n){return QC(t.writeTree,t.treePath,e,n)}function Hm(t,e){return Gm(ce(t.treePath,e),t.writeTree)}function Gm(t,e){return{treePath:t,writeTree:e}}var Pl=class{constructor(){this.changeMap=new Map}trackChildChange(e){let n=e.type,i=e.childName;y(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),y(i!==".priority","Only non-priority child changes can be tracked.");let r=this.changeMap.get(i);if(r){let o=r.type;if(n==="child_added"&&o==="child_removed")this.changeMap.set(i,ir(i,e.snapshotNode,r.snapshotNode));else if(n==="child_removed"&&o==="child_added")this.changeMap.delete(i);else if(n==="child_removed"&&o==="child_changed")this.changeMap.set(i,nr(i,r.oldSnap));else if(n==="child_changed"&&o==="child_added")this.changeMap.set(i,fi(i,e.snapshotNode));else if(n==="child_changed"&&o==="child_changed")this.changeMap.set(i,ir(i,e.snapshotNode,r.oldSnap));else throw ti("Illegal combination of changes: "+e+" occurred after "+r)}else this.changeMap.set(i,e)}getChanges(){return Array.from(this.changeMap.values())}};var Ol=class{getCompleteChild(e){return null}getChildAfterChild(e,n,i){return null}},Km=new Ol,ar=class{constructor(e,n,i=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=i}getCompleteChild(e){let n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{let i=this.optCompleteServerCache_!=null?new $t(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return yc(this.writes_,e,i)}}getChildAfterChild(e,n,i){let r=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:xn(this.viewCache_),o=nb(this.writes_,r,n,1,i,e);return o.length===0?null:o[0]}};function ib(t){return{filter:t}}function rb(t,e){y(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),y(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function ob(t,e,n,i,r){let o=new Pl,s,a;if(n.type===Bt.OVERWRITE){let c=n;c.source.fromUser?s=Fl(t,e,c.path,c.snap,i,r,o):(y(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!L(c.path),s=jo(t,e,c.path,c.snap,i,r,a,o))}else if(n.type===Bt.MERGE){let c=n;c.source.fromUser?s=ab(t,e,c.path,c.children,i,r,o):(y(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered(),s=Ll(t,e,c.path,c.children,i,r,a,o))}else if(n.type===Bt.ACK_USER_WRITE){let c=n;c.revert?s=ub(t,e,c.path,i,r,o):s=lb(t,e,c.path,c.affectedTree,i,r,o)}else if(n.type===Bt.LISTEN_COMPLETE)s=cb(t,e,n.path,i,o);else throw ti("Unknown operation type: "+n.type);let l=o.getChanges();return sb(e,s,l),{viewCache:s,changes:l}}function sb(t,e,n){let i=e.eventCache;if(i.isFullyInitialized()){let r=i.getNode().isLeafNode()||i.getNode().isEmpty(),o=Uo(t);(n.length>0||!t.eventCache.isFullyInitialized()||r&&!i.getNode().equals(o)||!i.getNode().getPriority().equals(o.getPriority()))&&n.push(Bm(Uo(e)))}}function qm(t,e,n,i,r,o){let s=e.eventCache;if(Vo(i,n)!=null)return e;{let a,l;if(L(n))if(y(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){let c=xn(e),d=c instanceof D?c:D.EMPTY_NODE,m=vc(i,d);a=t.filter.updateFullNode(e.eventCache.getNode(),m,o)}else{let c=Bo(i,xn(e));a=t.filter.updateFullNode(e.eventCache.getNode(),c,o)}else{let c=F(n);if(c===".priority"){y(_n(n)===1,"Can't have a priority with additional path components");let d=s.getNode();l=e.serverCache.getNode();let m=tm(i,n,d,l);m!=null?a=t.filter.updatePriority(d,m):a=s.getNode()}else{let d=Q(n),m;if(s.isCompleteForChild(c)){l=e.serverCache.getNode();let f=tm(i,n,s.getNode(),l);f!=null?m=s.getNode().getImmediateChild(c).updateChild(d,f):m=s.getNode().getImmediateChild(c)}else m=yc(i,c,e.serverCache);m!=null?a=t.filter.updateChild(s.getNode(),c,m,d,r,o):a=s.getNode()}}return Yi(e,a,s.isFullyInitialized()||L(n),t.filter.filtersNodes())}}function jo(t,e,n,i,r,o,s,a){let l=e.serverCache,c,d=s?t.filter:t.filter.getIndexedFilter();if(L(n))c=d.updateFullNode(l.getNode(),i,null);else if(d.filtersNodes()&&!l.isFiltered()){let v=l.getNode().updateChild(n,i);c=d.updateFullNode(l.getNode(),v,null)}else{let v=F(n);if(!l.isCompleteForPath(n)&&_n(n)>1)return e;let w=Q(n),P=l.getNode().getImmediateChild(v).updateChild(w,i);v===".priority"?c=d.updatePriority(l.getNode(),P):c=d.updateChild(l.getNode(),v,P,w,Km,null)}let m=Vm(e,c,l.isFullyInitialized()||L(n),d.filtersNodes()),f=new ar(r,m,o);return qm(t,m,n,r,f,a)}function Fl(t,e,n,i,r,o,s){let a=e.eventCache,l,c,d=new ar(r,e,o);if(L(n))c=t.filter.updateFullNode(e.eventCache.getNode(),i,s),l=Yi(e,c,!0,t.filter.filtersNodes());else{let m=F(n);if(m===".priority")c=t.filter.updatePriority(e.eventCache.getNode(),i),l=Yi(e,c,a.isFullyInitialized(),a.isFiltered());else{let f=Q(n),v=a.getNode().getImmediateChild(m),w;if(L(f))w=i;else{let R=d.getCompleteChild(m);R!=null?uc(f)===".priority"&&R.getChild(Rm(f)).isEmpty()?w=R:w=R.updateChild(f,i):w=D.EMPTY_NODE}if(v.equals(w))l=e;else{let R=t.filter.updateChild(a.getNode(),m,w,f,d,s);l=Yi(e,R,a.isFullyInitialized(),t.filter.filtersNodes())}}}return l}function nm(t,e){return t.eventCache.isCompleteForChild(e)}function ab(t,e,n,i,r,o,s){let a=e;return i.foreach((l,c)=>{let d=ce(n,l);nm(e,F(d))&&(a=Fl(t,a,d,c,r,o,s))}),i.foreach((l,c)=>{let d=ce(n,l);nm(e,F(d))||(a=Fl(t,a,d,c,r,o,s))}),a}function im(t,e,n){return n.foreach((i,r)=>{e=e.updateChild(i,r)}),e}function Ll(t,e,n,i,r,o,s,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let l=e,c;L(n)?c=i:c=new Ue(null).setTree(n,i);let d=e.serverCache.getNode();return c.children.inorderTraversal((m,f)=>{if(d.hasChild(m)){let v=e.serverCache.getNode().getImmediateChild(m),w=im(t,v,f);l=jo(t,l,new H(m),w,r,o,s,a)}}),c.children.inorderTraversal((m,f)=>{let v=!e.serverCache.isCompleteForChild(m)&&f.value===null;if(!d.hasChild(m)&&!v){let w=e.serverCache.getNode().getImmediateChild(m),R=im(t,w,f);l=jo(t,l,new H(m),R,r,o,s,a)}}),l}function lb(t,e,n,i,r,o,s){if(Vo(r,n)!=null)return e;let a=e.serverCache.isFiltered(),l=e.serverCache;if(i.value!=null){if(L(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return jo(t,e,n,l.getNode().getChild(n),r,o,a,s);if(L(n)){let c=new Ue(null);return l.getNode().forEachChild(Vt,(d,m)=>{c=c.set(new H(d),m)}),Ll(t,e,n,c,r,o,a,s)}else return e}else{let c=new Ue(null);return i.foreach((d,m)=>{let f=ce(n,d);l.isCompleteForPath(f)&&(c=c.set(d,l.getNode().getChild(f)))}),Ll(t,e,n,c,r,o,a,s)}}function cb(t,e,n,i,r){let o=e.serverCache,s=Vm(e,o.getNode(),o.isFullyInitialized()||L(n),o.isFiltered());return qm(t,s,n,i,Km,r)}function ub(t,e,n,i,r,o){let s;if(Vo(i,n)!=null)return e;{let a=new ar(i,e,r),l=e.eventCache.getNode(),c;if(L(n)||F(n)===".priority"){let d;if(e.serverCache.isFullyInitialized())d=Bo(i,xn(e));else{let m=e.serverCache.getNode();y(m instanceof D,"serverChildren would be complete if leaf node"),d=vc(i,m)}d=d,c=t.filter.updateFullNode(l,d,o)}else{let d=F(n),m=yc(i,d,e.serverCache);m==null&&e.serverCache.isCompleteForChild(d)&&(m=l.getImmediateChild(d)),m!=null?c=t.filter.updateChild(l,d,m,Q(n),a,o):e.eventCache.getNode().hasChild(d)?c=t.filter.updateChild(l,d,D.EMPTY_NODE,Q(n),a,o):c=l,c.isEmpty()&&e.serverCache.isFullyInitialized()&&(s=Bo(i,xn(e)),s.isLeafNode()&&(c=t.filter.updateFullNode(c,s,o)))}return s=e.serverCache.isFullyInitialized()||Vo(i,W())!=null,Yi(e,c,s,t.filter.filtersNodes())}}var Ul=class{constructor(e,n){this.query_=e,this.eventRegistrations_=[];let i=this.query_._queryParams,r=new rr(i.getIndex()),o=xC(i);this.processor_=ib(o);let s=n.serverCache,a=n.eventCache,l=r.updateFullNode(D.EMPTY_NODE,s.getNode(),null),c=o.updateFullNode(D.EMPTY_NODE,a.getNode(),null),d=new $t(l,s.isFullyInitialized(),r.filtersNodes()),m=new $t(c,a.isFullyInitialized(),o.filtersNodes());this.viewCache_=ns(m,d),this.eventGenerator_=new xl(this.query_)}get query(){return this.query_}};function db(t){return t.viewCache_.serverCache.getNode()}function hb(t){return Uo(t.viewCache_)}function pb(t,e){let n=xn(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!L(e)&&!n.getImmediateChild(F(e)).isEmpty())?n.getChild(e):null}function rm(t){return t.eventRegistrations_.length===0}function mb(t,e){t.eventRegistrations_.push(e)}function om(t,e,n){let i=[];if(n){y(e==null,"A cancel should cancel all event registrations.");let r=t.query._path;t.eventRegistrations_.forEach(o=>{let s=o.createCancelEvent(n,r);s&&i.push(s)})}if(e){let r=[];for(let o=0;o<t.eventRegistrations_.length;++o){let s=t.eventRegistrations_[o];if(!s.matches(e))r.push(s);else if(e.hasAnyCallback()){r=r.concat(t.eventRegistrations_.slice(o+1));break}}t.eventRegistrations_=r}else t.eventRegistrations_=[];return i}function sm(t,e,n,i){e.type===Bt.MERGE&&e.source.queryId!==null&&(y(xn(t.viewCache_),"We should always have a full cache before handling merges"),y(Uo(t.viewCache_),"Missing event cache, even though we have a server cache"));let r=t.viewCache_,o=ob(t.processor_,r,e,n,i);return rb(t.processor_,o.viewCache),y(o.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=o.viewCache,Zm(t,o.changes,o.viewCache.eventCache.getNode(),null)}function fb(t,e){let n=t.viewCache_.eventCache,i=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(ie,(o,s)=>{i.push(fi(o,s))}),n.isFullyInitialized()&&i.push(Bm(n.getNode())),Zm(t,i,n.getNode(),e)}function Zm(t,e,n,i){let r=i?[i]:t.eventRegistrations_;return UC(t.eventGenerator_,e,n,r)}var $o,Wo=class{constructor(){this.views=new Map}};function gb(t){y(!$o,"__referenceConstructor has already been defined"),$o=t}function _b(){return y($o,"Reference.ts has not been loaded"),$o}function vb(t){return t.views.size===0}function Cc(t,e,n,i){let r=e.source.queryId;if(r!==null){let o=t.views.get(r);return y(o!=null,"SyncTree gave us an op for an invalid query."),sm(o,e,n,i)}else{let o=[];for(let s of t.views.values())o=o.concat(sm(s,e,n,i));return o}}function Ym(t,e,n,i,r){let o=e._queryIdentifier,s=t.views.get(o);if(!s){let a=Bo(n,r?i:null),l=!1;a?l=!0:i instanceof D?(a=vc(n,i),l=!1):(a=D.EMPTY_NODE,l=!1);let c=ns(new $t(a,l,!1),new $t(i,r,!1));return new Ul(e,c)}return s}function yb(t,e,n,i,r,o){let s=Ym(t,e,i,r,o);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,s),mb(s,n),fb(s,n)}function Cb(t,e,n,i){let r=e._queryIdentifier,o=[],s=[],a=vn(t);if(r==="default")for(let[l,c]of t.views.entries())s=s.concat(om(c,n,i)),rm(c)&&(t.views.delete(l),c.query._queryParams.loadsAllData()||o.push(c.query));else{let l=t.views.get(r);l&&(s=s.concat(om(l,n,i)),rm(l)&&(t.views.delete(r),l.query._queryParams.loadsAllData()||o.push(l.query)))}return a&&!vn(t)&&o.push(new(_b())(e._repo,e._path)),{removed:o,events:s}}function Xm(t){let e=[];for(let n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function fn(t,e){let n=null;for(let i of t.views.values())n=n||pb(i,e);return n}function Qm(t,e){if(e._queryParams.loadsAllData())return rs(t);{let i=e._queryIdentifier;return t.views.get(i)}}function Jm(t,e){return Qm(t,e)!=null}function vn(t){return rs(t)!=null}function rs(t){for(let e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}var Ho;function bb(t){y(!Ho,"__referenceConstructor has already been defined"),Ho=t}function wb(){return y(Ho,"Reference.ts has not been loaded"),Ho}var Eb=1,Go=class{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Ue(null),this.pendingWriteTree_=tb(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function bc(t,e,n,i,r){return $C(t.pendingWriteTree_,e,n,i,r),r?wi(t,new gi(fc(),e,n)):[]}function Sb(t,e,n,i){WC(t.pendingWriteTree_,e,n,i);let r=Ue.fromObject(n);return wi(t,new sr(fc(),e,r))}function pn(t,e,n=!1){let i=HC(t.pendingWriteTree_,e);if(GC(t.pendingWriteTree_,e)){let o=new Ue(null);return i.snap!=null?o=o.set(W(),!0):Se(i.children,s=>{o=o.set(new H(s),!0)}),wi(t,new Al(i.path,o,n))}else return[]}function gr(t,e,n){return wi(t,new gi(gc(),e,n))}function Ib(t,e,n){let i=Ue.fromObject(n);return wi(t,new sr(gc(),e,i))}function Tb(t,e){return wi(t,new Lo(gc(),e))}function kb(t,e,n){let i=wc(t,n);if(i){let r=Ec(i),o=r.path,s=r.queryId,a=Le(o,e),l=new Lo(_c(s),a);return Sc(t,o,l)}else return[]}function Ko(t,e,n,i,r=!1){let o=e._path,s=t.syncPointTree_.get(o),a=[];if(s&&(e._queryIdentifier==="default"||Jm(s,e))){let l=Cb(s,e,n,i);vb(s)&&(t.syncPointTree_=t.syncPointTree_.remove(o));let c=l.removed;if(a=l.events,!r){let d=c.findIndex(f=>f._queryParams.loadsAllData())!==-1,m=t.syncPointTree_.findOnPath(o,(f,v)=>vn(v));if(d&&!m){let f=t.syncPointTree_.subtree(o);if(!f.isEmpty()){let v=Ab(f);for(let w=0;w<v.length;++w){let R=v[w],P=R.query,ye=rf(t,R);t.listenProvider_.startListening(Qi(P),lr(t,P),ye.hashFn,ye.onComplete)}}}!m&&c.length>0&&!i&&(d?t.listenProvider_.stopListening(Qi(e),null):c.forEach(f=>{let v=t.queryToTagMap.get(ss(f));t.listenProvider_.stopListening(Qi(f),v)}))}xb(t,c)}return a}function ef(t,e,n,i){let r=wc(t,i);if(r!=null){let o=Ec(r),s=o.path,a=o.queryId,l=Le(s,e),c=new gi(_c(a),l,n);return Sc(t,s,c)}else return[]}function Mb(t,e,n,i){let r=wc(t,i);if(r){let o=Ec(r),s=o.path,a=o.queryId,l=Le(s,e),c=Ue.fromObject(n),d=new sr(_c(a),l,c);return Sc(t,s,d)}else return[]}function Bl(t,e,n,i=!1){let r=e._path,o=null,s=!1;t.syncPointTree_.foreachOnPath(r,(f,v)=>{let w=Le(f,r);o=o||fn(v,w),s=s||vn(v)});let a=t.syncPointTree_.get(r);a?(s=s||vn(a),o=o||fn(a,W())):(a=new Wo,t.syncPointTree_=t.syncPointTree_.set(r,a));let l;o!=null?l=!0:(l=!1,o=D.EMPTY_NODE,t.syncPointTree_.subtree(r).foreachChild((v,w)=>{let R=fn(w,W());R&&(o=o.updateImmediateChild(v,R))}));let c=Jm(a,e);if(!c&&!e._queryParams.loadsAllData()){let f=ss(e);y(!t.queryToTagMap.has(f),"View does not exist, but we have a tag");let v=Nb();t.queryToTagMap.set(f,v),t.tagToQueryMap.set(v,f)}let d=is(t.pendingWriteTree_,r),m=yb(a,e,n,d,o,l);if(!c&&!s&&!i){let f=Qm(a,e);m=m.concat(Db(t,e,f))}return m}function os(t,e,n){let r=t.pendingWriteTree_,o=t.syncPointTree_.findOnPath(e,(s,a)=>{let l=Le(s,e),c=fn(a,l);if(c)return c});return Wm(r,e,o,n,!0)}function zb(t,e){let n=e._path,i=null;t.syncPointTree_.foreachOnPath(n,(c,d)=>{let m=Le(c,n);i=i||fn(d,m)});let r=t.syncPointTree_.get(n);r?i=i||fn(r,W()):(r=new Wo,t.syncPointTree_=t.syncPointTree_.set(n,r));let o=i!=null,s=o?new $t(i,!0,!1):null,a=is(t.pendingWriteTree_,e._path),l=Ym(r,e,a,o?s.getNode():D.EMPTY_NODE,o);return hb(l)}function wi(t,e){return tf(e,t.syncPointTree_,null,is(t.pendingWriteTree_,W()))}function tf(t,e,n,i){if(L(t.path))return nf(t,e,n,i);{let r=e.get(W());n==null&&r!=null&&(n=fn(r,W()));let o=[],s=F(t.path),a=t.operationForChild(s),l=e.children.get(s);if(l&&a){let c=n?n.getImmediateChild(s):null,d=Hm(i,s);o=o.concat(tf(a,l,c,d))}return r&&(o=o.concat(Cc(r,t,i,n))),o}}function nf(t,e,n,i){let r=e.get(W());n==null&&r!=null&&(n=fn(r,W()));let o=[];return e.children.inorderTraversal((s,a)=>{let l=n?n.getImmediateChild(s):null,c=Hm(i,s),d=t.operationForChild(s);d&&(o=o.concat(nf(d,a,l,c)))}),r&&(o=o.concat(Cc(r,t,i,n))),o}function rf(t,e){let n=e.query,i=lr(t,n);return{hashFn:()=>(db(e)||D.EMPTY_NODE).hash(),onComplete:r=>{if(r==="ok")return i?kb(t,n._path,i):Tb(t,n._path);{let o=$y(r,n);return Ko(t,n,null,o)}}}}function lr(t,e){let n=ss(e);return t.queryToTagMap.get(n)}function ss(t){return t._path.toString()+"$"+t._queryIdentifier}function wc(t,e){return t.tagToQueryMap.get(e)}function Ec(t){let e=t.indexOf("$");return y(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new H(t.substr(0,e))}}function Sc(t,e,n){let i=t.syncPointTree_.get(e);y(i,"Missing sync point for query tag that we're tracking");let r=is(t.pendingWriteTree_,e);return Cc(i,n,r,null)}function Ab(t){return t.fold((e,n,i)=>{if(n&&vn(n))return[rs(n)];{let r=[];return n&&(r=Xm(n)),Se(i,(o,s)=>{r=r.concat(s)}),r}})}function Qi(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(wb())(t._repo,t._path):t}function xb(t,e){for(let n=0;n<e.length;++n){let i=e[n];if(!i._queryParams.loadsAllData()){let r=ss(i),o=t.queryToTagMap.get(r);t.queryToTagMap.delete(r),t.tagToQueryMap.delete(o)}}}function Nb(){return Eb++}function Db(t,e,n){let i=e._path,r=lr(t,e),o=rf(t,n),s=t.listenProvider_.startListening(Qi(e),r,o.hashFn,o.onComplete),a=t.syncPointTree_.subtree(i);if(r)y(!vn(a.value),"If we're adding a query, it shouldn't be shadowed");else{let l=a.fold((c,d,m)=>{if(!L(c)&&d&&vn(d))return[rs(d).query];{let f=[];return d&&(f=f.concat(Xm(d).map(v=>v.query))),Se(m,(v,w)=>{f=f.concat(w)}),f}});for(let c=0;c<l.length;++c){let d=l[c];t.listenProvider_.stopListening(Qi(d),lr(t,d))}}return s}var Vl=class t{constructor(e){this.node_=e}getImmediateChild(e){let n=this.node_.getImmediateChild(e);return new t(n)}node(){return this.node_}},jl=class t{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){let n=ce(this.path_,e);return new t(this.syncTree_,n)}node(){return os(this.syncTree_,this.path_)}},Rb=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},am=function(t,e,n){if(!t||typeof t!="object")return t;if(y(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return Pb(t[".sv"],e,n);if(typeof t[".sv"]=="object")return Ob(t[".sv"],e);y(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},Pb=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:y(!1,"Unexpected server value: "+t)}},Ob=function(t,e,n){t.hasOwnProperty("increment")||y(!1,"Unexpected server value: "+JSON.stringify(t,null,2));let i=t.increment;typeof i!="number"&&y(!1,"Unexpected increment value: "+i);let r=e.node();if(y(r!==null&&typeof r<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;let s=r.getValue();return typeof s!="number"?i:s+i},of=function(t,e,n,i){return Tc(e,new jl(n,t),i)},Ic=function(t,e,n){return Tc(t,new Vl(e),n)};function Tc(t,e,n){let i=t.getPriority().val(),r=am(i,e.getImmediateChild(".priority"),n),o;if(t.isLeafNode()){let s=t,a=am(s.getValue(),e,n);return a!==s.getValue()||r!==s.getPriority().val()?new pi(a,he(r)):t}else{let s=t;return o=s,r!==s.getPriority().val()&&(o=o.updatePriority(new pi(r))),s.forEachChild(ie,(a,l)=>{let c=Tc(l,e.getImmediateChild(a),n);c!==l&&(o=o.updateImmediateChild(a,c))}),o}}var cr=class{constructor(e="",n=null,i={children:{},childCount:0}){this.name=e,this.parent=n,this.node=i}};function as(t,e){let n=e instanceof H?e:new H(e),i=t,r=F(n);for(;r!==null;){let o=an(i.node.children,r)||{children:{},childCount:0};i=new cr(r,i,o),n=Q(n),r=F(n)}return i}function Rn(t){return t.node.value}function kc(t,e){t.node.value=e,$l(t)}function sf(t){return t.node.childCount>0}function Fb(t){return Rn(t)===void 0&&!sf(t)}function ls(t,e){Se(t.node.children,(n,i)=>{e(new cr(n,t,i))})}function af(t,e,n,i){n&&!i&&e(t),ls(t,r=>{af(r,e,!0,i)}),n&&i&&e(t)}function Lb(t,e,n){let i=n?t:t.parent;for(;i!==null;){if(e(i))return!0;i=i.parent}return!1}function _r(t){return new H(t.parent===null?t.name:_r(t.parent)+"/"+t.name)}function $l(t){t.parent!==null&&Ub(t.parent,t.name,t)}function Ub(t,e,n){let i=Fb(n),r=ct(t.node.children,e);i&&r?(delete t.node.children[e],t.node.childCount--,$l(t)):!i&&!r&&(t.node.children[e]=n.node,t.node.childCount++,$l(t))}var Bb=/[\[\].#$\/\u0000-\u001F\u007F]/,Vb=/[\[\].#$\u0000-\u001F\u007F]/,el=10*1024*1024,cs=function(t){return typeof t=="string"&&t.length!==0&&!Bb.test(t)},lf=function(t){return typeof t=="string"&&t.length!==0&&!Vb.test(t)},jb=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),lf(t)},ur=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!es(t)||t&&typeof t=="object"&&ct(t,".sv")},Wt=function(t,e,n,i){i&&e===void 0||vr($e(t,"value"),e,n)},vr=function(t,e,n){let i=n instanceof H?new pl(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+Mn(i));if(typeof e=="function")throw new Error(t+"contains a function "+Mn(i)+" with contents = "+e.toString());if(es(e))throw new Error(t+"contains "+e.toString()+" "+Mn(i));if(typeof e=="string"&&e.length>el/3&&Ri(e)>el)throw new Error(t+"contains a string greater than "+el+" utf8 bytes "+Mn(i)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let r=!1,o=!1;if(Se(e,(s,a)=>{if(s===".value")r=!0;else if(s!==".priority"&&s!==".sv"&&(o=!0,!cs(s)))throw new Error(t+" contains an invalid key ("+s+") "+Mn(i)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);vC(i,s),vr(t,a,i),yC(i)}),r&&o)throw new Error(t+' contains ".value" child '+Mn(i)+" in addition to actual children.")}},$b=function(t,e){let n,i;for(n=0;n<e.length;n++){i=e[n];let o=er(i);for(let s=0;s<o.length;s++)if(!(o[s]===".priority"&&s===o.length-1)){if(!cs(o[s]))throw new Error(t+"contains an invalid key ("+o[s]+") in path "+i.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(_C);let r=null;for(n=0;n<e.length;n++){if(i=e[n],r!==null&&dt(r,i))throw new Error(t+"contains a path "+r.toString()+" that is ancestor of another path "+i.toString());r=i}},cf=function(t,e,n,i){if(i&&e===void 0)return;let r=$e(t,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(r+" must be an object containing the children to replace.");let o=[];Se(e,(s,a)=>{let l=new H(s);if(vr(r,a,ce(n,l)),uc(l)===".priority"&&!ur(a))throw new Error(r+"contains an invalid value for '"+l.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");o.push(l)}),$b(r,o)},Mc=function(t,e,n){if(!(n&&e===void 0)){if(es(e))throw new Error($e(t,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!ur(e))throw new Error($e(t,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},yr=function(t,e,n,i){if(!(i&&n===void 0)&&!cs(n))throw new Error($e(t,e)+'was an invalid key = "'+n+`".  Firebase keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]").`)},Ei=function(t,e,n,i){if(!(i&&n===void 0)&&!lf(n))throw new Error($e(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},Wb=function(t,e,n,i){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Ei(t,e,n,i)},Ze=function(t,e){if(F(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},uf=function(t,e){let n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!cs(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!jb(n))throw new Error($e(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var Wl=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function us(t,e){let n=null;for(let i=0;i<e.length;i++){let r=e[i],o=r.getPath();n!==null&&!dc(o,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:o}),n.events.push(r)}n&&t.eventLists_.push(n)}function df(t,e,n){us(t,n),hf(t,i=>dc(i,e))}function Ye(t,e,n){us(t,n),hf(t,i=>dt(i,e)||dt(e,i))}function hf(t,e){t.recursionDepth_++;let n=!0;for(let i=0;i<t.eventLists_.length;i++){let r=t.eventLists_[i];if(r){let o=r.path;e(o)?(Hb(t.eventLists_[i]),t.eventLists_[i]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function Hb(t){for(let e=0;e<t.events.length;e++){let n=t.events[e];if(n!==null){t.events[e]=null;let i=n.getEventRunner();An&&Ee("event: "+n.toString()),Ci(i)}}}var pf="repo_interrupt",Gb=25,Hl=class{constructor(e,n,i,r){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=i,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Wl,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Fo(),this.transactionQueueTree_=new cr,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function Kb(t,e,n){if(t.stats_=cc(t.repoInfo_),t.forceRestClient_||Ky())t.server_=new Sl(t.repoInfo_,(i,r,o,s)=>{lm(t,i,r,o,s)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>cm(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{ge(n)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}t.persistentConnection_=new hc(t.repoInfo_,e,(i,r,o,s)=>{lm(t,i,r,o,s)},i=>{cm(t,i)},i=>{qb(t,i)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(i=>{t.server_.refreshAuthToken(i)}),t.appCheckProvider_.addTokenChangeListener(i=>{t.server_.refreshAppCheckToken(i.token)}),t.statsReporter_=Zy(t.repoInfo_,()=>new zl(t.stats_,t.server_)),t.infoData_=new Il,t.infoSyncTree_=new Go({startListening:(i,r,o,s)=>{let a=[],l=t.infoData_.getNode(i._path);return l.isEmpty()||(a=gr(t.infoSyncTree_,i._path,l),setTimeout(()=>{s("ok")},0)),a},stopListening:()=>{}}),zc(t,"connected",!1),t.serverSyncTree_=new Go({startListening:(i,r,o,s)=>(t.server_.listen(i,o,r,(a,l)=>{let c=s(a,l);Ye(t.eventQueue_,i._path,c)}),[]),stopListening:(i,r)=>{t.server_.unlisten(i,r)}})}function mf(t){let n=t.infoData_.getNode(new H(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function Cr(t){return Rb({timestamp:mf(t)})}function lm(t,e,n,i,r){t.dataUpdateCount++;let o=new H(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let s=[];if(r)if(i){let l=Di(n,c=>he(c));s=Mb(t.serverSyncTree_,o,l,r)}else{let l=he(n);s=ef(t.serverSyncTree_,o,l,r)}else if(i){let l=Di(n,c=>he(c));s=Ib(t.serverSyncTree_,o,l)}else{let l=he(n);s=gr(t.serverSyncTree_,o,l)}let a=o;s.length>0&&(a=vi(t,o)),Ye(t.eventQueue_,a,s)}function cm(t,e){zc(t,"connected",e),e===!1&&Xb(t)}function qb(t,e){Se(e,(n,i)=>{zc(t,n,i)})}function zc(t,e,n){let i=new H("/.info/"+e),r=he(n);t.infoData_.updateSnapshot(i,r);let o=gr(t.infoSyncTree_,i,r);Ye(t.eventQueue_,i,o)}function ds(t){return t.nextWriteId_++}function Zb(t,e,n){let i=zb(t.serverSyncTree_,e);return i!=null?Promise.resolve(i):t.server_.get(e).then(r=>{let o=he(r).withIndex(e._queryParams.getIndex());Bl(t.serverSyncTree_,e,n,!0);let s;if(e._queryParams.loadsAllData())s=gr(t.serverSyncTree_,e._path,o);else{let a=lr(t.serverSyncTree_,e);s=ef(t.serverSyncTree_,e._path,o,a)}return Ye(t.eventQueue_,e._path,s),Ko(t.serverSyncTree_,e,n,null,!0),o},r=>(Si(t,"get for query "+ge(e)+" failed: "+r),Promise.reject(new Error(r))))}function Ac(t,e,n,i,r){Si(t,"set",{path:e.toString(),value:n,priority:i});let o=Cr(t),s=he(n,i),a=os(t.serverSyncTree_,e),l=Ic(s,a,o),c=ds(t),d=bc(t.serverSyncTree_,e,l,c,!0);us(t.eventQueue_,d),t.server_.put(e.toString(),s.val(!0),(f,v)=>{let w=f==="ok";w||ze("set at "+e+" failed: "+f);let R=pn(t.serverSyncTree_,c,!w);Ye(t.eventQueue_,e,R),yn(t,r,f,v)});let m=Nc(t,e);vi(t,m),Ye(t.eventQueue_,m,[])}function Yb(t,e,n,i){Si(t,"update",{path:e.toString(),value:n});let r=!0,o=Cr(t),s={};if(Se(n,(a,l)=>{r=!1,s[a]=of(ce(e,a),he(l),t.serverSyncTree_,o)}),r)Ee("update() called with empty data.  Don't do anything."),yn(t,i,"ok",void 0);else{let a=ds(t),l=Sb(t.serverSyncTree_,e,s,a);us(t.eventQueue_,l),t.server_.merge(e.toString(),n,(c,d)=>{let m=c==="ok";m||ze("update at "+e+" failed: "+c);let f=pn(t.serverSyncTree_,a,!m),v=f.length>0?vi(t,e):e;Ye(t.eventQueue_,v,f),yn(t,i,c,d)}),Se(n,c=>{let d=Nc(t,ce(e,c));vi(t,d)}),Ye(t.eventQueue_,e,[])}}function Xb(t){Si(t,"onDisconnectEvents");let e=Cr(t),n=Fo();kl(t.onDisconnect_,W(),(r,o)=>{let s=of(r,o,t.serverSyncTree_,e);bi(n,r,s)});let i=[];kl(n,W(),(r,o)=>{i=i.concat(gr(t.serverSyncTree_,r,o));let s=Nc(t,r);vi(t,s)}),t.onDisconnect_=Fo(),Ye(t.eventQueue_,W(),i)}function Qb(t,e,n){t.server_.onDisconnectCancel(e.toString(),(i,r)=>{i==="ok"&&Tl(t.onDisconnect_,e),yn(t,n,i,r)})}function um(t,e,n,i){let r=he(n);t.server_.onDisconnectPut(e.toString(),r.val(!0),(o,s)=>{o==="ok"&&bi(t.onDisconnect_,e,r),yn(t,i,o,s)})}function Jb(t,e,n,i,r){let o=he(n,i);t.server_.onDisconnectPut(e.toString(),o.val(!0),(s,a)=>{s==="ok"&&bi(t.onDisconnect_,e,o),yn(t,r,s,a)})}function ew(t,e,n,i){if(Yr(n)){Ee("onDisconnect().update() called with empty data.  Don't do anything."),yn(t,i,"ok",void 0);return}t.server_.onDisconnectMerge(e.toString(),n,(r,o)=>{r==="ok"&&Se(n,(s,a)=>{let l=he(a);bi(t.onDisconnect_,ce(e,s),l)}),yn(t,i,r,o)})}function tw(t,e,n){let i;F(e._path)===".info"?i=Bl(t.infoSyncTree_,e,n):i=Bl(t.serverSyncTree_,e,n),df(t.eventQueue_,e._path,i)}function Gl(t,e,n){let i;F(e._path)===".info"?i=Ko(t.infoSyncTree_,e,n):i=Ko(t.serverSyncTree_,e,n),df(t.eventQueue_,e._path,i)}function ff(t){t.persistentConnection_&&t.persistentConnection_.interrupt(pf)}function nw(t){t.persistentConnection_&&t.persistentConnection_.resume(pf)}function Si(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Ee(n,...e)}function yn(t,e,n,i){e&&Ci(()=>{if(n==="ok")e(null);else{let r=(n||"error").toUpperCase(),o=r;i&&(o+=": "+i);let s=new Error(o);s.code=r,e(s)}})}function iw(t,e,n,i,r,o){Si(t,"transaction on "+e);let s={path:e,update:n,onComplete:i,status:null,order:pm(),applyLocally:o,retryCount:0,unwatcher:r,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},a=xc(t,e,void 0);s.currentInputSnapshot=a;let l=s.update(a.val());if(l===void 0)s.unwatcher(),s.currentOutputSnapshotRaw=null,s.currentOutputSnapshotResolved=null,s.onComplete&&s.onComplete(null,!1,s.currentInputSnapshot);else{vr("transaction failed: Data returned ",l,s.path),s.status=0;let c=as(t.transactionQueueTree_,e),d=Rn(c)||[];d.push(s),kc(c,d);let m;typeof l=="object"&&l!==null&&ct(l,".priority")?(m=an(l,".priority"),y(ur(m),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):m=(os(t.serverSyncTree_,e)||D.EMPTY_NODE).getPriority().val();let f=Cr(t),v=he(l,m),w=Ic(v,a,f);s.currentOutputSnapshotRaw=v,s.currentOutputSnapshotResolved=w,s.currentWriteId=ds(t);let R=bc(t.serverSyncTree_,e,w,s.currentWriteId,s.applyLocally);Ye(t.eventQueue_,e,R),hs(t,t.transactionQueueTree_)}}function xc(t,e,n){return os(t.serverSyncTree_,e,n)||D.EMPTY_NODE}function hs(t,e=t.transactionQueueTree_){if(e||ps(t,e),Rn(e)){let n=_f(t,e);y(n.length>0,"Sending zero length transaction queue"),n.every(r=>r.status===0)&&rw(t,_r(e),n)}else sf(e)&&ls(e,n=>{hs(t,n)})}function rw(t,e,n){let i=n.map(c=>c.currentWriteId),r=xc(t,e,i),o=r,s=r.hash();for(let c=0;c<n.length;c++){let d=n[c];y(d.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),d.status=1,d.retryCount++;let m=Le(e,d.path);o=o.updateChild(m,d.currentOutputSnapshotRaw)}let a=o.val(!0),l=e;t.server_.put(l.toString(),a,c=>{Si(t,"transaction put response",{path:l.toString(),status:c});let d=[];if(c==="ok"){let m=[];for(let f=0;f<n.length;f++)n[f].status=2,d=d.concat(pn(t.serverSyncTree_,n[f].currentWriteId)),n[f].onComplete&&m.push(()=>n[f].onComplete(null,!0,n[f].currentOutputSnapshotResolved)),n[f].unwatcher();ps(t,as(t.transactionQueueTree_,e)),hs(t,t.transactionQueueTree_),Ye(t.eventQueue_,e,d);for(let f=0;f<m.length;f++)Ci(m[f])}else{if(c==="datastale")for(let m=0;m<n.length;m++)n[m].status===3?n[m].status=4:n[m].status=0;else{ze("transaction at "+l.toString()+" failed: "+c);for(let m=0;m<n.length;m++)n[m].status=4,n[m].abortReason=c}vi(t,e)}},s)}function vi(t,e){let n=gf(t,e),i=_r(n),r=_f(t,n);return ow(t,r,i),i}function ow(t,e,n){if(e.length===0)return;let i=[],r=[],s=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){let l=e[a],c=Le(n,l.path),d=!1,m;if(y(c!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),l.status===4)d=!0,m=l.abortReason,r=r.concat(pn(t.serverSyncTree_,l.currentWriteId,!0));else if(l.status===0)if(l.retryCount>=Gb)d=!0,m="maxretry",r=r.concat(pn(t.serverSyncTree_,l.currentWriteId,!0));else{let f=xc(t,l.path,s);l.currentInputSnapshot=f;let v=e[a].update(f.val());if(v!==void 0){vr("transaction failed: Data returned ",v,l.path);let w=he(v);typeof v=="object"&&v!=null&&ct(v,".priority")||(w=w.updatePriority(f.getPriority()));let P=l.currentWriteId,ye=Cr(t),Ae=Ic(w,f,ye);l.currentOutputSnapshotRaw=w,l.currentOutputSnapshotResolved=Ae,l.currentWriteId=ds(t),s.splice(s.indexOf(P),1),r=r.concat(bc(t.serverSyncTree_,l.path,Ae,l.currentWriteId,l.applyLocally)),r=r.concat(pn(t.serverSyncTree_,P,!0))}else d=!0,m="nodata",r=r.concat(pn(t.serverSyncTree_,l.currentWriteId,!0))}Ye(t.eventQueue_,n,r),r=[],d&&(e[a].status=2,function(f){setTimeout(f,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(m==="nodata"?i.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):i.push(()=>e[a].onComplete(new Error(m),!1,null))))}ps(t,t.transactionQueueTree_);for(let a=0;a<i.length;a++)Ci(i[a]);hs(t,t.transactionQueueTree_)}function gf(t,e){let n,i=t.transactionQueueTree_;for(n=F(e);n!==null&&Rn(i)===void 0;)i=as(i,n),e=Q(e),n=F(e);return i}function _f(t,e){let n=[];return vf(t,e,n),n.sort((i,r)=>i.order-r.order),n}function vf(t,e,n){let i=Rn(e);if(i)for(let r=0;r<i.length;r++)n.push(i[r]);ls(e,r=>{vf(t,r,n)})}function ps(t,e){let n=Rn(e);if(n){let i=0;for(let r=0;r<n.length;r++)n[r].status!==2&&(n[i]=n[r],i++);n.length=i,kc(e,n.length>0?n:void 0)}ls(e,i=>{ps(t,i)})}function Nc(t,e){let n=_r(gf(t,e)),i=as(t.transactionQueueTree_,e);return Lb(i,r=>{tl(t,r)}),tl(t,i),af(i,r=>{tl(t,r)}),n}function tl(t,e){let n=Rn(e);if(n){let i=[],r=[],o=-1;for(let s=0;s<n.length;s++)n[s].status===3||(n[s].status===1?(y(o===s-1,"All SENT items should be at beginning of queue."),o=s,n[s].status=3,n[s].abortReason="set"):(y(n[s].status===0,"Unexpected transaction status in abort"),n[s].unwatcher(),r=r.concat(pn(t.serverSyncTree_,n[s].currentWriteId,!0)),n[s].onComplete&&i.push(n[s].onComplete.bind(null,new Error("set"),!1,null))));o===-1?kc(e,void 0):n.length=o+1,Ye(t.eventQueue_,_r(e),r);for(let s=0;s<i.length;s++)Ci(i[s])}}function sw(t){let e="",n=t.split("/");for(let i=0;i<n.length;i++)if(n[i].length>0){let r=n[i];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch{}e+="/"+r}return e}function aw(t){let e={};t.charAt(0)==="?"&&(t=t.substring(1));for(let n of t.split("&")){if(n.length===0)continue;let i=n.split("=");i.length===2?e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):ze(`Invalid query segment '${n}' in query '${t}'`)}return e}var Kl=function(t,e){let n=lw(t),i=n.namespace;n.domain==="firebase.com"&&jt(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||i==="undefined")&&n.domain!=="localhost"&&jt("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||Ly();let r=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new zo(n.host,n.secure,i,r,e,"",i!==n.subdomain),path:new H(n.pathString)}},lw=function(t){let e="",n="",i="",r="",o="",s=!0,a="https",l=443;if(typeof t=="string"){let c=t.indexOf("//");c>=0&&(a=t.substring(0,c-1),t=t.substring(c+2));let d=t.indexOf("/");d===-1&&(d=t.length);let m=t.indexOf("?");m===-1&&(m=t.length),e=t.substring(0,Math.min(d,m)),d<m&&(r=sw(t.substring(d,m)));let f=aw(t.substring(Math.min(t.length,m)));c=e.indexOf(":"),c>=0?(s=a==="https"||a==="wss",l=parseInt(e.substring(c+1),10)):c=e.length;let v=e.slice(0,c);if(v.toLowerCase()==="localhost")n="localhost";else if(v.split(".").length<=2)n=v;else{let w=e.indexOf(".");i=e.substring(0,w).toLowerCase(),n=e.substring(w+1),o=i}"ns"in f&&(o=f.ns)}return{host:e,port:l,domain:n,subdomain:i,secure:s,scheme:a,pathString:r,namespace:o}};var dm="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",cw=function(){let t=0,e=[];return function(n){let i=n===t;t=n;let r,o=new Array(8);for(r=7;r>=0;r--)o[r]=dm.charAt(n%64),n=Math.floor(n/64);y(n===0,"Cannot push at time == 0");let s=o.join("");if(i){for(r=11;r>=0&&e[r]===63;r--)e[r]=0;e[r]++}else for(r=0;r<12;r++)e[r]=Math.floor(Math.random()*64);for(r=0;r<12;r++)s+=dm.charAt(e[r]);return y(s.length===20,"nextPushId: Length should be 20."),s}}();var qo=class{constructor(e,n,i,r){this.eventType=e,this.eventRegistration=n,this.snapshot=i,this.prevName=r}getPath(){let e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+ge(this.snapshot.exportVal())}},Zo=class{constructor(e,n,i){this.eventRegistration=e,this.error=n,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}};var dr=class{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return y(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}};var Yo=class{constructor(e,n){this._repo=e,this._path=n}cancel(){let e=new be;return Qb(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){Ze("OnDisconnect.remove",this._path);let e=new be;return um(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){Ze("OnDisconnect.set",this._path),Wt("OnDisconnect.set",e,this._path,!1);let n=new be;return um(this._repo,this._path,e,n.wrapCallback(()=>{})),n.promise}setWithPriority(e,n){Ze("OnDisconnect.setWithPriority",this._path),Wt("OnDisconnect.setWithPriority",e,this._path,!1),Mc("OnDisconnect.setWithPriority",n,!1);let i=new be;return Jb(this._repo,this._path,e,n,i.wrapCallback(()=>{})),i.promise}update(e){Ze("OnDisconnect.update",this._path),cf("OnDisconnect.update",e,this._path,!1);let n=new be;return ew(this._repo,this._path,e,n.wrapCallback(()=>{})),n.promise}};var Be=class t{constructor(e,n,i,r){this._repo=e,this._path=n,this._queryParams=i,this._orderByCalled=r}get key(){return L(this._path)?null:uc(this._path)}get ref(){return new Xe(this._repo,this._path)}get _queryIdentifier(){let e=Xp(this._queryParams),n=lc(e);return n==="{}"?"default":n}get _queryObject(){return Xp(this._queryParams)}isEqual(e){if(e=ne(e),!(e instanceof t))return!1;let n=this._repo===e._repo,i=dc(this._path,e._path),r=this._queryIdentifier===e._queryIdentifier;return n&&i&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+gC(this._path)}};function ms(t,e){if(t._orderByCalled===!0)throw new Error(e+": You can't combine multiple orderBy calls.")}function bn(t){let e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===Vt){let i="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",r="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==gn)throw new Error(i);if(typeof e!="string")throw new Error(r)}if(t.hasEnd()){if(t.getIndexEndName()!==Xt)throw new Error(i);if(typeof n!="string")throw new Error(r)}}else if(t.getIndex()===ie){if(e!=null&&!ur(e)||n!=null&&!ur(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(y(t.getIndex()instanceof tr||t.getIndex()===mc,"unknown index type."),e!=null&&typeof e=="object"||n!=null&&typeof n=="object")throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function fs(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var Xe=class t extends Be{constructor(e,n){super(e,n,new or,!1)}get parent(){let e=Rm(this._path);return e===null?null:new t(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}},yi=class t{constructor(e,n,i){this._node=e,this.ref=n,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){let n=new H(e),i=Cn(this.ref,e);return new t(this._node.getChild(n),i,ie)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(i,r)=>e(new t(r,Cn(this.ref,i),ie)))}hasChild(e){let n=new H(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}};function Dc(t,e){return t=ne(t),t._checkNotDeleted("ref"),e!==void 0?Cn(t._root,e):t._root}function Rc(t,e){t=ne(t),t._checkNotDeleted("refFromURL");let n=Kl(e,t._repo.repoInfo_.nodeAdmin);uf("refFromURL",n);let i=n.repoInfo;return!t._repo.repoInfo_.isCustomHost()&&i.host!==t._repo.repoInfo_.host&&jt("refFromURL: Host name does not match the current database: (found "+i.host+" but expected "+t._repo.repoInfo_.host+")"),Dc(t,n.path.toString())}function Cn(t,e){return t=ne(t),F(t._path)===null?Wb("child","path",e,!1):Ei("child","path",e,!1),new Xe(t._repo,ce(t._path,e))}function yf(t,e){t=ne(t),Ze("push",t._path),Wt("push",e,t._path,!0);let n=mf(t._repo),i=cw(n),r=Cn(t,i),o=Cn(t,i),s;return e!=null?s=gs(o,e).then(()=>o):s=Promise.resolve(o),r.then=s.then.bind(s),r.catch=s.then.bind(s,void 0),r}function Cf(t){return Ze("remove",t._path),gs(t,null)}function gs(t,e){t=ne(t),Ze("set",t._path),Wt("set",e,t._path,!1);let n=new be;return Ac(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function bf(t,e){t=ne(t),Ze("setPriority",t._path),Mc("setPriority",e,!1);let n=new be;return Ac(t._repo,ce(t._path,".priority"),e,null,n.wrapCallback(()=>{})),n.promise}function wf(t,e,n){if(Ze("setWithPriority",t._path),Wt("setWithPriority",e,t._path,!1),Mc("setWithPriority",n,!1),t.key===".length"||t.key===".keys")throw"setWithPriority failed: "+t.key+" is a read-only object.";let i=new be;return Ac(t._repo,t._path,e,n,i.wrapCallback(()=>{})),i.promise}function Ef(t,e){cf("update",e,t._path,!1);let n=new be;return Yb(t._repo,t._path,e,n.wrapCallback(()=>{})),n.promise}function Sf(t){t=ne(t);let e=new dr(()=>{}),n=new hr(e);return Zb(t._repo,t,n).then(i=>new yi(i,new Xe(t._repo,t._path),t._queryParams.getIndex()))}var hr=class t{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){let i=n._queryParams.getIndex();return new qo("value",this,new yi(e.snapshotNode,new Xe(n._repo,n._path),i))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new Zo(this,e,n):null}matches(e){return e instanceof t?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}},Xo=class t{constructor(e,n){this.eventType=e,this.callbackContext=n}respondsTo(e){let n=e==="children_added"?"child_added":e;return n=n==="children_removed"?"child_removed":n,this.eventType===n}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new Zo(this,e,n):null}createEvent(e,n){y(e.childName!=null,"Child events should have a childName.");let i=Cn(new Xe(n._repo,n._path),e.childName),r=n._queryParams.getIndex();return new qo(e.type,this,new yi(e.snapshotNode,i,r),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof t?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}};function br(t,e,n,i,r){let o;if(typeof i=="object"&&(o=void 0,r=i),typeof i=="function"&&(o=i),r&&r.onlyOnce){let l=n,c=(d,m)=>{Gl(t._repo,t,a),l(d,m)};c.userCallback=n.userCallback,c.context=n.context,n=c}let s=new dr(n,o||void 0),a=e==="value"?new hr(s):new Xo(e,s);return tw(t._repo,t,a),()=>Gl(t._repo,t,a)}function _s(t,e,n,i){return br(t,"value",e,n,i)}function Pc(t,e,n,i){return br(t,"child_added",e,n,i)}function Oc(t,e,n,i){return br(t,"child_changed",e,n,i)}function Fc(t,e,n,i){return br(t,"child_moved",e,n,i)}function Lc(t,e,n,i){return br(t,"child_removed",e,n,i)}function Uc(t,e,n){let i=null,r=n?new dr(n):null;e==="value"?i=new hr(r):e&&(i=new Xo(e,r)),Gl(t._repo,t,i)}var Qe=class{},Qo=class extends Qe{constructor(e,n){super(),this._value=e,this._key=n,this.type="endAt"}_apply(e){Wt("endAt",this._value,e._path,!0);let n=El(e._queryParams,this._value,this._key);if(fs(n),bn(n),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Be(e._repo,e._path,n,e._orderByCalled)}};function If(t,e){return yr("endAt","key",e,!0),new Qo(t,e)}var ql=class extends Qe{constructor(e,n){super(),this._value=e,this._key=n,this.type="endBefore"}_apply(e){Wt("endBefore",this._value,e._path,!1);let n=PC(e._queryParams,this._value,this._key);if(fs(n),bn(n),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Be(e._repo,e._path,n,e._orderByCalled)}};function Tf(t,e){return yr("endBefore","key",e,!0),new ql(t,e)}var Jo=class extends Qe{constructor(e,n){super(),this._value=e,this._key=n,this.type="startAt"}_apply(e){Wt("startAt",this._value,e._path,!0);let n=wl(e._queryParams,this._value,this._key);if(fs(n),bn(n),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Be(e._repo,e._path,n,e._orderByCalled)}};function kf(t=null,e){return yr("startAt","key",e,!0),new Jo(t,e)}var Zl=class extends Qe{constructor(e,n){super(),this._value=e,this._key=n,this.type="startAfter"}_apply(e){Wt("startAfter",this._value,e._path,!1);let n=RC(e._queryParams,this._value,this._key);if(fs(n),bn(n),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Be(e._repo,e._path,n,e._orderByCalled)}};function Mf(t,e){return yr("startAfter","key",e,!0),new Zl(t,e)}var Yl=class extends Qe{constructor(e){super(),this._limit=e,this.type="limitToFirst"}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Be(e._repo,e._path,NC(e._queryParams,this._limit),e._orderByCalled)}};function zf(t){if(typeof t!="number"||Math.floor(t)!==t||t<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new Yl(t)}var Xl=class extends Qe{constructor(e){super(),this._limit=e,this.type="limitToLast"}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Be(e._repo,e._path,DC(e._queryParams,this._limit),e._orderByCalled)}};function Af(t){if(typeof t!="number"||Math.floor(t)!==t||t<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new Xl(t)}var Ql=class extends Qe{constructor(e){super(),this._path=e,this.type="orderByChild"}_apply(e){ms(e,"orderByChild");let n=new H(this._path);if(L(n))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");let i=new tr(n),r=ts(e._queryParams,i);return bn(r),new Be(e._repo,e._path,r,!0)}};function xf(t){if(t==="$key")throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if(t==="$priority")throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if(t==="$value")throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Ei("orderByChild","path",t,!1),new Ql(t)}var Jl=class extends Qe{constructor(){super(...arguments),this.type="orderByKey"}_apply(e){ms(e,"orderByKey");let n=ts(e._queryParams,Vt);return bn(n),new Be(e._repo,e._path,n,!0)}};function Nf(){return new Jl}var ec=class extends Qe{constructor(){super(...arguments),this.type="orderByPriority"}_apply(e){ms(e,"orderByPriority");let n=ts(e._queryParams,ie);return bn(n),new Be(e._repo,e._path,n,!0)}};function Df(){return new ec}var tc=class extends Qe{constructor(){super(...arguments),this.type="orderByValue"}_apply(e){ms(e,"orderByValue");let n=ts(e._queryParams,mc);return bn(n),new Be(e._repo,e._path,n,!0)}};function Rf(){return new tc}var nc=class extends Qe{constructor(e,n){super(),this._value=e,this._key=n,this.type="equalTo"}_apply(e){if(Wt("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Qo(this._value,this._key)._apply(new Jo(this._value,this._key)._apply(e))}};function Pf(t,e){return yr("equalTo","key",e,!0),new nc(t,e)}function pt(t,...e){let n=ne(t);for(let i of e)n=i._apply(n);return n}gb(Xe);bb(Xe);var uw="FIREBASE_DATABASE_EMULATOR_HOST",ic={},dw=!1;function hw(t,e,n,i){t.repoInfo_=new zo(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),i&&(t.authTokenProvider_=i)}function Bc(t,e,n,i,r){let o=i||t.options.databaseURL;o===void 0&&(t.options.projectId||jt("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ee("Using default host for project ",t.options.projectId),o=`${t.options.projectId}-default-rtdb.firebaseio.com`);let s=Kl(o,r),a=s.repoInfo,l,c;typeof process<"u"&&process.env&&(c=process.env[uw]),c?(l=!0,o=`http://${c}?ns=${a.namespace}`,s=Kl(o,r),a=s.repoInfo):l=!s.repoInfo.secure;let d=r&&l?new Zi(Zi.OWNER):new al(t.name,t.options,e);uf("Invalid Firebase Database URL",s),L(s.path)||jt("Database URL must point to the root of a Firebase Database (not including a child path).");let m=mw(a,t,d,new sl(t.name,n));return new rc(m,t)}function pw(t,e){let n=ic[e];(!n||n[t.key]!==t)&&jt(`Database ${e}(${t.repoInfo_}) has already been deleted.`),ff(t),delete n[t.key]}function mw(t,e,n,i){let r=ic[e.name];r||(r={},ic[e.name]=r);let o=r[t.toURLString()];return o&&jt("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new Hl(t,dw,n,i),r[t.toURLString()]=o,o}var rc=class{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(Kb(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Xe(this._repo,W())),this._rootInternal}_delete(){return this._rootInternal!==null&&(pw(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&jt("Cannot call "+e+" on a deleted database.")}};function Of(){Dm.IS_TRANSPORT_INITIALIZED&&ze("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function Ff(){Of(),Ji.forceDisallow()}function Lf(){Of(),ci.forceDisallow(),Ji.forceAllow()}function Uf(t,e,n,i={}){t=ne(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&jt("Cannot call useEmulator() after instance has already been initialized.");let r=t._repoInternal,o;if(r.repoInfo_.nodeAdmin)i.mockUserToken&&jt('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new Zi(Zi.OWNER);else if(i.mockUserToken){let s=typeof i.mockUserToken=="string"?i.mockUserToken:qr(i.mockUserToken,t.app.options.projectId);o=new Zi(s)}hw(r,e,n,o)}function Bf(t){t=ne(t),t._checkNotDeleted("goOffline"),ff(t._repo)}function Vf(t){t=ne(t),t._checkNotDeleted("goOnline"),nw(t._repo)}function jf(t,e){fm(t,e)}function fw(t){ac(eo),Re(new ve("database",(e,{instanceIdentifier:n})=>{let i=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),o=e.getProvider("app-check-internal");return Bc(i,r,o,n)},"PUBLIC").setMultipleInstances(!0)),Z(Rp,Pp,t),Z(Rp,Pp,"esm2017")}var gw={".sv":"timestamp"};function $f(){return gw}function Wf(t){return{".sv":{increment:t}}}var oc=class{constructor(e,n){this.committed=e,this.snapshot=n}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}};function Hf(t,e,n){var i;if(t=ne(t),Ze("Reference.transaction",t._path),t.key===".length"||t.key===".keys")throw"Reference.transaction failed: "+t.key+" is a read-only object.";let r=(i=n?.applyLocally)!==null&&i!==void 0?i:!0,o=new be,s=(l,c,d)=>{let m=null;l?o.reject(l):(m=new yi(d,new Xe(t._repo,t._path),ie),o.resolve(new oc(c,m)))},a=_s(t,()=>{});return iw(t._repo,t._path,e,s,a,r),o.promise}hc.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};hc.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};fw();var _w="@firebase/database-compat",vw="1.0.4";var yw=new ln("@firebase/database-compat"),Gf=function(t){let e="FIREBASE WARNING: "+t;yw.warn(e)};var Cw=function(t,e,n,i){if(!(i&&n===void 0)&&typeof n!="boolean")throw new Error($e(t,e)+"must be a boolean.")},bw=function(t,e,n){if(!(n&&e===void 0))switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error($e(t,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}};var Vc=class{constructor(e){this._delegate=e}cancel(e){z("OnDisconnect.cancel",0,1,arguments.length),_e("OnDisconnect.cancel","onComplete",e,!0);let n=this._delegate.cancel();return e&&n.then(()=>e(null),i=>e(i)),n}remove(e){z("OnDisconnect.remove",0,1,arguments.length),_e("OnDisconnect.remove","onComplete",e,!0);let n=this._delegate.remove();return e&&n.then(()=>e(null),i=>e(i)),n}set(e,n){z("OnDisconnect.set",1,2,arguments.length),_e("OnDisconnect.set","onComplete",n,!0);let i=this._delegate.set(e);return n&&i.then(()=>n(null),r=>n(r)),i}setWithPriority(e,n,i){z("OnDisconnect.setWithPriority",2,3,arguments.length),_e("OnDisconnect.setWithPriority","onComplete",i,!0);let r=this._delegate.setWithPriority(e,n);return i&&r.then(()=>i(null),o=>i(o)),r}update(e,n){if(z("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){let r={};for(let o=0;o<e.length;++o)r[""+o]=e[o];e=r,Gf("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}_e("OnDisconnect.update","onComplete",n,!0);let i=this._delegate.update(e);return n&&i.then(()=>n(null),r=>n(r)),i}};var jc=class{constructor(e,n){this.committed=e,this.snapshot=n}toJSON(){return z("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}};var Pn=class t{constructor(e,n){this._database=e,this._delegate=n}val(){return z("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return z("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return z("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return z("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return z("DataSnapshot.child",0,1,arguments.length),e=String(e),Ei("DataSnapshot.child","path",e,!1),new t(this._database,this._delegate.child(e))}hasChild(e){return z("DataSnapshot.hasChild",1,1,arguments.length),Ei("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return z("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return z("DataSnapshot.forEach",1,1,arguments.length),_e("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(n=>e(new t(this._database,n)))}hasChildren(){return z("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return z("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return z("DataSnapshot.ref",0,0,arguments.length),new Qt(this._database,this._delegate.ref)}get ref(){return this.getRef()}},vs=class t{constructor(e,n){this.database=e,this._delegate=n}on(e,n,i,r){var o;z("Query.on",2,4,arguments.length),_e("Query.on","callback",n,!1);let s=t.getCancelAndContextArgs_("Query.on",i,r),a=(c,d)=>{n.call(s.context,new Pn(this.database,c),d)};a.userCallback=n,a.context=s.context;let l=(o=s.cancel)===null||o===void 0?void 0:o.bind(s.context);switch(e){case"value":return _s(this._delegate,a,l),n;case"child_added":return Pc(this._delegate,a,l),n;case"child_removed":return Lc(this._delegate,a,l),n;case"child_changed":return Oc(this._delegate,a,l),n;case"child_moved":return Fc(this._delegate,a,l),n;default:throw new Error($e("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,n,i){if(z("Query.off",0,3,arguments.length),bw("Query.off",e,!0),_e("Query.off","callback",n,!0),Ds("Query.off","context",i,!0),n){let r=()=>{};r.userCallback=n,r.context=i,Uc(this._delegate,e,r)}else Uc(this._delegate,e)}get(){return Sf(this._delegate).then(e=>new Pn(this.database,e))}once(e,n,i,r){z("Query.once",1,4,arguments.length),_e("Query.once","callback",n,!0);let o=t.getCancelAndContextArgs_("Query.once",i,r),s=new be,a=(c,d)=>{let m=new Pn(this.database,c);n&&n.call(o.context,m,d),s.resolve(m)};a.userCallback=n,a.context=o.context;let l=c=>{o.cancel&&o.cancel.call(o.context,c),s.reject(c)};switch(e){case"value":_s(this._delegate,a,l,{onlyOnce:!0});break;case"child_added":Pc(this._delegate,a,l,{onlyOnce:!0});break;case"child_removed":Lc(this._delegate,a,l,{onlyOnce:!0});break;case"child_changed":Oc(this._delegate,a,l,{onlyOnce:!0});break;case"child_moved":Fc(this._delegate,a,l,{onlyOnce:!0});break;default:throw new Error($e("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return s.promise}limitToFirst(e){return z("Query.limitToFirst",1,1,arguments.length),new t(this.database,pt(this._delegate,zf(e)))}limitToLast(e){return z("Query.limitToLast",1,1,arguments.length),new t(this.database,pt(this._delegate,Af(e)))}orderByChild(e){return z("Query.orderByChild",1,1,arguments.length),new t(this.database,pt(this._delegate,xf(e)))}orderByKey(){return z("Query.orderByKey",0,0,arguments.length),new t(this.database,pt(this._delegate,Nf()))}orderByPriority(){return z("Query.orderByPriority",0,0,arguments.length),new t(this.database,pt(this._delegate,Df()))}orderByValue(){return z("Query.orderByValue",0,0,arguments.length),new t(this.database,pt(this._delegate,Rf()))}startAt(e=null,n){return z("Query.startAt",0,2,arguments.length),new t(this.database,pt(this._delegate,kf(e,n)))}startAfter(e=null,n){return z("Query.startAfter",0,2,arguments.length),new t(this.database,pt(this._delegate,Mf(e,n)))}endAt(e=null,n){return z("Query.endAt",0,2,arguments.length),new t(this.database,pt(this._delegate,If(e,n)))}endBefore(e=null,n){return z("Query.endBefore",0,2,arguments.length),new t(this.database,pt(this._delegate,Tf(e,n)))}equalTo(e,n){return z("Query.equalTo",1,2,arguments.length),new t(this.database,pt(this._delegate,Pf(e,n)))}toString(){return z("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return z("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if(z("Query.isEqual",1,1,arguments.length),!(e instanceof t)){let n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,n,i){let r={cancel:void 0,context:void 0};if(n&&i)r.cancel=n,_e(e,"cancel",r.cancel,!0),r.context=i,Ds(e,"context",r.context,!0);else if(n)if(typeof n=="object"&&n!==null)r.context=n;else if(typeof n=="function")r.cancel=n;else throw new Error($e(e,"cancelOrContext")+" must either be a cancel callback or a context object.");return r}get ref(){return new Qt(this.database,new Xe(this._delegate._repo,this._delegate._path))}},Qt=class t extends vs{constructor(e,n){super(e,new Be(n._repo,n._path,new or,!1)),this.database=e,this._delegate=n}getKey(){return z("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return z("Reference.child",1,1,arguments.length),typeof e=="number"&&(e=String(e)),new t(this.database,Cn(this._delegate,e))}getParent(){z("Reference.parent",0,0,arguments.length);let e=this._delegate.parent;return e?new t(this.database,e):null}getRoot(){return z("Reference.root",0,0,arguments.length),new t(this.database,this._delegate.root)}set(e,n){z("Reference.set",1,2,arguments.length),_e("Reference.set","onComplete",n,!0);let i=gs(this._delegate,e);return n&&i.then(()=>n(null),r=>n(r)),i}update(e,n){if(z("Reference.update",1,2,arguments.length),Array.isArray(e)){let r={};for(let o=0;o<e.length;++o)r[""+o]=e[o];e=r,Gf("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Ze("Reference.update",this._delegate._path),_e("Reference.update","onComplete",n,!0);let i=Ef(this._delegate,e);return n&&i.then(()=>n(null),r=>n(r)),i}setWithPriority(e,n,i){z("Reference.setWithPriority",2,3,arguments.length),_e("Reference.setWithPriority","onComplete",i,!0);let r=wf(this._delegate,e,n);return i&&r.then(()=>i(null),o=>i(o)),r}remove(e){z("Reference.remove",0,1,arguments.length),_e("Reference.remove","onComplete",e,!0);let n=Cf(this._delegate);return e&&n.then(()=>e(null),i=>e(i)),n}transaction(e,n,i){z("Reference.transaction",1,3,arguments.length),_e("Reference.transaction","transactionUpdate",e,!1),_e("Reference.transaction","onComplete",n,!0),Cw("Reference.transaction","applyLocally",i,!0);let r=Hf(this._delegate,e,{applyLocally:i}).then(o=>new jc(o.committed,new Pn(this.database,o.snapshot)));return n&&r.then(o=>n(null,o.committed,o.snapshot),o=>n(o,!1,null)),r}setPriority(e,n){z("Reference.setPriority",1,2,arguments.length),_e("Reference.setPriority","onComplete",n,!0);let i=bf(this._delegate,e);return n&&i.then(()=>n(null),r=>n(r)),i}push(e,n){z("Reference.push",0,2,arguments.length),_e("Reference.push","onComplete",n,!0);let i=yf(this._delegate,e),r=i.then(s=>new t(this.database,s));n&&r.then(()=>n(null),s=>n(s));let o=new t(this.database,i);return o.then=r.then.bind(r),o.catch=r.catch.bind(r,void 0),o}onDisconnect(){return Ze("Reference.onDisconnect",this._delegate._path),new Vc(new Yo(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}};var On=class{constructor(e,n){this._delegate=e,this.app=n,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:Ff,forceLongPolling:Lf}}useEmulator(e,n,i={}){Uf(this._delegate,e,n,i)}ref(e){if(z("database.ref",0,1,arguments.length),e instanceof Qt){let n=Rc(this._delegate,e.toString());return new Qt(this,n)}else{let n=Dc(this._delegate,e);return new Qt(this,n)}}refFromURL(e){z("database.refFromURL",1,1,arguments.length);let i=Rc(this._delegate,e);return new Qt(this,i)}goOffline(){return z("database.goOffline",0,0,arguments.length),Bf(this._delegate)}goOnline(){return z("database.goOnline",0,0,arguments.length),Vf(this._delegate)}};On.ServerValue={TIMESTAMP:$f(),increment:t=>Wf(t)};function ww({app:t,url:e,version:n,customAuthImpl:i,customAppCheckImpl:r,namespace:o,nodeAdmin:s=!1}){ac(n);let a=new Rs("database-standalone"),l=new Qr("auth-internal",a);l.setComponent(new ve("auth-internal",()=>i,"PRIVATE"));let c;return r&&(c=new Qr("app-check-internal",a),c.setComponent(new ve("app-check-internal",()=>r,"PRIVATE"))),{instance:new On(Bc(t,l,c,e,s),t),namespace:o}}var Ew=Object.freeze({__proto__:null,initStandalone:ww});var Sw=On.ServerValue;function Iw(t){t.INTERNAL.registerComponent(new ve("database-compat",(e,{instanceIdentifier:n})=>{let i=e.getProvider("app-compat").getImmediate(),r=e.getProvider("database").getImmediate({identifier:n});return new On(r,i)},"PUBLIC").setServiceProps({Reference:Qt,Query:vs,Database:On,DataSnapshot:Pn,enableLogging:jf,INTERNAL:Ew,ServerValue:Sw}).setMultipleInstances(!0)),t.registerVersion(_w,vw)}Iw(gt);function wr(t,e,n="on",i=$c){return new wn(r=>{let o=null;return o=t[n](e,(s,a)=>{i.schedule(()=>{r.next({snapshot:s,prevKey:a})}),n==="once"&&i.schedule(()=>r.complete())},s=>{i.schedule(()=>r.error(s))}),n==="on"?{unsubscribe(){o!=null&&t.off(e,o)}}:{unsubscribe(){}}}).pipe(xe(r=>{let{snapshot:o,prevKey:s}=r,a=null;return o.exists()&&(a=o.key),{type:e,payload:o,prevKey:s,key:a}}),Zc())}function Tw(t){return typeof t=="string"}function kw(t){return typeof t.exportVal=="function"}function Xf(t){return t==null}function Qf(t){return typeof t.set=="function"}function Kf(t,e){return Qf(e)?e:t.ref(e)}function Jf(t,e){if(Tw(t))return e.stringCase();if(Qf(t))return e.firebaseCase();if(kw(t))return e.snapshotCase();throw new Error(`Expects a string, snapshot, or reference. Got: ${typeof t}`)}function eg(t){return(Xf(t)||t.length===0)&&(t=["child_added","child_removed","child_changed","child_moved"]),t}function tg(t,e,n){e=eg(e);let i=e.map(r=>wr(t,r,"on",n));return Ti(...i)}function Mw(t,e,n){let i=tg(t,e).pipe(ws((r,o)=>[...r,o],[]));return Aw(t,i,n)}function zw(t,e){return wr(t,"value","on",e).pipe(xe(n=>{let i;return n.payload.forEach(r=>(i=r.key,!1)),{data:n,lastKeyToLoad:i}}))}function Aw(t,e,n){return zw(t,n).pipe(Qc(e),xe(([r,o])=>{let s=r.lastKeyToLoad,a=o.map(l=>l.key);return{actions:o,lastKeyToLoad:s,loadedKeys:a}}),Yc(r=>r.loadedKeys.indexOf(r.lastKeyToLoad)===-1),xe(r=>r.actions))}function qf(t,e){return function(i,r){return Jf(i,{stringCase:()=>t.child(i)[e](r),firebaseCase:()=>i[e](r),snapshotCase:()=>i.ref[e](r)})}}function xw(t){return function(n){return n?Jf(n,{stringCase:()=>t.child(n).remove(),firebaseCase:()=>n.remove(),snapshotCase:()=>n.ref.remove()}):t.remove()}}function Nw(t,e,n){return wr(t,"value","once",n).pipe(Ve(i=>{let r=[tt(i)];return e.forEach(o=>r.push(wr(t,o,"on",n))),Ti(...r).pipe(ws(Rw,[]))}),Ir())}function ng(t,e){let n=t.length;for(let i=0;i<n;i++)if(t[i].payload.key===e)return i;return-1}function Dw(t,e){if(Xf(e))return 0;{let n=ng(t,e);return n===-1?t.length:n+1}}function Rw(t,e){let{payload:n,prevKey:i,key:r}=e,o=ng(t,r),s=Dw(t,i);switch(e.type){case"value":if(e.payload?.exists()){let a=null;e.payload.forEach(l=>{let c={payload:l,type:"value",prevKey:a,key:l.key};return a=l.key,t=[...t,c],!1})}return t;case"child_added":if(o>-1)(t[o-1]?.key||null)!==i&&(t=t.filter(l=>l.payload.key!==n.key),t.splice(s,0,e));else{if(i==null)return[e,...t];t=t.slice(),t.splice(s,0,e)}return t;case"child_removed":return t.filter(a=>a.payload.key!==n.key);case"child_changed":return t.map(a=>a.payload.key===r?e:a);case"child_moved":if(o>-1){let a=t.splice(o,1)[0];return t=t.slice(),t.splice(s,0,a),t}return t;default:return t}}function Zf(t,e,n){return e=eg(e),Nw(t,e,n)}function Pw(t,e){let n=e.schedulers.outsideAngular,i=e.schedulers.ngZone.run(()=>t.ref);return{query:t,update:qf(i,"update"),set:qf(i,"set"),push:r=>i.push(r),remove:xw(i),snapshotChanges(r){return Zf(t,r,n).pipe(Gt)},stateChanges(r){return tg(t,r,n).pipe(Gt)},auditTrail(r){return Mw(t,r,n).pipe(Gt)},valueChanges(r,o){return Zf(t,r,n).pipe(xe(a=>a.map(l=>o&&o.idField?et(Ie({},l.payload.val()),{[o.idField]:l.key}):l.payload.val())),Gt)}}}function Yf(t,e){return function(){return wr(t,"value","on",e)}}function Ow(t,e){return{query:t,snapshotChanges(){return Yf(t,e.schedulers.outsideAngular)().pipe(Gt)},update(n){return t.ref.update(n)},set(n){return t.ref.set(n)},remove(){return t.ref.remove()},valueChanges(){return Yf(t,e.schedulers.outsideAngular)().pipe(Gt,xe(i=>i.payload.exists()?i.payload.val():null))}}}var Fw=new de("angularfire2.realtimeDatabaseURL"),Lw=new de("angularfire2.database.use-emulator"),Uw=(()=>{class t{schedulers;database;constructor(n,i,r,o,s,a,l,c,d,m,f,v,w,R,P){this.schedulers=a;let ye=l,Ae=Io(n,s,i);c&&qa(Ae,s,d,f,v,w,m,R),this.database=To(`${Ae.name}.database.${r}`,"AngularFireDatabase",Ae.name,()=>{let j=s.runOutsideAngular(()=>Ae.database(r||void 0));return ye&&j.useEmulator(...ye),j},[ye])}list(n,i){let r=this.schedulers.ngZone.runOutsideAngular(()=>Kf(this.database,n)),o=r;return i&&(o=i(r)),Pw(o,this)}object(n){let i=this.schedulers.ngZone.runOutsideAngular(()=>Kf(this.database,n));return Ow(i,this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}static \u0275fac=function(i){return new(i||t)(N(Eo),N(So,8),N(Fw,8),N(wt),N(J),N(We),N(Lw,8),N(Dp,8),N(ja,8),N($a,8),N(Wa,8),N(Ha,8),N(Ga,8),N(Ka,8),N(Ht,8))};static \u0275prov=je({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})(),ig=(()=>{class t{constructor(){gt.registerVersion("angularfire",Pe.full,"rtdb-compat")}static \u0275fac=function(i){return new(i||t)};static \u0275mod=De({type:t});static \u0275inj=Ne({providers:[Uw]})}return t})();function Bw(t){let e=t,n=Math.floor(Math.abs(t)),i=t.toString().replace(/^[^.]*\.?/,"").length;return i===0&&n%10===1&&n%100!==11?1:i===0&&n%10===Math.floor(n%10)&&n%10>=2&&n%10<=4&&!(n%100>=12&&n%100<=14)?3:i===0&&n%10===0||i===0&&n%10===Math.floor(n%10)&&n%10>=5&&n%10<=9||i===0&&n%100===Math.floor(n%100)&&n%100>=11&&n%100<=14?4:5}var rg=["uk",[["\u0434\u043F","\u043F\u043F"],void 0,void 0],void 0,[["\u041D","\u041F","\u0412","\u0421","\u0427","\u041F","\u0421"],["\u043D\u0434","\u043F\u043D","\u0432\u0442","\u0441\u0440","\u0447\u0442","\u043F\u0442","\u0441\u0431"],["\u043D\u0435\u0434\u0456\u043B\u044F","\u043F\u043E\u043D\u0435\u0434\u0456\u043B\u043E\u043A","\u0432\u0456\u0432\u0442\u043E\u0440\u043E\u043A","\u0441\u0435\u0440\u0435\u0434\u0430","\u0447\u0435\u0442\u0432\u0435\u0440","\u043F\u02BC\u044F\u0442\u043D\u0438\u0446\u044F","\u0441\u0443\u0431\u043E\u0442\u0430"],["\u043D\u0434","\u043F\u043D","\u0432\u0442","\u0441\u0440","\u0447\u0442","\u043F\u0442","\u0441\u0431"]],void 0,[["\u0441","\u043B","\u0431","\u043A","\u0442","\u0447","\u043B","\u0441","\u0432","\u0436","\u043B","\u0433"],["\u0441\u0456\u0447.","\u043B\u044E\u0442.","\u0431\u0435\u0440.","\u043A\u0432\u0456\u0442.","\u0442\u0440\u0430\u0432.","\u0447\u0435\u0440\u0432.","\u043B\u0438\u043F.","\u0441\u0435\u0440\u043F.","\u0432\u0435\u0440.","\u0436\u043E\u0432\u0442.","\u043B\u0438\u0441\u0442.","\u0433\u0440\u0443\u0434."],["\u0441\u0456\u0447\u043D\u044F","\u043B\u044E\u0442\u043E\u0433\u043E","\u0431\u0435\u0440\u0435\u0437\u043D\u044F","\u043A\u0432\u0456\u0442\u043D\u044F","\u0442\u0440\u0430\u0432\u043D\u044F","\u0447\u0435\u0440\u0432\u043D\u044F","\u043B\u0438\u043F\u043D\u044F","\u0441\u0435\u0440\u043F\u043D\u044F","\u0432\u0435\u0440\u0435\u0441\u043D\u044F","\u0436\u043E\u0432\u0442\u043D\u044F","\u043B\u0438\u0441\u0442\u043E\u043F\u0430\u0434\u0430","\u0433\u0440\u0443\u0434\u043D\u044F"]],[["\u0421","\u041B","\u0411","\u041A","\u0422","\u0427","\u041B","\u0421","\u0412","\u0416","\u041B","\u0413"],["\u0441\u0456\u0447","\u043B\u044E\u0442","\u0431\u0435\u0440","\u043A\u0432\u0456","\u0442\u0440\u0430","\u0447\u0435\u0440","\u043B\u0438\u043F","\u0441\u0435\u0440","\u0432\u0435\u0440","\u0436\u043E\u0432","\u043B\u0438\u0441","\u0433\u0440\u0443"],["\u0441\u0456\u0447\u0435\u043D\u044C","\u043B\u044E\u0442\u0438\u0439","\u0431\u0435\u0440\u0435\u0437\u0435\u043D\u044C","\u043A\u0432\u0456\u0442\u0435\u043D\u044C","\u0442\u0440\u0430\u0432\u0435\u043D\u044C","\u0447\u0435\u0440\u0432\u0435\u043D\u044C","\u043B\u0438\u043F\u0435\u043D\u044C","\u0441\u0435\u0440\u043F\u0435\u043D\u044C","\u0432\u0435\u0440\u0435\u0441\u0435\u043D\u044C","\u0436\u043E\u0432\u0442\u0435\u043D\u044C","\u043B\u0438\u0441\u0442\u043E\u043F\u0430\u0434","\u0433\u0440\u0443\u0434\u0435\u043D\u044C"]],[["\u0434\u043E \u043D.\u0435.","\u043D.\u0435."],["\u0434\u043E \u043D. \u0435.","\u043D. \u0435."],["\u0434\u043E \u043D\u0430\u0448\u043E\u0457 \u0435\u0440\u0438","\u043D\u0430\u0448\u043E\u0457 \u0435\u0440\u0438"]],1,[6,0],["dd.MM.yy","d MMM y '\u0440'.","d MMMM y '\u0440'.","EEEE, d MMMM y '\u0440'."],["HH:mm","HH:mm:ss","HH:mm:ss z","HH:mm:ss zzzz"],["{1}, {0}",void 0,"{1} '\u043E' {0}",void 0],[",","\xA0",";","%","+","-","\u0415","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","#,##0.00\xA0\xA4","#E0"],"UAH","\u20B4","\u0443\u043A\u0440\u0430\u0457\u043D\u0441\u044C\u043A\u0430 \u0433\u0440\u0438\u0432\u043D\u044F",{AUD:[void 0,"$"],BRL:[void 0,"R$"],BYN:[void 0,"\u0440."],CAD:[void 0,"$"],CNY:[void 0,"\xA5"],EUR:[void 0,"\u20AC"],GBP:[void 0,"\xA3"],HKD:[void 0,"$"],ILS:[void 0,"\u20AA"],INR:[void 0,"\u20B9"],KRW:[void 0,"\u20A9"],MXN:[void 0,"$"],NZD:[void 0,"$"],PHP:[void 0,"\u20B1"],RUR:[void 0,"\u0440."],TWD:[void 0,"$"],UAH:["\u20B4"],UAK:["\u043A\u0440\u0431."],USD:[void 0,"$"],VND:[void 0,"\u20AB"],XCD:[void 0,"$"]},"ltr",Bw];function Vw(t){let e=t,n=Math.floor(Math.abs(t)),i=t.toString().replace(/^[^.]*\.?/,"").length;return n===1&&i===0?1:5}var og=["en",[["a","p"],["AM","PM"],void 0],[["AM","PM"],void 0,void 0],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],void 0,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],void 0,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",void 0,"{1} 'at' {0}",void 0],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",Vw];function jw(t){let e=t,n=Math.floor(Math.abs(t)),i=t.toString().replace(/^[^.]*\.?/,"").length;return n===1&&i===0?1:n===Math.floor(n)&&n>=2&&n<=4&&i===0?3:i!==0?4:5}var sg=["cs",[["dop.","odp."],void 0,void 0],void 0,[["N","P","\xDA","S","\u010C","P","S"],["ne","po","\xFAt","st","\u010Dt","p\xE1","so"],["ned\u011Ble","pond\u011Bl\xED","\xFAter\xFD","st\u0159eda","\u010Dtvrtek","p\xE1tek","sobota"],["ne","po","\xFAt","st","\u010Dt","p\xE1","so"]],void 0,[["1","2","3","4","5","6","7","8","9","10","11","12"],["led","\xFAno","b\u0159e","dub","kv\u011B","\u010Dvn","\u010Dvc","srp","z\xE1\u0159","\u0159\xEDj","lis","pro"],["ledna","\xFAnora","b\u0159ezna","dubna","kv\u011Btna","\u010Dervna","\u010Dervence","srpna","z\xE1\u0159\xED","\u0159\xEDjna","listopadu","prosince"]],[["1","2","3","4","5","6","7","8","9","10","11","12"],["led","\xFAno","b\u0159e","dub","kv\u011B","\u010Dvn","\u010Dvc","srp","z\xE1\u0159","\u0159\xEDj","lis","pro"],["leden","\xFAnor","b\u0159ezen","duben","kv\u011Bten","\u010Derven","\u010Dervenec","srpen","z\xE1\u0159\xED","\u0159\xEDjen","listopad","prosinec"]],[["p\u0159.n.l.","n.l."],["p\u0159. n. l.","n. l."],["p\u0159ed na\u0161\xEDm letopo\u010Dtem","na\u0161eho letopo\u010Dtu"]],1,[6,0],["dd.MM.yy","d. M. y","d. MMMM y","EEEE d. MMMM y"],["H:mm","H:mm:ss","H:mm:ss z","H:mm:ss zzzz"],["{1} {0}",void 0,void 0,void 0],[",","\xA0",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0\xA0%","#,##0.00\xA0\xA4","#E0"],"CZK","K\u010D","\u010Desk\xE1 koruna",{AUD:["AU$","$"],BYN:[void 0,"\u0440."],CSK:["K\u010Ds"],CZK:["K\u010D"],ILS:[void 0,"\u20AA"],INR:[void 0,"\u20B9"],JPY:["JP\xA5","\xA5"],PHP:[void 0,"\u20B1"],RON:[void 0,"L"],RUR:[void 0,"\u0440."],TWD:["NT$"],USD:["US$","$"],VND:[void 0,"\u20AB"],XEU:["ECU"],XXX:[]},"ltr",jw];zr(rg);zr(og);zr(sg);var ag={providers:[Su(hh,Tu(),ku(),Iu()),En([ud(()=>dd(Ju)),yd(()=>bd()),Ed(()=>kd()),Nh(()=>Dh()),qh(()=>Zh()),Xh(()=>Qh()),up(()=>dp()),vp(()=>ea())]),ig,En(ho),En(Dr.forChild(Od)),En(xu),En(Pd),En(Rd),ph(),_u()]};function Ww(t,e){t&1&&(u(0,"li",7)(1,"a",6),g(2,"\u0411\u0440\u043E\u043D\u044E\u0432\u0430\u043D\u043D\u044F"),p()())}function Hw(t,e){if(t&1){let n=re();u(0,"li",4),g(1),p(),C(2,"li",5),u(3,"li",4)(4,"a",6),g(5,"\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u0442\u0438"),p()(),I(6,Ww,3,0,"li",7),u(7,"li",8),E("click",function(){A(n);let r=M();return x(r.logout())}),g(8,"\u0412\u0438\u0445\u0456\u0434"),p()}if(t&2){let n=M(),i;h(1),oe(" ",(i=n.$user())==null?null:i.username," "),h(5),K(6,n._auth.isAdmin()?6:-1)}}function Gw(t,e){t&1&&(u(0,"li",9),g(1,"\u0412\u0445\u0456\u0434"),p(),u(2,"li",10),g(3,"\u0420\u0435\u0433\u0456\u0441\u0442\u0440\u0430\u0446\u0456\u044F"),p())}var lg=(()=>{let e=class e{constructor(){this._signIn=b(dn),this._auth=b(we),this.router=b(se),this.$user=en(()=>this._auth.$user())}ngOnInit(){}logout(){this._auth.logout()}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=T({type:e,selectors:[["user-app"]],standalone:!0,features:[k],decls:7,vars:4,consts:[[1,"avatar"],["nz-dropdown","","nzIcon","user",3,"nzSrc","nzDropdownMenu"],["menu2","nzDropdownMenu"],["nz-menu",""],["nz-menu-item","","routerLink","/user"],["nz-menu-divider",""],["routerLinkActive","active"],["nz-menu-item","","routerLink","/admin"],["nz-menu-item","",3,"click"],["nz-menu-item","","routerLink","/login"],["nz-menu-item","","routerLink","/register"]],template:function(r,o){if(r&1&&(u(0,"div",0),C(1,"nz-avatar",1),u(2,"nz-dropdown-menu",null,2)(4,"ul",3),I(5,Hw,9,2)(6,Gw,4,0),p()()()),r&2){let s=G(3),a;h(1),_("nzSrc",(a=o.$user())==null?null:a.photoURL)("nzDropdownMenu",s),h(4),K(5,o.$user()?5:-1),h(1),K(6,o.$user()?-1:6)}},dependencies:[at,$,U,Or,q,Wn,$n,Pu,Fr,Lr,O],encapsulation:2});let t=e;return t})();function Kw(t,e){if(t&1&&(u(0,"li")(1,"a",23),g(2),p()()),t&2){let n=e.$implicit;h(1),_("routerLink",n.link),h(1),X(n.title)}}function qw(t,e){if(t&1&&(u(0,"li",24)(1,"a",23),g(2),p()()),t&2){let n=e.$implicit,i=e.index;h(1),_("routerLink",n.link),h(1),X("nav.item"+(i+1)+".title")}}var Zw=()=>({standalone:!0}),cg=(()=>{let e=class e{constructor(){this.authService=b(we),this.translationService=b(so),this.i18n=b(ao),this.settings=b(Nd),this.languageFormControl="uk",this.navItems=Qu}ngOnInit(){}changeLanguage(i){this.i18n.langSig.set(i),this.settings.save()}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=T({type:e,selectors:[["app-nav"]],standalone:!0,features:[k],decls:42,vars:15,consts:[["id","header",1,"nav-collapse"],[1,"row","clearfix"],[1,"col-1"],["id","logo"],["nz-dropdown","","nzTrigger","click","id","nav-trigger",3,"nzDropdownMenu"],[1,"social-icons"],["target","_blank","title","Facebook","href","https://www.facebook.com/username"],[1,"fa","fa-facebook","fa-1x"],["target","_blank","title","Instagram","href","http://www.instagram.com/username"],[1,"fa","fa-instagram","fa-1x"],["target","_blank","title","Telegram","href","http://www.tg.me/username"],[1,"fa","fa-telegram","fa-1x"],[2,"padding-left","10px"],["nzSize","small","name","language","id","language",3,"ngModel","ngModelOptions","ngModelChange"],["nzValue","uk",3,"nzLabel"],["nzValue","cs",3,"nzLabel"],["nzValue","en",3,"nzLabel"],["id","nav-main"],[4,"ngFor","ngForOf"],["menu","nzDropdownMenu"],["id","nav-mobile"],["nz-menu",""],["nz-menu-item","",4,"ngFor","ngForOf"],["routerLinkActive","active","ariaCurrentWhenActive","page",3,"routerLink"],["nz-menu-item",""]],template:function(r,o){if(r&1&&(u(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),C(5,"span"),p(),u(6,"h2"),g(7,"Miko"),p()(),u(8,"aside")(9,"ul",5)(10,"li")(11,"a",6),C(12,"i",7),u(13,"span"),g(14,"Facebook"),p()()(),u(15,"li")(16,"a",8),C(17,"i",9),u(18,"span"),g(19,"Instagram"),p()()(),u(20,"li")(21,"a",10),C(22,"i",11),u(23,"span"),g(24,"Telegram"),p()()(),u(25,"li",12)(26,"nz-select",13),E("ngModelChange",function(a){return o.settings.language=a})("ngModelChange",function(a){return o.changeLanguage(a)}),C(27,"nz-option",14),ot(28,"translate"),C(29,"nz-option",15),ot(30,"translate"),C(31,"nz-option",16),ot(32,"translate"),p()()()(),C(33,"user-app"),u(34,"nav",17)(35,"ul"),I(36,Kw,3,2,"li",18),p()(),u(37,"nz-dropdown-menu",null,19)(39,"div",20)(40,"ul",21),I(41,qw,3,2,"li",22),p()()()()()()),r&2){let s=G(38);h(4),_("nzDropdownMenu",s),h(22),_("ngModel",o.settings.language)("ngModelOptions",Un(14,Zw)),h(1),rt("nzLabel",It(28,8,"Ukraine")),h(2),rt("nzLabel",It(30,10,"Czech")),h(2),rt("nzLabel",It(32,12,"English")),h(5),_("ngForOf",o.navItems),h(5),_("ngForOf",o.navItems)}},dependencies:[at,Nr,O,fe,lt,q,Wn,$n,Fr,Lr,Hn,Gn,Ce,Dd,lg],changeDetection:0});let t=e;return t})();var ug=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=T({type:e,selectors:[["app-footer"]],standalone:!0,features:[k],decls:22,vars:0,consts:[["id","landing-footer",1,"clearfix"],[1,"row","clearfix"],["id","copyright",1,"col-2"],["href","https://github.com/ifoder"],[1,"col-2","social-icons"],["target","_blank","title","Facebook","href","https://www.facebook.com/username"],[1,"fa","fa-facebook","fa-1x"],["target","_blank","title","Instagram","href","http://www.instagram.com/username"],[1,"fa","fa-instagram","fa-1x"],["target","_blank","title","telegram","href","http://t.me/username"],[1,"fa","fa-telegram","fa-1x"]],template:function(r,o){r&1&&(u(0,"footer",0)(1,"div",1)(2,"p",2),g(3," Made by ifoder "),u(4,"a",3),g(5,"ifoder"),p()(),u(6,"ul",4)(7,"li")(8,"a",5),C(9,"i",6),u(10,"span"),g(11,"Facebook"),p()()(),u(12,"li")(13,"a",7),C(14,"i",8),u(15,"span"),g(16,"Instagram"),p()()(),u(17,"li")(18,"a",9),C(19,"i",10),u(20,"span"),g(21,"Telegram"),p()()()()()())},dependencies:[$,O],styles:["footer[_ngcontent-%COMP%]{padding:20px 0 15px}"]});let t=e;return t})();function Yw(t,e){t&1&&(u(0,"nz-header",2),C(1,"app-nav"),p())}function Xw(t,e){t&1&&(u(0,"nz-footer"),C(1,"app-footer"),p())}function Qw(t,e){if(t&1&&(u(0,"nz-layout"),I(1,Yw,2,0,"nz-header",1),u(2,"nz-content"),C(3,"router-outlet"),p(),I(4,Xw,2,0,"nz-footer",0),p()),t&2){let n=M();h(1),_("ngIf",n.showLayoutTopBottom()),h(3),_("ngIf",n.showLayoutTopBottom())}}var dg=(()=>{let e=class e{constructor(){this.authService=b(we),this.router=b(se),this.storage=b(He),this.datePicker=b(un),this.calendarEvents=b(cn),this.translationsService=b(so),this.i18n=b(ao),this.Nzi18n=b(Br),this.showLayoutTopBottom=Tr(!0)}ngOnInit(){this.Nzi18n.setLocale(Uu),this.calendarEvents.fetchData(),this.authService.fetchAuth(),this.translationsService.fetchTranslate(),this.getTranslations(),this.router.events.subscribe(i=>{i instanceof bu&&i.url.substring(0,6)=="/admin"&&this.showLayoutTopBottom.set(!1)})}getTranslations(){this.translationsService.fetchTranslate(),console.log(this.translationsService.$translations())}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=T({type:e,selectors:[["app-root"]],standalone:!0,features:[k],decls:1,vars:1,consts:[[4,"ngIf"],["style","background: none !important",4,"ngIf"],[2,"background","none !important"]],template:function(r,o){r&1&&I(0,Qw,5,2,"nz-layout",0),r&2&&_("ngIf",o.translationsService.$translations())},dependencies:[xr,cg,ug,Gu,Gr,Wu,Wr,Hr,O,st],encapsulation:2});let t=e;return t})();yu(dg,ag).catch(t=>console.error(t));
