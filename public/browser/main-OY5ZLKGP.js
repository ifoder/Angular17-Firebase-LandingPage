import{$ as yd,$a as Bn,A as kn,Aa as se,B as On,Ba as De,C as Ts,Ca as Ns,D as Es,Da as yt,E as Ht,Ea as vt,F as ld,Fa as Nt,G as Rn,Ga as Be,H as An,Ha as xt,Ia as at,Ja as bt,K as cd,Ka as wt,La as zd,M as Pe,Ma as Ld,N as Fe,Na as Bd,O as ze,Oa as xs,P as dd,Pa as Vd,Q as _i,Qa as Ud,R as ud,Ra as Gd,S as hd,Sa as Ct,T as pd,Ta as Tt,U as fd,Ua as Hd,V as gd,Va as $d,W as md,Wa as Wt,Xa as Kt,Ya as jd,Z as _d,Za as Et,_ as Nn,_a as Qe,a as Wc,aa as vd,ab as Vn,b as Kc,bb as Wd,c as qc,ca as Y,cb as Kd,d as Yc,da as Q,e as Qc,ea as xn,f as Zc,fa as Pn,g as Jc,ga as Fn,h as Xc,ha as bd,i as be,ia as wd,j as Sn,k as ed,l as td,m as nd,n as id,na as Cd,o as sd,oa as Td,q as rd,r as od,s as In,t as ie,u as Gt,v as Dn,va as Ed,wa as Sd,x as ad,xa as ee,y as Mn,ya as gt,za as Id}from"./chunk-YM4LGTH6.js";import{$ as kc,$b as U,Aa as et,B as At,Ba as tt,Bb as v,Bc as Uc,C as Yr,Cc as ro,Db as no,Dc as Gc,E as vn,F as pt,Fb as ms,Fc as oo,G as Ec,Gc as Se,H as fs,Ha as ne,Ja as Nc,Ka as fi,Lb as z,Ma as to,Mb as te,Mc as bs,Nb as wn,O as rn,Ob as mi,Oc as Hc,Pa as me,Pb as it,Qb as st,Qc as ao,R as hi,Rb as g,S as Sc,Sb as m,Ta as nt,Tb as D,Tc as ws,Ua as xc,V as Ic,W as Dc,Xb as rt,Yc as Cn,Z as Mc,_ as Qr,aa as Zr,bc as ue,c as Rt,ca as Oc,cc as _s,da as Jr,dc as ys,ea as _e,ec as Vt,f as Ve,fa as Xr,fc as vs,g as Kr,ga as xe,gb as ft,gc as Ee,hc as y,ia as Rc,ib as Pc,ic as H,id as Cs,j as Cc,jb as gi,jc as qe,ka as pi,kb as Fc,kc as Bc,lc as Vc,ld as Ut,m as Tc,ma as Ac,mb as bn,md as Tn,n as ui,na as ye,nb as zc,o as hs,oa as x,p as ps,pc as O,q as Te,qb as p,ra as q,rb as oe,sa as I,sd as $c,ta as b,u as de,ub as Ue,va as k,vb as V,vc as io,w as qr,wa as P,wc as so,wd as ve,xa as eo,yd as En,za as gs,zb as Lc,zd as jc}from"./chunk-XIQZ7Y67.js";import{a as qd}from"./chunk-J7IX5MLJ.js";import{a as lt}from"./chunk-2QU4JL6V.js";import"./chunk-ISPV3OIH.js";import"./chunk-6ATVBBSN.js";import{$ as po,A as Ds,B as re,C as Od,D as Rd,E as Ye,F as $t,G as Ms,H as Ci,I as Ad,J as Nd,M as xd,O as T,P as Le,Q as ae,R as uo,S as Pd,T as Ti,U as ks,V as j,W as le,X as Os,Y as ho,Z as Fd,_ as jt,a as _,aa as Rs,b as zn,c as Ss,d as Dd,ea as Ie,f as Md,fa as ot,ha as As,i as yi,ja as _t,k as he,l as Is,ma as G,n as lo,q as co,r as kd,t as mt,v as on,w as vi,x as bi,y as wi,z as Ln}from"./chunk-MFV7QFFA.js";import{a as ge,b as Ne,f as C}from"./chunk-FO65GQC2.js";var Yd={title:"Kade\u0159nictv\xED Miko Brno",phone:"+420 775 495 488",addressText:"Skacelova 1648/24, Brno-Kralovo Pole",workHour:"Po-P\xE0 09:00-20:00 So-N\u011B 10:00-18:00",buttontext:"\u041E\u043D\u043B\u0430\u0439\u043D \u0431\u0440\u043E\u043D\u044E\u0432\u0430\u043D\u043D\u044F"};var Qd={title:"\u041F\u0440\u0430\u0439\u0441-\u043B\u0438\u0441\u0442",cardButton:"\u0417\u0430\u0431\u0440\u043E\u043D\u044E\u0432\u0430\u0442\u0438 \u0434\u0430\u0442\u0443",currently:"K\u010D"},Zd={title:"Gallery",description:"Project images",detail:`Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do
eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam!`,GalleryImages:[{id:1,url:"../assets/images/gallery-images/gallery-image-1.jpg",name:"Tree"},{id:2,url:"../assets/images/gallery-images/gallery-image-2.jpg",name:"Fingerprint"},{id:3,url:"../assets/images/gallery-images/gallery-image-3.jpg",name:"The Man"},{id:4,url:"../assets/images/gallery-images/gallery-image-4.jpg",name:"Mustache"},{id:5,url:"../assets/images/gallery-images/gallery-image-5.jpg",name:"Moose"},{id:6,url:"../assets/images/gallery-images/gallery-image-6.jpg",name:"Justice"}]};var Ei=["9:00","10:00","11:00","12:00","13:00","14:00","15:00","16:00","17:00","18:00","19:00"];var Ps=(()=>{let e=class e{constructor(){this.i18n=b(Et),this.about={image:"../../../assets/images/about.jpg",image2:"../../../assets/images/about2.jpg"}}};e.\u0275fac=function(s){return new(s||e)},e.\u0275cmp=k({type:e,selectors:[["app-about"]],standalone:!0,features:[O],decls:12,vars:14,consts:[["id","about",1,"introduction","scrollto"],["nz-row","",1,"row2","clearfix"],["nz-col","","nzSpan","20",1,"section-heading"],[1,"section-title"],["nz-col","",3,"nzXl","nzLg","nzMd","nzSm","nzXs"],[1,"section-subtitle"],["nz-col","","nzOffset","2",1,"right-content",3,"nzXl","nzLg","nzMd","nzSm","nzXs"],["alt","",3,"src"]],template:function(s,r){s&1&&(g(0,"section",0)(1,"div",1)(2,"div",2)(3,"h3"),y(4),m(),g(5,"h2",3),y(6),m()(),g(7,"div",4)(8,"p",5),y(9),m()(),g(10,"div",6),D(11,"img",7),m()()()),s&2&&(p(4),H(r.i18n.get("about")),p(2),H(r.i18n.get("about.title")),p(1),v("nzXl",12)("nzLg",12)("nzMd",8)("nzSm",20)("nzXs",20),p(2),H(r.i18n.get("about.detail")),p(1),v("nzXl",6)("nzLg",6)("nzMd",6)("nzSm",20)("nzXs",20),p(1),v("src",r.about.image2,ft))},dependencies:[ee,Q,Y],styles:[".right-content[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:350px}"]});let t=e;return t})();var Lg=["*"],Fs=class{_clearListeners(){for(let e of this._listeners)e.remove();this._listeners=[]}constructor(e){this._ngZone=e,this._pending=[],this._listeners=[],this._targetStream=new Kr(void 0)}getLazyEmitter(e){return this._targetStream.pipe(_e(n=>{let i=new Rt(s=>{if(!n){this._pending.push({observable:i,observer:s});return}let r=n.addListener(e,o=>{this._ngZone.run(()=>s.next(o))});if(!r){s.complete();return}return this._listeners.push(r),()=>r.remove()});return i}))}setTarget(e){let n=this._targetStream.value;e!==n&&(n&&(this._clearListeners(),this._pending=[]),this._targetStream.next(e),this._pending.forEach(i=>i.observable.subscribe(i.observer)),this._pending=[])}destroy(){this._clearListeners(),this._pending=[],this._targetStream.complete()}},Si={center:{lat:37.421995,lng:-122.084092},zoom:17,mapTypeId:"roadmap"},Jd="500px",Xd="500px",fo=(()=>{let e=class e{set center(i){this._center=i}set zoom(i){this._zoom=i}set options(i){this._options=i||Si}constructor(i,s,r){if(this._elementRef=i,this._ngZone=s,this._eventManager=new Fs(b(V)),this.height=Jd,this.width=Xd,this._options=Si,this.mapInitialized=new Ue,this.authFailure=new Ue,this.boundsChanged=this._eventManager.getLazyEmitter("bounds_changed"),this.centerChanged=this._eventManager.getLazyEmitter("center_changed"),this.mapClick=this._eventManager.getLazyEmitter("click"),this.mapDblclick=this._eventManager.getLazyEmitter("dblclick"),this.mapDrag=this._eventManager.getLazyEmitter("drag"),this.mapDragend=this._eventManager.getLazyEmitter("dragend"),this.mapDragstart=this._eventManager.getLazyEmitter("dragstart"),this.headingChanged=this._eventManager.getLazyEmitter("heading_changed"),this.idle=this._eventManager.getLazyEmitter("idle"),this.maptypeidChanged=this._eventManager.getLazyEmitter("maptypeid_changed"),this.mapMousemove=this._eventManager.getLazyEmitter("mousemove"),this.mapMouseout=this._eventManager.getLazyEmitter("mouseout"),this.mapMouseover=this._eventManager.getLazyEmitter("mouseover"),this.projectionChanged=this._eventManager.getLazyEmitter("projection_changed"),this.mapRightclick=this._eventManager.getLazyEmitter("rightclick"),this.tilesloaded=this._eventManager.getLazyEmitter("tilesloaded"),this.tiltChanged=this._eventManager.getLazyEmitter("tilt_changed"),this.zoomChanged=this._eventManager.getLazyEmitter("zoom_changed"),this._isBrowser=En(r),this._isBrowser){let o=window;o.google,this._existingAuthFailureCallback=o.gm_authFailure,o.gm_authFailure=()=>{this._existingAuthFailureCallback&&this._existingAuthFailureCallback(),this.authFailure.emit()}}}ngOnChanges(i){(i.height||i.width)&&this._setSize();let s=this.googleMap;s&&(i.options&&s.setOptions(this._combineOptions()),i.center&&this._center&&s.setCenter(this._center),i.zoom&&this._zoom!=null&&s.setZoom(this._zoom),i.mapTypeId&&this.mapTypeId&&s.setMapTypeId(this.mapTypeId))}ngOnInit(){this._isBrowser&&(this._mapEl=this._elementRef.nativeElement.querySelector(".map-container"),this._setSize(),google.maps.Map?this._initialize(google.maps.Map):this._ngZone.runOutsideAngular(()=>{google.maps.importLibrary("maps").then(i=>this._initialize(i.Map))}))}_initialize(i){this._ngZone.runOutsideAngular(()=>{this.googleMap=new i(this._mapEl,this._combineOptions()),this._eventManager.setTarget(this.googleMap),this.mapInitialized.emit(this.googleMap)})}ngOnDestroy(){if(this.mapInitialized.complete(),this._eventManager.destroy(),this._isBrowser){let i=window;i.gm_authFailure=this._existingAuthFailureCallback}}fitBounds(i,s){this._assertInitialized(),this.googleMap.fitBounds(i,s)}panBy(i,s){this._assertInitialized(),this.googleMap.panBy(i,s)}panTo(i){this._assertInitialized(),this.googleMap.panTo(i)}panToBounds(i,s){this._assertInitialized(),this.googleMap.panToBounds(i,s)}getBounds(){return this._assertInitialized(),this.googleMap.getBounds()||null}getCenter(){return this._assertInitialized(),this.googleMap.getCenter()}getClickableIcons(){return this._assertInitialized(),this.googleMap.getClickableIcons()}getHeading(){return this._assertInitialized(),this.googleMap.getHeading()}getMapTypeId(){return this._assertInitialized(),this.googleMap.getMapTypeId()}getProjection(){return this._assertInitialized(),this.googleMap.getProjection()||null}getStreetView(){return this._assertInitialized(),this.googleMap.getStreetView()}getTilt(){return this._assertInitialized(),this.googleMap.getTilt()}getZoom(){return this._assertInitialized(),this.googleMap.getZoom()}get controls(){return this._assertInitialized(),this.googleMap.controls}get data(){return this._assertInitialized(),this.googleMap.data}get mapTypes(){return this._assertInitialized(),this.googleMap.mapTypes}get overlayMapTypes(){return this._assertInitialized(),this.googleMap.overlayMapTypes}_resolveMap(){return this.googleMap?Promise.resolve(this.googleMap):this.mapInitialized.pipe(rn(1)).toPromise()}_setSize(){if(this._mapEl){let i=this._mapEl.style;i.height=this.height===null?"":eu(this.height)||Jd,i.width=this.width===null?"":eu(this.width)||Xd}}_combineOptions(){let i=this._options||{};return Ne(ge({},i),{center:this._center||i.center||Si.center,zoom:this._zoom??i.zoom??Si.zoom,mapTypeId:this.mapTypeId||i.mapTypeId||Si.mapTypeId,mapId:this.mapId||i.mapId})}_assertInitialized(){this.googleMap}};e.\u0275fac=function(s){return new(s||e)(oe(gi),oe(V),oe(nt))},e.\u0275cmp=k({type:e,selectors:[["google-map"]],inputs:{height:"height",width:"width",mapId:"mapId",mapTypeId:"mapTypeId",center:"center",zoom:"zoom",options:"options"},outputs:{mapInitialized:"mapInitialized",authFailure:"authFailure",boundsChanged:"boundsChanged",centerChanged:"centerChanged",mapClick:"mapClick",mapDblclick:"mapDblclick",mapDrag:"mapDrag",mapDragend:"mapDragend",mapDragstart:"mapDragstart",headingChanged:"headingChanged",idle:"idle",maptypeidChanged:"maptypeidChanged",mapMousemove:"mapMousemove",mapMouseout:"mapMouseout",mapMouseover:"mapMouseover",projectionChanged:"projectionChanged",mapRightclick:"mapRightclick",tilesloaded:"tilesloaded",tiltChanged:"tiltChanged",zoomChanged:"zoomChanged"},exportAs:["googleMap"],standalone:!0,features:[gs,O],ngContentSelectors:Lg,decls:2,vars:0,consts:[[1,"map-container"]],template:function(s,r){s&1&&(_s(),D(0,"div",0),ys(1))},encapsulation:2,changeDetection:0});let t=e;return t})(),Bg=/([A-Za-z%]+)$/;function eu(t){return t==null?"":Bg.test(t)?t:`${t}px`}var Vg={position:{lat:37.221995,lng:-122.184092}},tu=(()=>{let e=class e{set title(i){this._title=i}set position(i){this._position=i}set content(i){this._content=i}set gmpDraggable(i){this._draggable=i}set options(i){this._options=i}set zIndex(i){this._zIndex=i}constructor(i,s){this._googleMap=i,this._ngZone=s,this._eventManager=new Fs(b(V)),this.mapClick=this._eventManager.getLazyEmitter("click"),this.mapDrag=this._eventManager.getLazyEmitter("drag"),this.mapDragend=this._eventManager.getLazyEmitter("dragend"),this.mapDragstart=this._eventManager.getLazyEmitter("dragstart"),this.markerInitialized=new Ue}ngOnInit(){this._googleMap._isBrowser&&(google.maps.marker?.AdvancedMarkerElement&&this._googleMap.googleMap?this._initialize(this._googleMap.googleMap,google.maps.marker.AdvancedMarkerElement):this._ngZone.runOutsideAngular(()=>{Promise.all([this._googleMap._resolveMap(),google.maps.importLibrary("marker")]).then(([i,s])=>{this._initialize(i,s.AdvancedMarkerElement)})}))}_initialize(i,s){this._ngZone.runOutsideAngular(()=>{this.advancedMarker=new s(this._combineOptions()),this._assertInitialized(),this.advancedMarker.map=i,this._eventManager.setTarget(this.advancedMarker),this.markerInitialized.next(this.advancedMarker)})}ngOnChanges(i){let{advancedMarker:s,_content:r,_position:o,_title:a,_draggable:l,_zIndex:c}=this;s&&(i.title&&(s.title=a),i.content&&(s.content=r),i.gmpDraggable&&(s.gmpDraggable=l),i.content&&(s.content=r),i.position&&(s.position=o),i.zIndex&&(s.zIndex=c))}ngOnDestroy(){this.markerInitialized.complete(),this._eventManager.destroy(),this.advancedMarker&&(this.advancedMarker.map=null)}_combineOptions(){let i=this._options||Vg;return Ne(ge({},i),{title:this._title||i.title,position:this._position||i.position,content:this._content||i.content,zIndex:this._zIndex??i.zIndex,gmpDraggable:this._draggable??i.gmpDraggable,map:this._googleMap.googleMap})}_assertInitialized(){}};e.\u0275fac=function(s){return new(s||e)(oe(fo),oe(V))},e.\u0275dir=eo({type:e,selectors:[["map-advanced-marker"]],inputs:{title:"title",position:"position",content:"content",gmpDraggable:"gmpDraggable",options:"options",zIndex:"zIndex"},outputs:{mapClick:"mapClick",mapDrag:"mapDrag",mapDragend:"mapDragend",mapDragstart:"mapDragstart",markerInitialized:"markerInitialized"},exportAs:["mapAdvancedMarker"],standalone:!0,features:[gs]});let t=e;return t})();var zs=(()=>{let e=class e{};e.\u0275fac=function(s){return new(s||e)},e.\u0275mod=P({type:e}),e.\u0275inj=x({});let t=e;return t})();var Ls=(()=>{let e=class e{constructor(){this.i18n=b(Et),this.contactsService=b(Bn),this.marker={position:{lat:gt.lat,lng:gt.lng}},this.options={mapId:"DEMO_MAP_ID",disableDefaultUI:!0,center:{lat:gt.lat,lng:gt.lng},zoom:14},this.client=this.contactsService.$contacts}ngOnInit(){}googleNav(){window.open("https://maps.google.com/maps?daddr="+gt.lat+","+gt.lng)}};e.\u0275fac=function(s){return new(s||e)},e.\u0275cmp=k({type:e,selectors:[["app-clients"]],standalone:!0,features:[O],decls:27,vars:20,consts:[["id","clients",1,"secondary-color","scrollto","clearfix"],["nz-row","",1,"row","clearfix"],["nz-col","",1,"col-3",3,"nzXl","nzLg","nzMd","nzSm","nzXs"],[1,"section-heading"],[1,"section-title"],[1,"section-subtitle"],[1,"fa","fa-clock-o","fa-2x"],[1,"fa","fa-map-marker","fa-2x"],[3,"click"],[1,"fa","fa-telegram","fa-2x"],[3,"href"],[1,"fa","fa-phone","fa-2x"],["id","map"],["height","400px","width","400px",3,"options","mapClick"],[3,"position","mapClick"]],template:function(s,r){s&1&&(g(0,"aside",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3"),y(5),m(),g(6,"h2",4),y(7),m(),g(8,"div",5),D(9,"i",6),y(10),m(),g(11,"div",5),D(12,"i",7),g(13,"a",8),U("click",function(){return r.googleNav()}),y(14),m()(),g(15,"div",5),D(16,"i",9),g(17,"a",10),y(18),m()(),g(19,"div",5),D(20,"i",11),g(21,"a",10),y(22),m()()()(),g(23,"div",2)(24,"div",12)(25,"google-map",13),U("mapClick",function(){return r.googleNav()}),g(26,"map-advanced-marker",14),U("mapClick",function(){return r.googleNav()}),m()()()()()()),s&2&&(p(2),v("nzXl",8)("nzLg",8)("nzMd",12)("nzSm",20)("nzXs",20),p(3),H(r.i18n.get("contacts")),p(2),H(r.i18n.get("contacts.title")),p(3),qe(" ",r.client().workHour," "),p(4),H(r.client().location),p(3),vs("href","http://",r.client().telegram,"",ft),p(1),H(r.client().telegram),p(3),Vt("href","tel:"+r.client().phone,ft),p(1),qe(" ",r.client().phone,""),p(1),v("nzXl",8)("nzLg",8)("nzMd",20)("nzSm",20)("nzXs",20),p(2),v("options",r.options),p(1),v("position",r.marker.position))},dependencies:[ve,zs,fo,tu,ee,Q,Y]});let t=e;return t})();function Gg(t,e){if(t&1&&(g(0,"blockquote",4),D(1,"img",5),g(2,"q"),y(3),m(),g(4,"footer"),y(5),m()()),t&2){let n=e.$implicit;v("nzXl",8)("nzLg",8)("nzMd",12)("nzSm",20)("nzXs",20),p(1),Vt("src",n.userimage,ft),p(2),H(n.comments),p(2),qe("",n.name," - Happy Customer")}}var Bs=(()=>{let e=class e{constructor(){this.testimonials={title:"\u0412\u0456\u0434\u0433\u0443\u043A\u0438",description:"\u0429\u043E \u043F\u0440\u043E \u043D\u0430\u0441 \u043A\u0430\u0436\u0443\u0442\u044C",detail:"",feedbacks:[{name:"John Doe",userimage:"../assets/images/user-images/user-1.jpg",comments:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua",company:"ABC"},{name:"Roslyn Doe",userimage:"../assets/images/user-images/user-2.jpg",comments:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua",company:"XYZ"},{name:"Thomas Doe",userimage:"../assets/images/user-images/user-3.jpg",comments:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua",company:"PQR"}]}}};e.\u0275fac=function(s){return new(s||e)},e.\u0275cmp=k({type:e,selectors:[["app-feedback"]],standalone:!0,features:[O],decls:9,vars:3,consts:[["id","testimonials","data-enllax-ratio",".2",1,"scrollto"],["nz-row","",1,"row2","clearfix"],["nz-col","",1,"section-heading",3,"nzSpan"],[1,"section-title"],["nz-col","",1,"col-3","testimonial","classic",3,"nzXl","nzLg","nzMd","nzSm","nzXs"],["alt","User",3,"src"],["nz-col","","class","col-3 testimonial classic",3,"nzXl","nzLg","nzMd","nzSm","nzXs"]],template:function(s,r){s&1&&(g(0,"aside",0)(1,"div",1)(2,"div",2)(3,"h3"),y(4),m(),g(5,"h2",3),y(6),m()(),it(7,Gg,6,8,"blockquote",6,mi),m()()),s&2&&(p(2),v("nzSpan",20),p(2),H(r.testimonials.title),p(2),H(r.testimonials.description),p(1),st(r.testimonials.feedbacks))},dependencies:[ee,Q,Y]});let t=e;return t})();function Hg(t,e){if(t&1&&(g(0,"p"),y(1),m()),t&2){let n=ue().$implicit;p(1),qe(" ",n.description," ")}}function $g(t,e){if(t&1){let n=rt();g(0,"div",6)(1,"nz-card",7),U("click",function(){let r=et(n).$implicit,o=ue(2);return tt(o.submitService(r))}),z(2,Hg,2,1,"p",8),g(3,"div",9)(4,"span",10),y(5),m(),g(6,"button",11),y(7," \u0417\u0430\u043F\u0438\u0441\u0430\u0442\u0438\u0441\u044F "),m()()()()}if(t&2){let n=e.$implicit;v("nzXl",8)("nzLg",8)("nzMd",12)("nzSm",20)("nzXs",20),p(1),v("nzTitle",n.title),p(1),v("ngIf",n.description),p(3),qe("",n.price," K\u010D"),p(1),vs("routerLink","/reserve/",n.id,"")}}function jg(t,e){if(t&1&&(g(0,"div",4)(1,"h4"),y(2),m()(),z(3,$g,8,9,"div",5)),t&2){let n=e.$implicit;v("nzSpan",20),p(2),H(n.title),p(1),v("ngForOf",n.list)}}var Vs=(()=>{let e=class e{constructor(){this._servicesService=b(Vn),this.visibleServices=bn(()=>{let i=this._servicesService.servicesSig(),s=this._servicesService.servicesCategorySig();return s.map(r=>r.list=i.filter(o=>r.id===o.categoryId)),s})}ngOnInit(){this._servicesService.getServices().subscribe(i=>this._servicesService.servicesSig.set(i)),this._servicesService.getServicesCategory().subscribe(i=>this._servicesService.servicesCategorySig.set(i))}submitService(i){}};e.\u0275fac=function(s){return new(s||e)},e.\u0275cmp=k({type:e,selectors:[["app-services"]],standalone:!0,features:[O],decls:9,vars:2,consts:[["id","pricing",1,"secondary-color","scrollto"],["nz-row","",1,"row2","clearfix"],["nz-col","",1,"section-heading",3,"nzSpan"],["nz-col","",1,"section-title",3,"nzSpan"],["nz-col","",3,"nzSpan"],["nz-col","","class","service-category",3,"nzXl","nzLg","nzMd","nzSm","nzXs",4,"ngFor","ngForOf"],["nz-col","",1,"service-category",3,"nzXl","nzLg","nzMd","nzSm","nzXs"],["nzSize","small",1,"service-card",3,"nzTitle","click"],[4,"ngIf"],[1,"service-card-action"],[1,"card-price"],["nz-button","","nzType","primary","nzGhost","",3,"routerLink"]],template:function(s,r){s&1&&(g(0,"section",0)(1,"div",1)(2,"div",2)(3,"h3"),y(4,"\u0426\u0456\u043D\u0438"),m(),g(5,"h2",3),y(6,"\u041F\u0440\u0430\u0439\u0441-\u043B\u0438\u0441\u0442"),m()(),it(7,jg,4,3,null,null,wn),m()()),s&2&&(p(2),v("nzSpan",20),p(3),v("nzSpan",20),p(2),st(r.visibleServices()))},dependencies:[ve,Ut,Tn,se,ze,Pe,Fe,Nn,Q,Y,ee,Sn],styles:[".content[_ngcontent-%COMP%]{margin:0 auto;text-align:start;padding:90px 40px 50px;max-width:1100px}.steps-action[_ngcontent-%COMP%]{margin-top:24px}button[_ngcontent-%COMP%]{margin-right:8px}h3[_ngcontent-%COMP%]{margin-top:20px}h4[_ngcontent-%COMP%]{padding-top:20px;padding-left:3%;font-weight:700}.service-card[_ngcontent-%COMP%]{transition:all .2s;cursor:pointer;padding-left:0!important;padding-right:0!important;margin:10px 5px}.service-card[_ngcontent-%COMP%]:hover{box-shadow:0 2px 8px #0000001a,0 3px 20px #00000017}.card-price[_ngcontent-%COMP%]{color:#000000d2;font-size:18px;font-weight:600;padding-right:10px}.service-card-action[_ngcontent-%COMP%]{display:flex;width:100%;justify-content:end}.service-category[_ngcontent-%COMP%]{padding-bottom:0}"]});let t=e;return t})();var mo=(()=>{let e=class e{constructor(){this.header=Yd,this._contactsService=b(Bn),this.client=this._contactsService.$contacts,this.i18n=b(Et)}googleNav(){window.open("https://maps.google.com/maps?daddr="+gt.lat+","+gt.lng)}};e.\u0275fac=function(s){return new(s||e)},e.\u0275cmp=k({type:e,selectors:[["app-home"]],standalone:!0,features:[O],decls:21,vars:7,consts:[["id","banner","data-enllax-ratio",".5",1,"scrollto","clearfix"],["nz-row","","id","banner-content",1,"row2","clearfix"],["nz-col","",1,"section-heading",3,"nzSpan"],[1,"section-title"],["nz-row","",1,"ant-flex-justify-center","big-padding-top","big-padding-bottom"],["nz-col","",1,"section-subtitle",3,"nzSpan"],["nz-col","",3,"nzSpan"],["routerLink","/reserve","routerLinkActive","active",1,"button"]],template:function(s,r){s&1&&(g(0,"app-layout")(1,"header",0)(2,"div",1)(3,"div",2)(4,"h1",3),y(5),m()(),g(6,"div",4)(7,"div",5)(8,"p")(9,"b"),y(10),m()(),g(11,"p"),y(12),m()()(),g(13,"div",6)(14,"a",7),y(15),m()()()(),D(16,"app-about")(17,"app-services")(18,"app-feedback")(19,"app-clients"),y(20," >"),m()),s&2&&(p(3),v("nzSpan",20),p(2),H(r.header.title),p(2),v("nzSpan",20),p(3),H(r.client().location),p(2),H(r.client().phone),p(1),v("nzSpan",20),p(2),H(r.i18n.get("header.buttontext")))},dependencies:[Ls,Sn,ed,Ps,Bs,Vs,ee,Q,Y,Qe],encapsulation:2});let t=e;return t})();function Wg(t,e){if(t&1&&(g(0,"a",1),D(1,"img",2),m()),t&2){let n=e.$implicit;Vt("href",n.url,ft),p(1),Vt("src",n.url,ft),Vt("alt",n.name)}}var iu=(()=>{let e=class e{constructor(){this.Gallery=Zd}};e.\u0275fac=function(s){return new(s||e)},e.\u0275cmp=k({type:e,selectors:[["app-gallery"]],standalone:!0,features:[O],decls:3,vars:0,consts:[["id","gallery","data-featherlight-gallery","","data-featherlight-filter","a",1,"row2","text-center","scrollto","clearfix"],["data-featherlight","image","data-wow-delay","0.1s",1,"col-3","wow","fadeIn",3,"href"],[3,"src","alt"],["data-featherlight","image","class","col-3 wow fadeIn","data-wow-delay","0.1s",3,"href"]],template:function(s,r){s&1&&(g(0,"aside",0),it(1,Wg,2,3,"a",3,mi),m()),s&2&&(p(1),st(r.Gallery.GalleryImages))}});let t=e;return t})();function Kg(t,e){if(t&1&&D(0,"nz-avatar",10),t&2){let n=ue().$implicit;v("nzSrc",n.avatar)}}function qg(t,e){if(t&1){let n=rt();g(0,"div",6)(1,"nz-card",7),U("click",function(){let r=et(n).$implicit,o=ue(2);return tt(o.submitBarber(r))}),D(2,"nz-card-meta",8),m(),z(3,Kg,1,1,"ng-template",null,9,Se),m()}if(t&2){let n=e.$implicit,i=Ee(4),s,r;v("nzXl",8)("nzLg",8)("nzMd",8)("nzSm",20)("nzXs",20),p(2),v("nzAvatar",i)("nzTitle",((s=n.name)!==null&&s!==void 0?s:n.name)||null)("nzDescription",((r=n.description)!==null&&r!==void 0?r:n.description)||null)}}function Yg(t,e){if(t&1&&(g(0,"section",1)(1,"div",2)(2,"div",3)(3,"h2",4),y(4,"\u041F\u0440\u0430\u0446\u0456\u0432\u043D\u0438\u043A\u0438"),m()(),z(5,qg,5,8,"div",5),m()()),t&2){let n=e.ngIf;p(2),v("nzSpan",22),p(3),v("ngForOf",n)}}var su=(()=>{let e=class e{constructor(){this.eventBarber=new Ue,this._barbersService=b(Wd)}ngOnInit(){this.barbers$=this._barbersService.getBarbers()}submitBarber(i){this.eventBarber.emit(i)}};e.\u0275fac=function(s){return new(s||e)},e.\u0275cmp=k({type:e,selectors:[["app-barbers"]],outputs:{eventBarber:"eventBarber"},standalone:!0,features:[O],decls:2,vars:3,consts:[["id","services","class","secondary-color scrollto",4,"ngIf"],["id","services",1,"secondary-color","scrollto"],["nz-row","",1,"row2","clearfix"],["nz-col","",1,"section-heading",3,"nzSpan"],["nz-col","","nzSpan","22",1,"section-title"],["nz-col","","class","service-category",3,"nzXl","nzLg","nzMd","nzSm","nzXs",4,"ngFor","ngForOf"],["nz-col","",1,"service-category",3,"nzXl","nzLg","nzMd","nzSm","nzXs"],["nzSize","small",1,"service-card",3,"click"],[3,"nzAvatar","nzTitle","nzDescription"],["avatarTemplate",""],[3,"nzSrc"]],template:function(s,r){s&1&&(z(0,Yg,6,2,"section",0),io(1,"async")),s&2&&v("ngIf",so(1,1,r.barbers$))},dependencies:[ve,Ut,Tn,$c,ee,cd,Nn,yd,Q,Y,se],styles:[".service-card[_ngcontent-%COMP%]{transition:all .2s;cursor:pointer;padding-left:0!important;padding-right:0!important;margin:10px 5px}.service-card[_ngcontent-%COMP%]:hover{transform:scale(1.01);box-shadow:0 4px 8px #0003,0 6px 20px #00000030}.card-price[_ngcontent-%COMP%]{color:#f3751cd2;font-size:16px;font-weight:600}"]});let t=e;return t})();function Qg(t,e){if(t&1&&(g(0,"a",9),y(1),m()),t&2){let n=ue().$implicit;p(1),qe("",n.price," K\u010D")}}function Zg(t,e){if(t&1){let n=rt();g(0,"div",6)(1,"nz-card",7),U("click",function(){let r=et(n).$implicit,o=ue(2);return tt(o.submitService(r))}),g(2,"p"),y(3),m()(),z(4,Qg,2,1,"ng-template",null,8,Se),m()}if(t&2){let n=e.$implicit,i=Ee(5);v("nzXl",8)("nzLg",8)("nzMd",8)("nzSm",22)("nzXs",22),p(1),v("nzTitle",n.title)("nzExtra",i),p(2),qe(" ",n.description," ")}}function Jg(t,e){if(t&1&&(g(0,"h4",4),y(1),m(),z(2,Zg,6,8,"div",5)),t&2){let n=e.$implicit,i=ue();p(1),H(i.i18n.get(n.title)),p(1),v("ngForOf",n.list)}}var ru=(()=>{let e=class e{constructor(){this.eventService=new Ue,this._servicesService=b(Vn),this.i18n=b(Et),this.visibleServices=bn(()=>{let i=this._servicesService.servicesSig(),s=this._servicesService.servicesCategorySig();return s.map(r=>r.list=i.filter(o=>r.id===o.categoryId)),s})}ngOnInit(){this._servicesService.getServices().subscribe(i=>this._servicesService.servicesSig.set(i)),this._servicesService.getServicesCategory().subscribe(i=>this._servicesService.servicesCategorySig.set(i))}submitService(i){this.eventService.emit(i)}};e.\u0275fac=function(s){return new(s||e)},e.\u0275cmp=k({type:e,selectors:[["app-services"]],outputs:{eventService:"eventService"},standalone:!0,features:[O],decls:7,vars:1,consts:[["id","services",1,"secondary-color","scrollto"],["nz-row","",1,"row2","clearfix",2,"margin","0 auto"],["nz-col","","cl","","ass","section-heading",3,"nzSpan"],["nz-col","","nzSpan","22",1,"section-title"],["nz-col","","nzSpan","22"],["nz-col","","class","service-category",3,"nzXl","nzLg","nzMd","nzSm","nzXs",4,"ngFor","ngForOf"],["nz-col","",1,"service-category",3,"nzXl","nzLg","nzMd","nzSm","nzXs"],["nzSize","small",1,"service-card",3,"nzTitle","nzExtra","click"],["extraTemplate",""],[1,"card-price"]],template:function(s,r){s&1&&(g(0,"section",0)(1,"div",1)(2,"div",2)(3,"h2",3),y(4,"\u041F\u043E\u0441\u043B\u0443\u0433\u0438"),m()(),it(5,Jg,3,2,null,null,wn),m()()),s&2&&(p(2),v("nzSpan",22),p(3),st(r.visibleServices()))},dependencies:[ve,Ut,ee,Nn,Q,Y],styles:[".service-card[_ngcontent-%COMP%]{transition:all .2s;cursor:pointer;padding-left:0!important;padding-right:0!important;margin:10px 5px}.service-card[_ngcontent-%COMP%]:hover{transform:scale(1.01);box-shadow:0 4px 8px #0003,0 6px 20px #00000030}.card-price[_ngcontent-%COMP%]{color:#f3751cd2;font-size:16px;font-weight:600}"]});let t=e;return t})();function Xg(t,e){if(t&1&&(g(0,"label",11),y(1),m()),t&2){let n=e.$implicit;v("nzValue",n),p(1),H(n)}}var ou=(()=>{let e=class e{constructor(){this.clickEvent=new Ue,this.selectedDate=new Date,this.timePicker=Ei,this._calendarEvents=b(Wt),this.calendarEvents=this._calendarEvents.$calendarEvents,this.disabledDate=i=>{let s=dd(i,new Date)<0;return this.timePicker.length<1?!0:s}}ngOnInit(){this.disabledTime(this.selectedDate)}selectDate(i){this.selectedTime=void 0,this.disabledTime(i)}disabledTime(i){let s=this._calendarEvents.getCalendarEventsOfDate(i).filter(r=>this._calendarEvents.$currentReserve()?.barber.id==r.barber.id);this.timePicker=Ei,s.forEach(r=>this.timePicker=this.timePicker.filter(o=>_i(new Date(r.date),"HH:mm")!=o))}selectTime(i){let s=i.split(":");this.selectedDate.setHours(s[0],s[1],0)}clickNext(){this.clickEvent.emit(this.selectedDate)}};e.\u0275fac=function(s){return new(s||e)},e.\u0275cmp=k({type:e,selectors:[["app-datepicker"]],outputs:{clickEvent:"clickEvent"},standalone:!0,features:[O],decls:15,vars:16,consts:[["id","services",1,"secondary-color","scrollto"],["nz-row","",1,"row2","clearfix"],["nz-col","",1,"section-heading",3,"nzSpan"],["nz-col","","nzSpan","20"],["nz-row","","nzJustify","space-around",1,"row2","big-padding-top","big-padding-bottom"],["nz-col","",3,"nzXl","nzLg","nzMd","nzSm","nzXs"],[3,"ngModel","nzDisabledDate","nzFullscreen","ngModelChange","nzSelectChange"],["nz-col","",1,"big-padding-top",3,"nzXl","nzLg","nzMd","nzSm","nzXs"],["nzSize","large",3,"ngModel","ngModelChange"],["nz-col","","nzSpan","20",1,"big-padding-top"],["nz-button","","nzType","primary","nzBlock","",2,"width","100%",3,"disabled","click"],["nz-radio-button","",2,"margin","5px 10px",3,"nzValue"],["style","margin: 5px 10px","nz-radio-button","",3,"nzValue"]],template:function(s,r){s&1&&(g(0,"section",0)(1,"div",1)(2,"div",2)(3,"h2",3),y(4,"\u0412\u0438\u0431\u0435\u0440\u0456\u0442\u044C \u0442\u0435\u0440\u043C\u0456\u043D"),m()(),g(5,"div",4)(6,"div",5)(7,"nz-calendar",6),U("ngModelChange",function(a){return r.selectedDate=a})("nzSelectChange",function(a){return r.selectDate(a)}),m()(),g(8,"div",7)(9,"nz-radio-group",8),U("ngModelChange",function(a){return r.selectedTime=a})("ngModelChange",function(a){return r.selectTime(a)}),it(10,Xg,2,2,"label",12,wn),m()(),g(12,"div",9)(13,"button",10),U("click",function(){return r.clickNext()}),y(14," \u041F\u0440\u043E\u0434\u043E\u0432\u0436\u0438\u0442\u0438 "),m()()()()()),s&2&&(p(2),v("nzSpan",24),p(4),v("nzXl",10)("nzLg",10)("nzMd",20)("nzSm",20)("nzXs",20),p(1),v("ngModel",r.selectedDate)("nzDisabledDate",r.disabledDate)("nzFullscreen",!1),p(1),v("nzXl",10)("nzLg",10)("nzMd",20)("nzSm",20)("nzXs",20),p(1),v("ngModel",r.selectedTime),p(1),st(r.timePicker),p(3),v("disabled",!r.selectedTime))},dependencies:[ve,se,Gt,ad,ze,Pe,Fe,_d,Q,Y,hd,ud,ee],styles:[".time-lebel[_ngcontent-%COMP%]{margin-left:10px!important}"]});let t=e;return t})();function em(t,e){if(t&1){let n=rt();g(0,"app-services",1),U("eventService",function(s){et(n);let r=ue();return tt(r.setSelectedService(s))}),m()}}function tm(t,e){if(t&1){let n=rt();g(0,"app-barbers",2),U("eventBarber",function(s){et(n);let r=ue();return tt(r.setSelectedBarber(s))}),m()}}function nm(t,e){if(t&1){let n=rt();g(0,"app-datepicker",3),U("clickEvent",function(s){et(n);let r=ue();return tt(r.setSelectedDate(s))}),m()}}var _o=(()=>{let e=class e{constructor(){this.auth=b(Ct),this.route=b(Zc),this.router=b(be),this._calendarEventService=b(Wt),this._servicesService=b(Vn),this._storage=b(Tt),this.calendarEvent={},this.current=0,this.timePicker=Ei,this.price=Qd}ngOnInit(){Number(this.route.snapshot.paramMap.get("service"))&&(this.current=1)}setSelectedBarber(i){this.current++,this._calendarEventService.$currentReserve.update(s=>s=Ne(ge({},s),{barber:i})),this.calendarEvent.barber=i.id}setSelectedService(i){this.current++,this._calendarEventService.$currentReserve.update(s=>s=Ne(ge({},s),{service:i})),this.calendarEvent.service=i.id}setSelectedDate(i){this.calendarEvent.date=i,this._calendarEventService.$currentReserve.update(s=>s=Ne(ge({},s),{date:i})),this.auth.isAuth()?(this._calendarEventService.compliteReservace(),this.router.navigate(["home"])):this._calendarEventService.compliteReservace()}submitForm(i){}};e.\u0275fac=function(s){return new(s||e)},e.\u0275cmp=k({type:e,selectors:[["app-reserve"]],standalone:!0,features:[O],decls:5,vars:3,consts:[["id","pricing",1,"secondary-color","scrollto","clearfix"],[3,"eventService"],[3,"eventBarber"],[3,"clickEvent"]],template:function(s,r){s&1&&(g(0,"app-layout")(1,"section",0),z(2,em,1,0,"app-services")(3,tm,1,0,"app-barbers")(4,nm,1,0,"app-datepicker"),m()()),s&2&&(p(2),te(2,r.current==0?2:-1),p(1),te(3,r.current==1?3:-1),p(1),te(4,r.current==2?4:-1))},dependencies:[ve,se,ee,su,ru,ou,Qe],styles:["nz-select[_ngcontent-%COMP%]{margin:0 8px 10px 0;width:120px}.content[_ngcontent-%COMP%]{margin:0 auto;text-align:start;padding:90px 40px 50px}[nz-form][_ngcontent-%COMP%]{max-width:600px;padding-top:20px}.steps[_ngcontent-%COMP%]{max-width:500px;margin:0 auto;padding-bottom:5px}.phone-select[_ngcontent-%COMP%]{width:90px}.register-are[_ngcontent-%COMP%]{margin-bottom:8px}.steps-content[_ngcontent-%COMP%]{max-width:400;margin-top:16px;border:1px dashed #e9e9e9;border-radius:6px;background-color:#fafafa;min-height:200px;padding-top:80px}.steps-action[_ngcontent-%COMP%]{margin-top:24px}button[_ngcontent-%COMP%]{margin-right:8px}h3[_ngcontent-%COMP%]{margin-top:20px}.service-card[_ngcontent-%COMP%]{transition:all .2s;cursor:pointer;padding-left:0!important;padding-right:0!important;margin:10px 5px}.service-card[_ngcontent-%COMP%]:hover{transform:scale(1.01);box-shadow:0 4px 8px #0003,0 6px 20px #00000030}.card-price[_ngcontent-%COMP%]{color:#f3751cd2;font-size:16px;font-weight:600}.time-picker[_ngcontent-%COMP%]{display:flex}label[_ngcontent-%COMP%]{margin:4px}"]});let t=e;return t})();var $n=(()=>{let e=class e{constructor(){this.buttons=[],this._signIn=b(Kt),this.router=b(be)}ngOnInit(){}currentButton(i){return this.buttons.includes(i)}signInGoogle(){this._signIn.signInWithGoogle()}signInPhone(){this.router.navigate(["phone"])}signInEmail(){this.router.navigate(["login"])}};e.\u0275fac=function(s){return new(s||e)},e.\u0275cmp=k({type:e,selectors:[["button-login"]],inputs:{buttons:"buttons"},standalone:!0,features:[O],decls:10,vars:3,consts:[[1,"login-form"],["nz-button","","nzSize","large","nzShape","round",1,"login-form-button","login-form-margin",3,"hidden","click"],["nz-icon","","nzType","google","nzTheme","outline"],["nz-icon","","nzType","phone","nzTheme","outline"],["nz-icon","","nzType","mail","nzTheme","outline"]],template:function(s,r){s&1&&(g(0,"div",0)(1,"button",1),U("click",function(){return r.signInGoogle()}),D(2,"span",2),y(3," \u0423\u0432\u0456\u0439\u0442\u0438 \u0437 Google Account "),m(),g(4,"button",1),U("click",function(){return r.signInPhone()}),D(5,"span",3),y(6," \u0423\u0432\u0456\u0439\u0442\u0438 \u0437 \u043D\u043E\u043C\u0435\u0440\u043E\u043C \u0442\u0435\u043B\u0435\u0444\u043E\u043D\u0443 "),m(),g(7,"button",1),U("click",function(){return r.signInEmail()}),D(8,"span",4),y(9," \u0423\u0432\u0456\u0439\u0442\u0438 \u0437 \u0435\u043B\u0435\u043A\u0442\u0440\u043E\u043D\u043D\u043E\u044E \u043F\u043E\u0447\u0442\u043E\u044E "),m()()),s&2&&(p(1),v("hidden",!r.currentButton("google")),p(3),v("hidden",!r.currentButton("phone")),p(3),v("hidden",!r.currentButton("email")))},dependencies:[ve,ee,ze,Pe,Fe,rd],encapsulation:2});let t=e;return t})();function im(t,e){t&1&&y(0," The input is not valid E-mail! ")}function sm(t,e){t&1&&y(0," Please input your E-mail! ")}function rm(t,e){if(t&1&&z(0,im,1,0)(1,sm,1,0),t&2){let n=e.$implicit;te(0,n.errors!=null&&n.errors.email?0:-1),p(1),te(1,n.errors!=null&&n.errors.required?1:-1)}}function om(t,e){t&1&&y(0," MaxLength is 40 ")}function am(t,e){t&1&&y(0," MinLength is 6 ")}function lm(t,e){t&1&&y(0," Password is required ")}function cm(t,e){if(t&1&&z(0,om,1,0)(1,am,1,0)(2,lm,1,0),t&2){let n=e.$implicit;te(0,n.errors!=null&&n.errors.maxlength?0:-1),p(1),te(1,n.errors!=null&&n.errors.minlength?1:-1),p(1),te(2,n.errors!=null&&n.errors.required?2:-1)}}var du=(()=>{let e=class e{constructor(i,s){this.fb=i,this.router=s,this._signIn=b(Kt),this.buttonsLogin=["google","phone"],this.isLoginFailed=!1,this.errorMessage="",this.validateForm=this.fb.group({email:["",[ie.required,ie.email]],password:["",ie.required],remember:[!1]})}ngOnInit(){}submitForm(){this.validateForm.valid?console.log(this.validateForm.value):Object.values(this.validateForm.controls).forEach(i=>{i.invalid&&(i.markAsDirty(),i.updateValueAndValidity({onlySelf:!0}))})}signInGoogle(){this._signIn.signInWithGoogle()}signInPhone(){this.router.navigate(["phone"])}};e.\u0275fac=function(s){return new(s||e)(oe(Ht),oe(be))},e.\u0275cmp=k({type:e,selectors:[["app-login"]],standalone:!0,features:[O],decls:34,vars:7,consts:[["nz-row","","nzJustify","center",1,"row2"],["nz-col","",1,"section-heading",3,"nzSpan"],["nz-col","","nzSpan","20",1,"section-title"],["nz-col","","nzXs","20","nzSm","20","nzMd","10","nzLg","10","nzXl","10"],["nz-form","",1,"login-form",3,"formGroup","ngSubmit"],["nzHasFeedback","",3,"nzErrorTip"],["nzPrefixIcon","user"],["nz-input","","formControlName","email","placeholder","E-mail","id","email","type","email"],["emailErrorTpl",""],["nzPrefixIcon","lock"],["nz-input","","minlength","6","maxlength","12","placeholder","Password","formControlName","password","id","password"],["passwordErrorTpl",""],["nz-row","",1,"login-form-margin"],["nz-col","",3,"nzSpan"],["nz-checkbox","","formControlName","remember"],[1,"login-form-forgot"],["nz-button","","nzType","primary",1,"login-form-button","login-form-margin"],["routerLink","/register"],[3,"buttons"]],template:function(s,r){if(s&1&&(g(0,"app-layout")(1,"div",0)(2,"div",1)(3,"h2",2),y(4,"\u0412\u0445\u0456\u0434"),m()(),g(5,"div",3)(6,"form",4),U("ngSubmit",function(){return r.submitForm()}),g(7,"nz-form-item")(8,"nz-form-control",5)(9,"nz-input-group",6),D(10,"input",7),z(11,rm,2,2,"ng-template",null,8,Se),m()()(),g(13,"nz-form-item")(14,"nz-form-control",5)(15,"nz-input-group",9),D(16,"input",10),z(17,cm,3,3,"ng-template",null,11,Se),m()()(),g(19,"div",12)(20,"div",13)(21,"label",14)(22,"span"),y(23," \u0417\u0430\u043F\u043E\u043C\u043D\u0438\u0442\u0438 \u043C\u0435\u043D\u0435"),m()()(),g(24,"div",13)(25,"a",15),y(26,"\u0417\u0430\u0431\u0443\u0432 \u043F\u0430\u0440\u043E\u043B\u044C?"),m()()(),g(27,"button",16),y(28," \u0423\u0432\u0456\u0439\u0442\u0438 "),m(),y(29," \u0430\u0431\u043E "),g(30,"a",17),y(31,"\u0437\u0430\u0440\u0435\u0454\u0441\u0442\u0440\u0443\u0432\u0430\u0442\u0438\u0441\u044C!"),m()()(),g(32,"div",3),D(33,"button-login",18),m()()()),s&2){let o=Ee(12),a=Ee(18);p(2),v("nzSpan",20),p(4),v("formGroup",r.validateForm),p(2),v("nzErrorTip",o),p(6),v("nzErrorTip",a),p(6),v("nzSpan",12),p(4),v("nzSpan",12),p(9),v("buttons",r.buttonsLogin)}},dependencies:[se,Mn,In,Gt,Dn,Ts,Es,kn,On,ze,Pe,Fe,vd,Q,Y,Pn,xn,Fn,Rn,An,$n,Sn,Qe]});let t=e;return t})();function um(t,e){t&1&&y(0," The input is not valid firstName! ")}function hm(t,e){t&1&&y(0," Please input your firstName! ")}function pm(t,e){if(t&1&&z(0,um,1,0)(1,hm,1,0),t&2){let n=e.$implicit;te(0,n.errors!=null&&n.errors.firstName?0:-1),p(1),te(1,n.errors!=null&&n.errors.required?1:-1)}}function fm(t,e){t&1&&y(0," The input is not valid E-mail! ")}function gm(t,e){t&1&&y(0," Please input your E-mail! ")}function mm(t,e){if(t&1&&z(0,fm,1,0)(1,gm,1,0),t&2){let n=e.$implicit;te(0,n.errors!=null&&n.errors.email?0:-1),p(1),te(1,n.errors!=null&&n.errors.required?1:-1)}}function _m(t,e){t&1&&y(0," MaxLength is 40 ")}function ym(t,e){t&1&&y(0," MinLength is 6 ")}function vm(t,e){t&1&&y(0," Password is required ")}function bm(t,e){if(t&1&&z(0,_m,1,0)(1,ym,1,0)(2,vm,1,0),t&2){let n=e.$implicit;te(0,n.errors!=null&&n.errors.maxlength?0:-1),p(1),te(1,n.errors!=null&&n.errors.minlength?1:-1),p(1),te(2,n.errors!=null&&n.errors.required?2:-1)}}var uu=(()=>{let e=class e{constructor(i,s,r){this._storage=i,this.fb=s,this.router=r,this.signService=b(Kt),this.authService=b(Ct),this.buttonsLogin=["email","google","phone"],this.validateForm=this.fb.group({firstName:["",ie.required],email:["",[ie.required,ie.email]],password:["",ie.required]})}submitForm(){this.validateForm.valid?(console.log(this.validateForm.value),this.signService.register(this.validateForm.value.firstName,this.validateForm.value.email,this.validateForm.value.password)):Object.values(this.validateForm.controls).forEach(i=>{i.invalid&&(i.markAsDirty(),i.updateValueAndValidity({onlySelf:!0}))})}};e.\u0275fac=function(s){return new(s||e)(oe(Tt),oe(Ht),oe(be))},e.\u0275cmp=k({type:e,selectors:[["app-register"]],standalone:!0,features:[O],decls:29,vars:6,consts:[["nz-row","","nzJustify","center",1,"row2"],["nz-col","",1,"section-heading",3,"nzSpan"],["nz-col","","nzSpan","20",1,"section-title"],["nz-col","","nzXs","20","nzSm","20","nzMd","10","nzLg","10","nzXl","10"],["nz-form","",1,"login-form",3,"formGroup","ngSubmit"],["nzHasFeedback","",3,"nzErrorTip"],["nzPrefixIcon","user"],["nz-input","","formControlName","firstName","placeholder","\u0412\u0430\u0448\u0435 \u0456\u043C'\u044F","id","firstName","type","firstName"],["firstNameErrorTpl",""],["nzPrefixIcon","mail"],["nz-input","","formControlName","email","placeholder","E-mail","id","email","type","email"],["emailErrorTpl",""],["nzPrefixIcon","lock"],["nz-input","","minlength","6","maxlength","12","placeholder","\u041F\u0430\u0440\u043E\u043B\u044C","formControlName","password","id","password"],["passwordErrorTpl",""],["nz-button","","nzType","primary",1,"login-form-button","login-form-margin"],[3,"buttons"]],template:function(s,r){if(s&1&&(g(0,"app-layout")(1,"div",0)(2,"div",1)(3,"h2",2),y(4,"\u0420\u0435\u0454\u0441\u0442\u0440\u0430\u0446\u0456\u044F"),m()(),g(5,"div",3)(6,"form",4),U("ngSubmit",function(){return r.submitForm()}),g(7,"nz-form-item")(8,"nz-form-control",5)(9,"nz-input-group",6),D(10,"input",7),z(11,pm,2,2,"ng-template",null,8,Se),m()()(),g(13,"nz-form-item")(14,"nz-form-control",5)(15,"nz-input-group",9),D(16,"input",10),z(17,mm,2,2,"ng-template",null,11,Se),m()()(),g(19,"nz-form-item")(20,"nz-form-control",5)(21,"nz-input-group",12),D(22,"input",13),z(23,bm,3,3,"ng-template",null,14,Se),m()()(),g(25,"button",15),y(26," \u0423\u0432\u0456\u0439\u0442\u0438 "),m()()(),g(27,"div",3),D(28,"button-login",16),m()()()),s&2){let o=Ee(12),a=Ee(18),l=Ee(24);p(2),v("nzSpan",20),p(4),v("formGroup",r.validateForm),p(2),v("nzErrorTip",o),p(6),v("nzErrorTip",a),p(6),v("nzErrorTip",l),p(8),v("buttons",r.buttonsLogin)}},dependencies:[se,Mn,In,Gt,Dn,Ts,Es,kn,On,ze,Pe,Fe,Q,Y,Pn,xn,Fn,Rn,An,$n,Qe],styles:["label[_ngcontent-%COMP%]{display:block;margin-top:10px}.card-container.card[_ngcontent-%COMP%]{max-width:400px!important;padding:40px}.card[_ngcontent-%COMP%]{background-color:#f7f7f7;padding:20px 25px 30px;margin:50px auto 25px;-moz-border-radius:2px;-webkit-border-radius:2px;border-radius:2px;-moz-box-shadow:0px 2px 2px rgba(0,0,0,.3);-webkit-box-shadow:0px 2px 2px rgba(0,0,0,.3);box-shadow:0 2px 2px #0000004d}.profile-img-card[_ngcontent-%COMP%]{width:96px;height:96px;margin:0 auto 10px;display:block;-moz-border-radius:50%;-webkit-border-radius:50%;border-radius:50%}"]});let t=e;return t})();var Ii=(()=>{let e=class e{constructor(){this.authService=b(Ct),this.router=b(be),this.localStorage=b(Tt)}canActivate(i,s){return!0}};e.\u0275fac=function(s){return new(s||e)},e.\u0275prov=ye({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function wm(t,e){if(t&1&&(g(0,"nz-timeline-item",6)(1,"h4"),y(2),m(),g(3,"p"),y(4),m(),g(5,"p"),y(6),m()()),t&2){let n=e.$implicit,i=ue(2);v("nzColor",i.getTimelineColor(n)),p(2),H(i.formatDate(n.date)),p(2),Vc(" ",n.user.username," - ",n.user.email?n.user.email:null," ",n.user.email?n.user.phone:null," "),p(2),Bc(" ",n.barber==null?null:n.barber.name," -> ",n.service==null?null:n.service.title," ")}}function Cm(t,e){if(t&1&&(g(0,"nz-timeline"),z(1,wm,7,7,"nz-timeline-item",5),m()),t&2){let n=ue();p(1),v("ngForOf",n.sort(n.calendarEvents()))}}var hu=(()=>{let e=class e{constructor(i,s){this.storage=i,this.fb=s,this.authService=b(Ct),this.router=b(be),this.currentUser$=bn(()=>this.authService.$user()),this._calendarService=b(Wt),this.calendarEvents=this._calendarService.$calendarEvents,this.validateForm=this.fb.group({email:["",[ie.required,ie.email]],password:["",ie.required],remember:[!1]})}ngOnInit(){}sort(i){return this.calendarEvents().sort((s,r)=>new Date(s.date).getTime()-new Date(r.date).getTime()),this.calendarEvents().filter(s=>s.user.email==this.authService.$user()?.email)}ngOnDestroy(){}getCellWithDate(i){return this._calendarService.getCalendarEventsOfDate(i)}getTimelineColor(i){return new Date(i.date).getTime()-new Date().getTime()<0?"red":"green"}deleteEvent(i){}formatDate(i){let s=new Date(i),r=new Date;return s.getDate()==r.getDate()?_i(s,"h:mm"):_i(s,"EEEE dd.MM h:mm",{locale:Kd})}};e.\u0275fac=function(s){return new(s||e)(oe(Tt),oe(Ht))},e.\u0275cmp=k({type:e,selectors:[["edit-user-app"]],standalone:!0,features:[O],decls:6,vars:3,consts:[["nz-row","",1,"row"],["nz-col","",3,"nzMd","nzXs"],[1,"stats-small","stats-small--1","card","card-small"],[1,"card-body","p-0","d-flex"],[4,"ngIf"],[3,"nzColor",4,"ngFor","ngForOf"],[3,"nzColor"]],template:function(s,r){s&1&&(g(0,"app-layout")(1,"div",0)(2,"div",1)(3,"div",2)(4,"div",3),z(5,Cm,2,1,"nz-timeline",4),m()()()()()),s&2&&(p(2),v("nzMd",12)("nzXs",22),p(3),v("ngIf",r.calendarEvents()))},dependencies:[ve,Ut,Tn,ee,Q,Y,Ed,Sd,se,Qe],styles:[".login-form[_ngcontent-%COMP%]{max-width:300px}.login-form-margin[_ngcontent-%COMP%]{margin-bottom:16px}.login-form-forgot[_ngcontent-%COMP%]{float:right}.login-form-button[_ngcontent-%COMP%]{width:100%}"]});let t=e;return t})();function Tm(t,e){t&1&&(g(0,"nz-select",20),D(1,"nz-option",21)(2,"nz-option",22),m())}function Em(t,e){t&1&&y(0," Use correct phone number use numbers [0-9] ")}function Sm(t,e){if(t&1&&z(0,Em,1,0),t&2){let n=e.$implicit;te(0,n.errors!=null&&n.errors.pattern?0:-1)}}var pu=(()=>{let e=class e{ngOnInit(){}getOTP(){this.applicationVerifier=this._signIn.reCaptcha(),console.log(this.applicationVerifier),this.isLoading=!0,this.newUser={phone:this.validateForm.value.phoneNumberPrefix+this.validateForm.value.phoneNumber,username:this.validateForm.value.name},this._signIn.signInWithPhone(this.applicationVerifier,this.newUser.phone).subscribe(i=>{this.verificationId=this._storage.get("verificationId"),this.confirmationResult=i,this.isLoading=!1,this.hideFirstStep=!0})}constructor(i){this.fb=i,this._signIn=b(Kt),this._storage=b(Tt),this._router=b(be),this.isLoading=!1,this.hideFirstStep=!1,this.buttonsLogin=["google","email"],this.newUser={},this.validateForm=this.fb.group({name:["",ie.required],phoneNumber:["",[ie.required,ie.minLength(6),ie.maxLength(12),ie.pattern("[0-9]*")]],phoneNumberPrefix:"+420",verificationId:["",ie.required]})}submitForm(){if(this.validateForm.valid){let i=this._signIn.withCredentional(this.verificationId,this.validateForm.value.verificationId,this.newUser).then(()=>{this._router.navigate(["home"])});console.log(i)}else Object.values(this.validateForm.controls).forEach(i=>{i.invalid&&(i.markAsDirty(),i.updateValueAndValidity({onlySelf:!0}))})}};e.\u0275fac=function(s){return new(s||e)(oe(Ht))},e.\u0275cmp=k({type:e,selectors:[["app-phone"]],standalone:!0,features:[O],decls:33,vars:9,consts:[["nz-row","","nzJustify","space-around","nzAlign","middle",1,"row2"],["nz-col","",1,"section-heading",3,"nzSpan"],["nz-col","","nzSpan","20",1,"section-title"],["nz-col","","nzXs","20","nzSm","20","nzMd","10","nzLg","10","nzXl","10"],["nz-col","","nz-form","",1,"login-form",3,"formGroup","ngSubmit"],["nzErrorTip","\u041D\u0435 \u043C\u043E\u0436\u0435 \u0431\u0443\u0442\u0438 \u043F\u0443\u0441\u0442\u0438\u043C"],["for","name","nzSpan","22"],["nz-input","","formControlName","name","name","name","placeholder","Username","id","name"],["nzHasFeedback","",3,"nzErrorTip"],["nzSpan","22"],[3,"nzAddOnBefore"],["addOnBeforeTemplate",""],["placeholder","000 000 000","formControlName","phoneNumber","id","phoneNumber","nz-input",""],["phoneErrorTpl",""],["nzType","info","nzMessage","\u041D\u0430 \u0432\u0430\u0448 \u043D\u043E\u043C\u0435\u0440 \u043D\u0430\u0434\u0456\u0439\u0434\u0435 \u043A\u043E\u0434 \u0434\u043B\u044F \u043F\u0456\u0434\u0442\u0432\u0435\u0440\u0434\u0436\u0435\u043D\u043D\u044F","nzShowIcon","",3,"hidden"],[3,"hidden"],["nz-input","","formControlName","verificationId","placeholder","Verification code","id","verificationId","type","text"],["nz-button","","nzType","primary",1,"login-form-button",3,"nzLoading","disabled","click"],["id","sign-in-button"],[3,"buttons"],["formControlName","phoneNumberPrefix","name","phoneNumberPrefix",1,"phone-select"],["nzLabel","+420","nzValue","+420"],["nzLabel","+380","nzValue","+380"]],template:function(s,r){if(s&1&&(g(0,"app-layout")(1,"div",0)(2,"div",1)(3,"h2",2),y(4,"\u0412\u0445\u0456\u0434"),m()(),g(5,"div",3)(6,"form",4),U("ngSubmit",function(){return r.submitForm()}),g(7,"nz-form-item")(8,"nz-form-control",5)(9,"nz-form-label",6),y(10,"\u0406\u043C'\u044F"),m(),D(11,"input",7),m()(),g(12,"nz-form-item")(13,"nz-form-control",8)(14,"nz-form-label",9),y(15,"\u0412\u0432\u0435\u0434\u0456\u0442\u044C \u0432\u0430\u0448 \u043D\u043E\u043C\u0435\u0440 \u0442\u0435\u043B\u0435\u0444\u043E\u043D\u0443"),m(),g(16,"nz-input-group",10),z(17,Tm,3,0,"ng-template",null,11,Se),D(19,"input",12),z(20,Sm,1,1,"ng-template",null,13,Se),m()()(),D(22,"nz-alert",14),g(23,"nz-form-item",15)(24,"nz-form-control")(25,"nz-form-label"),y(26,"\u0412\u0432\u0435\u0434\u0456\u0442\u044C \u043A\u043E\u0434 \u0437 \u0441\u043C\u0441 \u0442\u0443\u0442"),m(),D(27,"input",16),m()(),g(28,"button",17),U("click",function(){return r.hideFirstStep?r.submitForm:r.getOTP()}),y(29," \u041F\u0440\u043E\u0434\u043E\u043B\u0436\u0438\u0442\u044C "),m(),D(30,"div",18),m()(),g(31,"div",3),D(32,"button-login",19),m()()()),s&2){let o=Ee(18),a=Ee(21);p(2),v("nzSpan",20),p(4),v("formGroup",r.validateForm),p(7),v("nzErrorTip",a),p(3),v("nzAddOnBefore",o),p(6),v("hidden",!r.hideFirstStep),p(1),v("hidden",!r.hideFirstStep),p(5),v("nzLoading",r.isLoading)("disabled",r.validateForm.controls.phoneNumber.status=="INVALID"||(r.validateForm.controls.name.errors==null?null:r.validateForm.controls.name.errors.required)),p(4),v("buttons",r.buttonsLogin)}},dependencies:[se,Mn,In,Gt,Dn,kn,On,od,ze,Pe,Fe,Q,Y,Pn,xn,bd,Fn,Rn,An,gd,md,$n,Qe]});let t=e;return t})();var fu=(()=>{let e=class e{};e.\u0275fac=function(s){return new(s||e)},e.\u0275cmp=k({type:e,selectors:[["app-success"]],standalone:!0,features:[O],decls:6,vars:0,consts:[["nzStatus","success","nzTitle","Successfully Purchased Cloud Server ECS!","nzSubTitle","Order number: 2017182818828182881 Cloud server configuration takes 1-5 minutes, please wait."],["nz-result-extra",""],["nz-button","","nzType","primary"],["nz-button",""]],template:function(s,r){s&1&&(g(0,"nz-result",0)(1,"div",1)(2,"button",2),y(3,"Go Console"),m(),g(4,"button",3),y(5,"Buy Again"),m()()())},dependencies:[se,ze,Pe,Fe,Td,Cd]});let t=e;return t})();var gu=[{title:"Home",path:"home",component:mo},{title:"About",path:"about",component:Ps},{title:"Client",path:"clients",component:Ls},{title:"Reserve",path:"reserve",component:_o},{title:"Reserve",path:"reserve/:service",component:_o},{title:"Success",path:"success",component:fu},{title:"FireAdmin",path:"admin",loadChildren:()=>import("./chunk-R3KWGEN6.js").then(t=>t.AdminRoutingModule)},{title:"Feedback",path:"feedback",component:Bs},{title:"Gallery",path:"gallery",component:iu},{title:"Login",path:"login",component:du,canActivate:[Ii],data:{role:"notLoggined"}},{title:"Register",path:"register",component:uu,canActivate:[Ii],data:{role:"notLoggined"}},{path:"phone",component:pu,canActivate:[Ii],data:{role:"notLoggined"}},{title:"Services",path:"services",component:Vs},{title:"Profile",path:"user",component:hu,canActivate:[Ii]},{title:"Home",path:"**",component:mo}];var Im="@",yo=class{constructor(e,n,i,s,r){this.doc=e,this.delegate=n,this.zone=i,this.animationType=s,this.moduleImpl=r,this._rendererFactoryPromise=null}loadImpl(){return(this.moduleImpl??import("./chunk-6PZ73U4E.js")).catch(n=>{throw new Ac(5300,!1)}).then(({\u0275createEngine:n,\u0275AnimationRendererFactory:i})=>{let s=n(this.animationType,this.doc),r=new i(this.delegate,s,this.zone);return this.delegate=r,r})}createRenderer(e,n){let i=this.delegate.createRenderer(e,n);if(i.\u0275type===0)return i;typeof i.throwOnSyntheticProps=="boolean"&&(i.throwOnSyntheticProps=!1);let s=new vo(i);return n?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(r=>{let o=r.createRenderer(e,n);s.use(o)}).catch(r=>{s.use(i)}),s}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}},vo=class{constructor(e){this.delegate=e,this.replay=[],this.\u0275type=1}use(e){if(this.delegate=e,this.replay!==null){for(let n of this.replay)n(e);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(e,n){return this.delegate.createElement(e,n)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}get destroyNode(){return this.delegate.destroyNode}appendChild(e,n){this.delegate.appendChild(e,n)}insertBefore(e,n,i,s){this.delegate.insertBefore(e,n,i,s)}removeChild(e,n,i){this.delegate.removeChild(e,n,i)}selectRootElement(e,n){return this.delegate.selectRootElement(e,n)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,n,i,s){this.delegate.setAttribute(e,n,i,s)}removeAttribute(e,n,i){this.delegate.removeAttribute(e,n,i)}addClass(e,n){this.delegate.addClass(e,n)}removeClass(e,n){this.delegate.removeClass(e,n)}setStyle(e,n,i,s){this.delegate.setStyle(e,n,i,s)}removeStyle(e,n,i){this.delegate.removeStyle(e,n,i)}setProperty(e,n,i){this.shouldReplay(n)&&this.replay.push(s=>s.setProperty(e,n,i)),this.delegate.setProperty(e,n,i)}setValue(e,n){this.delegate.setValue(e,n)}listen(e,n,i){return this.shouldReplay(n)&&this.replay.push(s=>s.listen(e,n,i)),this.delegate.listen(e,n,i)}shouldReplay(e){return this.replay!==null&&e.startsWith(Im)}};function mu(t="animations"){return Nc([{provide:Fc,useFactory:(e,n,i)=>new yo(e,n,i,t),deps:[Cn,Kc,V]},{provide:xc,useValue:t==="noop"?"NoopAnimations":"BrowserAnimations"}])}var Gs="analytics",Dm="firebase_id",Mm="origin",km=60*1e3,Om="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Io="https://www.googletagmanager.com/gtag/js";var Me=new jt("@firebase/analytics");var Rm={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Ge=new Ln("analytics","Analytics",Rm);function Am(t){if(!t.startsWith(Io)){let e=Ge.create("invalid-gtag-resource",{gtagURL:t});return Me.warn(e.message),""}return t}function Tu(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function Nm(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function xm(t,e){let n=Nm("firebase-js-sdk-policy",{createScriptURL:Am}),i=document.createElement("script"),s=`${Io}?l=${t}&id=${e}`;i.src=n?n?.createScriptURL(s):s,i.async=!0,document.head.appendChild(i)}function Pm(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}function Fm(t,e,n,i,s,r){return C(this,null,function*(){let o=i[s];try{if(o)yield e[o];else{let l=(yield Tu(n)).find(c=>c.measurementId===s);l&&(yield e[l.appId])}}catch(a){Me.error(a)}t("config",s,r)})}function zm(t,e,n,i,s){return C(this,null,function*(){try{let r=[];if(s&&s.send_to){let o=s.send_to;Array.isArray(o)||(o=[o]);let a=yield Tu(n);for(let l of o){let c=a.find(u=>u.measurementId===l),d=c&&e[c.appId];if(d)r.push(d);else{r=[];break}}}r.length===0&&(r=Object.values(e)),yield Promise.all(r),t("event",i,s||{})}catch(r){Me.error(r)}})}function Lm(t,e,n,i){function s(r,...o){return C(this,null,function*(){try{if(r==="event"){let[a,l]=o;yield zm(t,e,n,a,l)}else if(r==="config"){let[a,l]=o;yield Fm(t,e,n,i,a,l)}else if(r==="consent"){let[a]=o;t("consent","update",a)}else if(r==="get"){let[a,l,c]=o;t("get",a,l,c)}else if(r==="set"){let[a]=o;t("set",a)}else t(r,...o)}catch(a){Me.error(a)}})}return s}function Bm(t,e,n,i,s){let r=function(...o){window[i].push(arguments)};return window[s]&&typeof window[s]=="function"&&(r=window[s]),window[s]=Lm(r,t,e,n),{gtagCore:r,wrappedGtag:window[s]}}function Vm(t){let e=window.document.getElementsByTagName("script");for(let n of Object.values(e))if(n.src&&n.src.includes(Io)&&n.src.includes(t))return n;return null}var Um=30,Gm=1e3,wo=class{constructor(e={},n=Gm){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}},Eu=new wo;function Hm(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}function $m(t){return C(this,null,function*(){var e;let{appId:n,apiKey:i}=t,s={method:"GET",headers:Hm(i)},r=Om.replace("{app-id}",n),o=yield fetch(r,s);if(o.status!==200&&o.status!==304){let a="";try{let l=yield o.json();!((e=l.error)===null||e===void 0)&&e.message&&(a=l.error.message)}catch{}throw Ge.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()})}function jm(i){return C(this,arguments,function*(t,e=Eu,n){let{appId:s,apiKey:r,measurementId:o}=t.options;if(!s)throw Ge.create("no-app-id");if(!r){if(o)return{measurementId:o,appId:s};throw Ge.create("no-api-key")}let a=e.getThrottleMetadata(s)||{backoffCount:0,throttleEndTimeMillis:Date.now()},l=new Co;return setTimeout(()=>C(this,null,function*(){l.abort()}),n!==void 0?n:km),Su({appId:s,apiKey:r,measurementId:o},a,l,e)})}function Su(r,o,a){return C(this,arguments,function*(t,{throttleEndTimeMillis:e,backoffCount:n},i,s=Eu){var l;let{appId:c,measurementId:d}=t;try{yield Wm(i,e)}catch(u){if(d)return Me.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${d} provided in the "measurementId" field in the local Firebase config. [${u?.message}]`),{appId:c,measurementId:d};throw u}try{let u=yield $m(t);return s.deleteThrottleMetadata(c),u}catch(u){let h=u;if(!Km(h)){if(s.deleteThrottleMetadata(c),d)return Me.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${d} provided in the "measurementId" field in the local Firebase config. [${h?.message}]`),{appId:c,measurementId:d};throw u}let f=Number((l=h?.customData)===null||l===void 0?void 0:l.httpStatus)===503?ks(n,s.intervalMillis,Um):ks(n,s.intervalMillis),w={throttleEndTimeMillis:Date.now()+f,backoffCount:n+1};return s.setThrottleMetadata(c,w),Me.debug(`Calling attemptFetch again in ${f} millis`),Su(t,w,i,s)}})}function Wm(t,e){return new Promise((n,i)=>{let s=Math.max(e-Date.now(),0),r=setTimeout(n,s);t.addEventListener(()=>{clearTimeout(r),i(Ge.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function Km(t){if(!(t instanceof wi)||!t.customData)return!1;let e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}var Co=class{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}};var To;function qm(t,e,n,i,s){return C(this,null,function*(){if(s&&s.global){t("event",n,i);return}else{let r=yield e,o=Object.assign(Object.assign({},i),{send_to:r});t("event",n,o)}})}function Ym(t,e,n,i){return C(this,null,function*(){if(i&&i.global)return t("set",{user_id:n}),Promise.resolve();{let s=yield e;t("config",s,{update:!0,user_id:n})}})}var Eo;function Qm(t){Eo=t}function Zm(t){To=t}function Jm(){return C(this,null,function*(){if(on())try{yield vi()}catch(t){return Me.warn(Ge.create("indexeddb-unavailable",{errorInfo:t?.toString()}).message),!1}else return Me.warn(Ge.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0})}function Xm(t,e,n,i,s,r,o){return C(this,null,function*(){var a;let l=jm(t);l.then(f=>{n[f.measurementId]=f.appId,t.options.measurementId&&f.measurementId!==t.options.measurementId&&Me.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${f.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(f=>Me.error(f)),e.push(l);let c=Jm().then(f=>{if(f)return i.getId()}),[d,u]=yield Promise.all([l,c]);Vm(r)||xm(r,d.measurementId),Eo&&(s("consent","default",Eo),Qm(void 0)),s("js",new Date);let h=(a=o?.config)!==null&&a!==void 0?a:{};return h[Mm]="firebase",h.update=!0,u!=null&&(h[Dm]=u),s("config",d.measurementId,h),To&&(s("set",To),Zm(void 0)),d.measurementId})}var So=class{constructor(e){this.app=e}_delete(){return delete jn[this.app.options.appId],Promise.resolve()}},jn={},_u=[],yu={},bo="dataLayer",e_="gtag",vu,Do,bu=!1;function t_(){let t=[];if(co()&&t.push("This is a browser extension environment."),bi()||t.push("Cookies are not available."),t.length>0){let e=t.map((i,s)=>`(${s+1}) ${i}`).join(" "),n=Ge.create("invalid-analytics-context",{errorInfo:e});Me.warn(n.message)}}function n_(t,e,n){t_();let i=t.options.appId;if(!i)throw Ge.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)Me.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Ge.create("no-api-key");if(jn[i]!=null)throw Ge.create("already-exists",{id:i});if(!bu){Pm(bo);let{wrappedGtag:r,gtagCore:o}=Bm(jn,_u,yu,bo,e_);Do=r,vu=o,bu=!0}return jn[i]=Xm(t,_u,yu,e,vu,bo,n),new So(t)}function Mo(t=_t()){t=j(t);let e=ot(t,Gs);return e.isInitialized()?e.getImmediate():Iu(t)}function Iu(t,e={}){let n=ot(t,Gs);if(n.isInitialized()){let s=n.getImmediate();if(Ad(e,n.getOptions()))return s;throw Ge.create("already-initialized")}return n.initialize({options:e})}function Du(){return C(this,null,function*(){if(co()||!bi()||!on())return!1;try{return yield vi()}catch{return!1}})}function Mu(t,e,n){t=j(t),Ym(Do,jn[t.app.options.appId],e,n).catch(i=>Me.error(i))}function ko(t,e,n,i){t=j(t),qm(Do,jn[t.app.options.appId],e,n,i).catch(s=>Me.error(s))}var wu="@firebase/analytics",Cu="0.10.2";function i_(){Ie(new le(Gs,(e,{options:n})=>{let i=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return n_(i,s,n)},"PUBLIC")),Ie(new le("analytics-internal",t,"PRIVATE")),G(wu,Cu),G(wu,Cu,"esm2017");function t(e){try{let n=e.getProvider(Gs).getImmediate();return{logEvent:(i,s,r)=>ko(n,i,s,r)}}catch(n){throw Ge.create("interop-component-reg-failed",{reason:n})}}}i_();var Ru="functions";var Oo=class{constructor(e,n,i){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=n.getImmediate({optional:!0}),this.auth||e.get().then(s=>this.auth=s,()=>{}),this.messaging||n.get().then(s=>this.messaging=s,()=>{}),this.appCheck||i.get().then(s=>this.appCheck=s,()=>{})}getAuthToken(){return C(this,null,function*(){if(this.auth)try{let e=yield this.auth.getToken();return e?.accessToken}catch{return}})}getMessagingToken(){return C(this,null,function*(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return yield this.messaging.getToken()}catch{return}})}getAppCheckToken(e){return C(this,null,function*(){if(this.appCheck){let n=e?yield this.appCheck.getLimitedUseToken():yield this.appCheck.getToken();return n.error?null:n.token}return null})}getContext(e){return C(this,null,function*(){let n=yield this.getAuthToken(),i=yield this.getMessagingToken(),s=yield this.getAppCheckToken(e);return{authToken:n,messagingToken:i,appCheckToken:s}})}};var Ro="us-central1";var Ao=class{constructor(e,n,i,s,r=Ro,o){this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new Oo(n,i,s),this.cancelAllRequests=new Promise(a=>{this.deleteService=()=>Promise.resolve(a())});try{let a=new URL(r);this.customDomain=a.origin,this.region=Ro}catch{this.customDomain=null,this.region=r}}_delete(){return this.deleteService()}_url(e){let n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}};function s_(t,e,n){t.emulatorOrigin=`http://${e}:${n}`}var ku="@firebase/functions",Ou="0.11.3";var r_="auth-internal",o_="app-check-internal",a_="messaging-internal";function l_(t,e){let n=(i,{instanceIdentifier:s})=>{let r=i.getProvider("app").getImmediate(),o=i.getProvider(r_),a=i.getProvider(a_),l=i.getProvider(o_);return new Ao(r,o,a,l,s,t)};Ie(new le(Ru,n,"PUBLIC").setMultipleInstances(!0)),G(ku,Ou,e),G(ku,Ou,"esm2017")}function Au(t=_t(),e=Ro){let i=ot(j(t),Ru).getImmediate({identifier:e}),s=yi("functions");return s&&Nu(i,...s),i}function Nu(t,e,n){s_(j(t),e,n)}l_(fetch.bind(self));var Di=class{constructor(e){return e}},xu="functions",No=class{constructor(){return vt(xu)}};var xo=new q("angularfire2.functions-instances");function c_(t,e){let n=yt(xu,t,e);return n&&new Di(n)}function d_(t){return(e,n)=>{let i=e.runOutsideAngular(()=>t(n));return new Di(i)}}var u_={provide:No,deps:[[new ne,xo]]},h_={provide:Di,useFactory:c_,deps:[[new ne,xo],bt]},p_=(()=>{class t{constructor(){G("angularfire",De.full,"fn")}static \u0275fac=function(i){return new(i||t)};static \u0275mod=P({type:t});static \u0275inj=x({providers:[h_,u_]})}return t})();function Pu(t,...e){return{ngModule:p_,providers:[{provide:xo,useFactory:d_(t),multi:!0,deps:[V,me,Be,wt,[new ne,xs],[new ne,Nt],...e]}]}}var Fu=at(Au,!0);var f_="/firebase-messaging-sw.js",g_="/firebase-cloud-messaging-push-scope",Gu="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",m_="https://fcmregistrations.googleapis.com/v1",Hu="google.c.a.c_id",__="google.c.a.c_l",y_="google.c.a.ts",v_="google.c.a.e";var Hs=function(t){return t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked",t}(Hs||{});function Pt(t){let e=new Uint8Array(t);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function b_(t){let e="=".repeat((4-t.length%4)%4),n=(t+e).replace(/\-/g,"+").replace(/_/g,"/"),i=atob(n),s=new Uint8Array(i.length);for(let r=0;r<i.length;++r)s[r]=i.charCodeAt(r);return s}var Po="fcm_token_details_db",w_=5,zu="fcm_token_object_Store";function C_(t){return C(this,null,function*(){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(r=>r.name).includes(Po))return null;let e=null;return(yield po(Po,w_,{upgrade:(i,s,r,o)=>C(this,null,function*(){var a;if(s<2||!i.objectStoreNames.contains(zu))return;let l=o.objectStore(zu),c=yield l.index("fcmSenderId").get(t);if(yield l.clear(),!!c){if(s===2){let d=c;if(!d.auth||!d.p256dh||!d.endpoint)return;e={token:d.fcmToken,createTime:(a=d.createTime)!==null&&a!==void 0?a:Date.now(),subscriptionOptions:{auth:d.auth,p256dh:d.p256dh,endpoint:d.endpoint,swScope:d.swScope,vapidKey:typeof d.vapidKey=="string"?d.vapidKey:Pt(d.vapidKey)}}}else if(s===3){let d=c;e={token:d.fcmToken,createTime:d.createTime,subscriptionOptions:{auth:Pt(d.auth),p256dh:Pt(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:Pt(d.vapidKey)}}}else if(s===4){let d=c;e={token:d.fcmToken,createTime:d.createTime,subscriptionOptions:{auth:Pt(d.auth),p256dh:Pt(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:Pt(d.vapidKey)}}}}})})).close(),yield Rs(Po),yield Rs("fcm_vapid_details_db"),yield Rs("undefined"),T_(e)?e:null})}function T_(t){if(!t||!t.subscriptionOptions)return!1;let{subscriptionOptions:e}=t;return typeof t.createTime=="number"&&t.createTime>0&&typeof t.token=="string"&&t.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}var E_="firebase-messaging-database",S_=1,an="firebase-messaging-store",Fo=null;function Bo(){return Fo||(Fo=po(E_,S_,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(an)}}})),Fo}function $u(t){return C(this,null,function*(){let e=Uo(t),i=yield(yield Bo()).transaction(an).objectStore(an).get(e);if(i)return i;{let s=yield C_(t.appConfig.senderId);if(s)return yield Vo(t,s),s}})}function Vo(t,e){return C(this,null,function*(){let n=Uo(t),s=(yield Bo()).transaction(an,"readwrite");return yield s.objectStore(an).put(e,n),yield s.done,e})}function I_(t){return C(this,null,function*(){let e=Uo(t),i=(yield Bo()).transaction(an,"readwrite");yield i.objectStore(an).delete(e),yield i.done})}function Uo({appConfig:t}){return t.appId}var D_={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},ke=new Ln("messaging","Messaging",D_);function M_(t,e){return C(this,null,function*(){let n=yield Ho(t),i=Wu(e),s={method:"POST",headers:n,body:JSON.stringify(i)},r;try{r=yield(yield fetch(Go(t.appConfig),s)).json()}catch(o){throw ke.create("token-subscribe-failed",{errorInfo:o?.toString()})}if(r.error){let o=r.error.message;throw ke.create("token-subscribe-failed",{errorInfo:o})}if(!r.token)throw ke.create("token-subscribe-no-token");return r.token})}function k_(t,e){return C(this,null,function*(){let n=yield Ho(t),i=Wu(e.subscriptionOptions),s={method:"PATCH",headers:n,body:JSON.stringify(i)},r;try{r=yield(yield fetch(`${Go(t.appConfig)}/${e.token}`,s)).json()}catch(o){throw ke.create("token-update-failed",{errorInfo:o?.toString()})}if(r.error){let o=r.error.message;throw ke.create("token-update-failed",{errorInfo:o})}if(!r.token)throw ke.create("token-update-no-token");return r.token})}function ju(t,e){return C(this,null,function*(){let i={method:"DELETE",headers:yield Ho(t)};try{let r=yield(yield fetch(`${Go(t.appConfig)}/${e}`,i)).json();if(r.error){let o=r.error.message;throw ke.create("token-unsubscribe-failed",{errorInfo:o})}}catch(s){throw ke.create("token-unsubscribe-failed",{errorInfo:s?.toString()})}})}function Go({projectId:t}){return`${m_}/projects/${t}/registrations`}function Ho(n){return C(this,arguments,function*({appConfig:t,installations:e}){let i=yield e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":`FIS ${i}`})})}function Wu({p256dh:t,auth:e,endpoint:n,vapidKey:i}){let s={web:{endpoint:n,auth:e,p256dh:t}};return i!==Gu&&(s.web.applicationPubKey=i),s}var O_=7*24*60*60*1e3;function R_(t){return C(this,null,function*(){let e=yield x_(t.swRegistration,t.vapidKey),n={vapidKey:t.vapidKey,swScope:t.swRegistration.scope,endpoint:e.endpoint,auth:Pt(e.getKey("auth")),p256dh:Pt(e.getKey("p256dh"))},i=yield $u(t.firebaseDependencies);if(i){if(P_(i.subscriptionOptions,n))return Date.now()>=i.createTime+O_?N_(t,{token:i.token,createTime:Date.now(),subscriptionOptions:n}):i.token;try{yield ju(t.firebaseDependencies,i.token)}catch(s){console.warn(s)}return Lu(t.firebaseDependencies,n)}else return Lu(t.firebaseDependencies,n)})}function A_(t){return C(this,null,function*(){let e=yield $u(t.firebaseDependencies);e&&(yield ju(t.firebaseDependencies,e.token),yield I_(t.firebaseDependencies));let n=yield t.swRegistration.pushManager.getSubscription();return n?n.unsubscribe():!0})}function N_(t,e){return C(this,null,function*(){try{let n=yield k_(t.firebaseDependencies,e),i=Object.assign(Object.assign({},e),{token:n,createTime:Date.now()});return yield Vo(t.firebaseDependencies,i),n}catch(n){throw yield A_(t),n}})}function Lu(t,e){return C(this,null,function*(){let i={token:yield M_(t,e),createTime:Date.now(),subscriptionOptions:e};return yield Vo(t,i),i.token})}function x_(t,e){return C(this,null,function*(){let n=yield t.pushManager.getSubscription();return n||t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:b_(e)})})}function P_(t,e){let n=e.vapidKey===t.vapidKey,i=e.endpoint===t.endpoint,s=e.auth===t.auth,r=e.p256dh===t.p256dh;return n&&i&&s&&r}function Bu(t){let e={from:t.from,collapseKey:t.collapse_key,messageId:t.fcmMessageId};return F_(e,t),z_(e,t),L_(e,t),e}function F_(t,e){if(!e.notification)return;t.notification={};let n=e.notification.title;n&&(t.notification.title=n);let i=e.notification.body;i&&(t.notification.body=i);let s=e.notification.image;s&&(t.notification.image=s);let r=e.notification.icon;r&&(t.notification.icon=r)}function z_(t,e){e.data&&(t.data=e.data)}function L_(t,e){var n,i,s,r,o;if(!e.fcmOptions&&!(!((n=e.notification)===null||n===void 0)&&n.click_action))return;t.fcmOptions={};let a=(s=(i=e.fcmOptions)===null||i===void 0?void 0:i.link)!==null&&s!==void 0?s:(r=e.notification)===null||r===void 0?void 0:r.click_action;a&&(t.fcmOptions.link=a);let l=(o=e.fcmOptions)===null||o===void 0?void 0:o.analytics_label;l&&(t.fcmOptions.analyticsLabel=l)}function B_(t){return typeof t=="object"&&!!t&&Hu in t}Ku("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o");Ku("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");function Ku(t,e){let n=[];for(let i=0;i<t.length;i++)n.push(t.charAt(i)),i<e.length&&n.push(e.charAt(i));return n.join("")}function V_(t){if(!t||!t.options)throw zo("App Configuration Object");if(!t.name)throw zo("App Name");let e=["projectId","apiKey","appId","messagingSenderId"],{options:n}=t;for(let i of e)if(!n[i])throw zo(i);return{appName:t.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}function zo(t){return ke.create("missing-app-config-values",{valueName:t})}var Lo=class{constructor(e,n,i){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;let s=V_(e);this.firebaseDependencies={app:e,appConfig:s,installations:n,analyticsProvider:i}}_delete(){return Promise.resolve()}};function U_(t){return C(this,null,function*(){try{t.swRegistration=yield navigator.serviceWorker.register(f_,{scope:g_}),t.swRegistration.update().catch(()=>{})}catch(e){throw ke.create("failed-service-worker-registration",{browserErrorMessage:e?.message})}})}function G_(t,e){return C(this,null,function*(){if(!e&&!t.swRegistration&&(yield U_(t)),!(!e&&t.swRegistration)){if(!(e instanceof ServiceWorkerRegistration))throw ke.create("invalid-sw-registration");t.swRegistration=e}})}function H_(t,e){return C(this,null,function*(){e?t.vapidKey=e:t.vapidKey||(t.vapidKey=Gu)})}function $_(t,e){return C(this,null,function*(){if(!navigator)throw ke.create("only-available-in-window");if(Notification.permission==="default"&&(yield Notification.requestPermission()),Notification.permission!=="granted")throw ke.create("permission-blocked");return yield H_(t,e?.vapidKey),yield G_(t,e?.serviceWorkerRegistration),R_(t)})}function j_(t,e,n){return C(this,null,function*(){let i=W_(e);(yield t.firebaseDependencies.analyticsProvider.get()).logEvent(i,{message_id:n[Hu],message_name:n[__],message_time:n[y_],message_device_time:Math.floor(Date.now()/1e3)})})}function W_(t){switch(t){case Hs.NOTIFICATION_CLICKED:return"notification_open";case Hs.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function K_(t,e){return C(this,null,function*(){let n=e.data;if(!n.isFirebaseMessaging)return;t.onMessageHandler&&n.messageType===Hs.PUSH_RECEIVED&&(typeof t.onMessageHandler=="function"?t.onMessageHandler(Bu(n)):t.onMessageHandler.next(Bu(n)));let i=n.data;B_(i)&&i[v_]==="1"&&(yield j_(t,n.messageType,i))})}var Vu="@firebase/messaging",Uu="0.12.7";var q_=t=>{let e=new Lo(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),t.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",n=>K_(e,n)),e},Y_=t=>{let e=t.getProvider("messaging").getImmediate();return{getToken:i=>$_(e,i)}};function Q_(){Ie(new le("messaging",q_,"PUBLIC")),Ie(new le("messaging-internal",Y_,"PRIVATE")),G(Vu,Uu),G(Vu,Uu,"esm2017")}function $o(){return C(this,null,function*(){try{yield vi()}catch{return!1}return typeof window<"u"&&on()&&bi()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})}function qu(t=_t()){return $o().then(e=>{if(!e)throw ke.create("unsupported-browser")},e=>{throw ke.create("indexed-db-unsupported")}),ot(j(t),"messaging").getImmediate()}Q_();var Mi=class{constructor(e){return e}},Yu="messaging",jo=class{constructor(){return vt(Yu)}};var Qu="__angularfire_symbol__messagingIsSupported",Wo="__angularfire_symbol__messagingIsSupportedValue";globalThis[Qu]||=$o().then(t=>globalThis[Wo]=t).catch(()=>globalThis[Wo]=!1);var $s={async:()=>globalThis[Qu],sync:()=>{let t=globalThis[Wo];if(t===void 0)throw new Error(Ns("Messaging"));return t}},Ko=new q("angularfire2.messaging-instances");function Z_(t,e){if(!$s.sync())return null;let n=yt(Yu,t,e);return n&&new Mi(n)}function J_(t){return(e,n)=>{if(!$s.sync())return null;let i=e.runOutsideAngular(()=>t(n));return new Mi(i)}}var X_={provide:jo,deps:[[new ne,Ko]]},e0={provide:Mi,useFactory:Z_,deps:[[new ne,Ko],bt]},t0=(()=>{class t{constructor(){G("angularfire",De.full,"fcm")}static \u0275fac=function(i){return new(i||t)};static \u0275mod=P({type:t});static \u0275inj=x({providers:[e0,X_,{provide:bs,useValue:$s.async,multi:!0}]})}return t})();function Zu(t,...e){return{ngModule:t0,providers:[{provide:Ko,useFactory:J_(t),multi:!0,deps:[V,me,Be,wt,...e]}]}}var BS=$s.async;var Ju=at(qu,!0);var ki=class{constructor(e){return e}},Xu="performance",qo=class{constructor(){return vt(Xu)}};var Yo=new q("angularfire2.performance-instances");function n0(t,e,n){if(!En(n))return null;let i=yt(Xu,t,e);return i&&new ki(i)}function i0(t){return(e,n,i)=>{if(!En(n))return null;let s=e.runOutsideAngular(()=>t(i));return new ki(s)}}var s0={provide:qo,deps:[[new ne,Yo]]},r0={provide:ki,useFactory:n0,deps:[[new ne,Yo],bt,nt]},o0=(()=>{class t{constructor(){G("angularfire",De.full,"perf")}static \u0275fac=function(i){return new(i||t)};static \u0275mod=P({type:t});static \u0275inj=x({providers:[r0,s0]})}return t})();function eh(t,...e){return{ngModule:o0,providers:[{provide:Yo,useFactory:i0(t),multi:!0,deps:[V,nt,me,Be,wt,...e]}]}}var th=at(qd,!0);var ah="firebasestorage.googleapis.com",a0="storageBucket",l0=2*60*1e3,c0=10*60*1e3;var St=class t extends wi{constructor(e,n,i=0){super(Qo(e),`Firebase Storage: ${n} (${Qo(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,t.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Qo(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}},zt=function(t){return t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment",t}(zt||{});function Qo(t){return"storage/"+t}function d0(){let t="An unknown error occurred, please check the error payload for server response.";return new St(zt.UNKNOWN,t)}function u0(){return new St(zt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function h0(){return new St(zt.CANCELED,"User canceled the upload/download.")}function p0(t){return new St(zt.INVALID_URL,"Invalid URL '"+t+"'.")}function f0(t){return new St(zt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function nh(t){return new St(zt.INVALID_ARGUMENT,t)}function lh(){return new St(zt.APP_DELETED,"The Firebase app was deleted.")}function g0(t){return new St(zt.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}var Ft=class t{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){let e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let i;try{i=t.makeFromUrl(e,n)}catch{return new t(e,"")}if(i.path==="")return i;throw f0(e)}static makeFromUrl(e,n){let i=null,s="([A-Za-z0-9.\\-_]+)";function r(J){J.path.charAt(J.path.length-1)==="/"&&(J.path_=J.path_.slice(0,-1))}let o="(/(.*))?$",a=new RegExp("^gs://"+s+o,"i"),l={bucket:1,path:3};function c(J){J.path_=decodeURIComponent(J.path)}let d="v[A-Za-z0-9_]+",u=n.replace(/[.]/g,"\\."),h="(/([^?#]*).*)?$",f=new RegExp(`^https?://${u}/${d}/b/${s}/o${h}`,"i"),w={bucket:1,path:3},S=n===ah?"(?:storage.googleapis.com|storage.cloud.google.com)":n,M="([^?#]*)",ce=new RegExp(`^https?://${S}/${s}/${M}`,"i"),F=[{regex:a,indices:l,postModify:r},{regex:f,indices:w,postModify:c},{regex:ce,indices:{bucket:1,path:2},postModify:c}];for(let J=0;J<F.length;J++){let Ke=F[J],jr=Ke.regex.exec(e);if(jr){let Pg=jr[Ke.indices.bucket],Wr=jr[Ke.indices.path];Wr||(Wr=""),i=new t(Pg,Wr),Ke.postModify(i);break}}if(i==null)throw p0(e);return i}},Zo=class{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}};function m0(t,e,n){let i=1,s=null,r=null,o=!1,a=0;function l(){return a===2}let c=!1;function d(...M){c||(c=!0,e.apply(null,M))}function u(M){s=setTimeout(()=>{s=null,t(f,l())},M)}function h(){r&&clearTimeout(r)}function f(M,...ce){if(c){h();return}if(M){h(),d.call(null,M,...ce);return}if(l()||o){h(),d.call(null,M,...ce);return}i<64&&(i*=2);let F;a===1?(a=2,F=0):F=(i+Math.random())*1e3,u(F)}let w=!1;function S(M){w||(w=!0,h(),!c&&(s!==null?(M||(a=2),clearTimeout(s),u(0)):M||(a=1)))}return u(0),r=setTimeout(()=>{o=!0,S(!0)},n),S}function _0(t){t(!1)}function y0(t){return t!==void 0}function ih(t,e,n,i){if(i<e)throw nh(`Invalid value for '${t}'. Expected ${e} or greater.`);if(i>n)throw nh(`Invalid value for '${t}'. Expected ${n} or less.`)}function v0(t){let e=encodeURIComponent,n="?";for(let i in t)if(t.hasOwnProperty(i)){let s=e(i)+"="+e(t[i]);n=n+s+"&"}return n=n.slice(0,-1),n}var Jo=function(t){return t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT",t}(Jo||{});function b0(t,e){let n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,r=e.indexOf(t)!==-1;return n||s||r}var Xo=class{constructor(e,n,i,s,r,o,a,l,c,d,u,h=!0){this.url_=e,this.method_=n,this.headers_=i,this.body_=s,this.successCodes_=r,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=d,this.connectionFactory_=u,this.retry=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((f,w)=>{this.resolve_=f,this.reject_=w,this.start_()})}start_(){let e=(i,s)=>{if(s){i(!1,new Wn(!1,null,!0));return}let r=this.connectionFactory_();this.pendingConnection_=r;let o=a=>{let l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&r.addUploadProgressListener(o),r.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&r.removeUploadProgressListener(o),this.pendingConnection_=null;let a=r.getErrorCode()===Jo.NO_ERROR,l=r.getStatus();if(!a||b0(l,this.additionalRetryCodes_)&&this.retry){let d=r.getErrorCode()===Jo.ABORT;i(!1,new Wn(!1,null,d));return}let c=this.successCodes_.indexOf(l)!==-1;i(!0,new Wn(c,r))})},n=(i,s)=>{let r=this.resolve_,o=this.reject_,a=s.connection;if(s.wasSuccessCode)try{let l=this.callback_(a,a.getResponse());y0(l)?r(l):r()}catch(l){o(l)}else if(a!==null){let l=d0();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(s.canceled){let l=this.appDelete_?lh():h0();o(l)}else{let l=u0();o(l)}};this.canceled_?n(!1,new Wn(!1,null,!0)):this.backoffId_=m0(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&_0(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}},Wn=class{constructor(e,n,i){this.wasSuccessCode=e,this.connection=n,this.canceled=!!i}};function w0(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function C0(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function T0(t,e){e&&(t["X-Firebase-GMPID"]=e)}function E0(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function S0(t,e,n,i,s,r,o=!0){let a=v0(t.urlParams),l=t.url+a,c=Object.assign({},t.headers);return T0(c,e),w0(c,n),C0(c,r),E0(c,i),new Xo(l,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o)}function I0(t){if(t.length===0)return null;let e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function D0(t){let e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}var nI=256*1024;var ea=class t{constructor(e,n){this._service=e,n instanceof Ft?this._location=n:this._location=Ft.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new t(e,n)}get root(){let e=new Ft(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return D0(this._location.path)}get storage(){return this._service}get parent(){let e=I0(this._location.path);if(e===null)return null;let n=new Ft(this._location.bucket,e);return new t(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw g0(e)}};function sh(t,e){let n=e?.[a0];return n==null?null:Ft.makeFromBucketSpec(n,t)}function M0(t,e,n,i={}){t.host=`${e}:${n}`,t._protocol="http";let{mockUserToken:s}=i;s&&(t._overrideAuthToken=typeof s=="string"?s:Is(s,t.app.options.projectId))}var ta=class{constructor(e,n,i,s,r){this.app=e,this._authProvider=n,this._appCheckProvider=i,this._url=s,this._firebaseVersion=r,this._bucket=null,this._host=ah,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=l0,this._maxUploadRetryTime=c0,this._requests=new Set,s!=null?this._bucket=Ft.makeFromBucketSpec(s,this._host):this._bucket=sh(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Ft.makeFromBucketSpec(this._url,e):this._bucket=sh(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){ih("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){ih("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){return C(this,null,function*(){if(this._overrideAuthToken)return this._overrideAuthToken;let e=this._authProvider.getImmediate({optional:!0});if(e){let n=yield e.getToken();if(n!==null)return n.accessToken}return null})}_getAppCheckToken(){return C(this,null,function*(){let e=this._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ea(this,e)}_makeRequest(e,n,i,s,r=!0){if(this._deleted)return new Zo(lh());{let o=S0(e,this._appId,i,s,n,this._firebaseVersion,r);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}makeRequestWithTokens(e,n){return C(this,null,function*(){let[i,s]=yield Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,i,s).getPromise()})}},rh="@firebase/storage",oh="0.12.3";var ch="storage";function dh(t=_t(),e){t=j(t);let i=ot(t,ch).getImmediate({identifier:e}),s=yi("storage");return s&&uh(i,...s),i}function uh(t,e,n,i={}){M0(t,e,n,i)}function k0(t,{instanceIdentifier:e}){let n=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new ta(n,i,s,e,As)}function O0(){Ie(new le(ch,k0,"PUBLIC").setMultipleInstances(!0)),G(rh,oh,""),G(rh,oh,"esm2017")}O0();var Oi=class{constructor(e){return e}},hh="storage",na=class{constructor(){return vt(hh)}};var ia=new q("angularfire2.storage-instances");function R0(t,e){let n=yt(hh,t,e);return n&&new Oi(n)}function A0(t){return(e,n)=>{let i=e.runOutsideAngular(()=>t(n));return new Oi(i)}}var N0={provide:na,deps:[[new ne,ia]]},x0={provide:Oi,useFactory:R0,deps:[[new ne,ia],bt]},P0=(()=>{class t{constructor(){G("angularfire",De.full,"gcs")}static \u0275fac=function(i){return new(i||t)};static \u0275mod=P({type:t});static \u0275inj=x({providers:[x0,N0]})}return t})();function ph(t,...e){return{ngModule:P0,providers:[{provide:ia,useFactory:A0(t),multi:!0,deps:[V,me,Be,wt,[new ne,xs],[new ne,Nt],...e]}]}}var fh=at(dh,!0);var ln=class{constructor(e){return e}},_h="analytics",ra=class{constructor(){return vt(_h)}};var oa="__angularfire_symbol__analyticsIsSupportedValue",yh="__angularfire_symbol__analyticsIsSupported";globalThis[yh]||=Du().then(t=>globalThis[oa]=t).catch(()=>globalThis[oa]=!1);var js={async:()=>globalThis[yh],sync:()=>{let t=globalThis[oa];if(t===void 0)throw new Error(Ns("Analytics"));return t}},vh=js.async;var F0=at(ko,!0);var z0=at(Mu,!0);var bh=(()=>{class t{initialized;disposables=[];constructor(n,i,s){G("angularfire",De.full,"user-tracking");let r;this.initialized=i.runOutsideAngular(()=>new Promise(o=>{r=o})),vh().then(()=>{let o=s.get(ln);o?this.disposables=[Ud(n).subscribe(a=>{z0(o,a?.uid),r()})]:r()})}ngOnDestroy(){this.disposables.forEach(n=>n.unsubscribe())}static \u0275fac=function(i){return new(i||t)(I(Bd),I(V),I(me))};static \u0275prov=ye({token:t,factory:t.\u0275fac})}return t})(),L0="firebase_event_origin",B0="firebase_previous_class",V0="firebase_previous_id",U0="firebase_previous_screen",G0="firebase_screen_class",gh="firebase_screen_id",H0="firebase_screen",aa="outlet",$0="page_path",j0="page_title",Ri="screen_class",mh="screen_name",W0="screen_view",K0="auto",q0="#",Y0=Math.floor(Math.random()*(2**32-1))-2**31,sa={},Q0=t=>{let e=[t[Ri],t[aa]].join(q0);if(sa.hasOwnProperty(e))return sa[e];{let n=Y0++;return sa[e]=n,n}},Z0=(t,e,n)=>t.events.pipe(pt(s=>s instanceof Qc)).pipe(_e(s=>{let o=t.parseUrl(t.url.replace(/(?:\().+(?:\))/g,h=>h.replace("://",":///"))).root.children[s.snapshot.outlet]?.toString()||"",a=t.routerState.root.children.map(h=>h).find(h=>h.outlet===s.snapshot.outlet);if(!a)return Te(null);let l=a;for(;l.firstChild;)l=l.firstChild;let c=l.pathFromRoot.map(h=>h.routeConfig?.path).filter(h=>h).join("/")||"/",d={[mh]:c,[$0]:`/${o}`,[L0]:K0,[H0]:c,[aa]:s.snapshot.outlet};e&&(d[j0]=e.getTitle());let u=a.component;if(u){if(u===Xc){let h=s.snapshot;for(;h.firstChild;)h=h.firstChild;u=h.component}}else u=s.snapshot.component;if(typeof u=="string")return Te(Ne(ge({},d),{[Ri]:u}));if(u){let h=n.resolveComponentFactory(u);return Te(Ne(ge({},d),{[Ri]:h.selector}))}return Te(null)}),pt(s=>!!s),de(s=>ge({[G0]:s[Ri],[gh]:Q0(s)},s)),Dc(s=>s[aa]),qr(s=>s.pipe(hi((r,o)=>JSON.stringify(r)===JSON.stringify(o)),Jr(void 0),Mc(),de(([r,o])=>r?ge({[B0]:r[Ri],[U0]:r[mh],[V0]:r[gh]},o):o)))),J0=(()=>{class t{disposable;constructor(n,i,s,r,o,a){G("angularfire",De.full,"screen-tracking"),vh().then(()=>{let l=a.get(ln);!n||!l||r.runOutsideAngular(()=>{this.disposable=Z0(n,i,s).pipe(_e(c=>C(this,null,function*(){return o&&(yield o.initialized),F0(l,W0,c)}))).subscribe()})})}ngOnDestroy(){this.disposable&&this.disposable.unsubscribe()}static \u0275fac=function(i){return new(i||t)(I(be,8),I(Yc,8),I(Pc),I(V),I(bh,8),I(me))};static \u0275prov=ye({token:t,factory:t.\u0275fac})}return t})(),la=new q("angularfire2.analytics-instances");function X0(t,e){if(!js.sync())return null;let n=yt(_h,t,e);return n&&new ln(n)}function e1(t){return(e,n)=>{if(!js.sync())return null;let i=e.runOutsideAngular(()=>t(n));return new ln(i)}}var t1={provide:ra,deps:[[new ne,la]]},n1={provide:ln,useFactory:X0,deps:[[new ne,la],bt]},i1=(()=>{class t{constructor(n,i){G("angularfire",De.full,"analytics")}static \u0275fac=function(i){return new(i||t)(I(J0,8),I(bh,8))};static \u0275mod=P({type:t});static \u0275inj=x({providers:[n1,t1,{provide:bs,useValue:js.async,multi:!0}]})}return t})();function wh(t,...e){return{ngModule:i1,providers:[{provide:la,useFactory:e1(t),multi:!0,deps:[V,me,Be,wt,...e]}]}}var s1=new Map,r1={activated:!1,tokenObservers:[]},o1={initialized:!1,enabled:!1};function dt(t){return s1.get(t)||Object.assign({},r1)}function Ih(){return o1}var a1="https://content-firebaseappcheck.googleapis.com/v1";var l1="exchangeDebugToken",Ch={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},aD=24*60*60*1e3;var da=class{constructor(e,n,i,s,r){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=i,this.lowerBound=s,this.upperBound=r,this.pending=null,this.nextErrorWaitInterval=s,s>r)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return C(this,null,function*(){this.stop();try{this.pending=new he,this.pending.promise.catch(n=>{}),yield c1(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new he,this.pending.promise.catch(n=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}};function c1(t){return new Promise(e=>{setTimeout(e,t)})}var d1={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},qt=new Ln("appCheck","AppCheck",d1);function Dh(t){if(!dt(t).activated)throw qt.create("use-before-activation",{appName:t.name})}function Mh(i,s){return C(this,arguments,function*({url:t,body:e},n){let r={"Content-Type":"application/json"},o=n.getImmediate({optional:!0});if(o){let f=yield o.getHeartbeatsHeader();f&&(r["X-Firebase-Client"]=f)}let a={method:"POST",body:JSON.stringify(e),headers:r},l;try{l=yield fetch(t,a)}catch(f){throw qt.create("fetch-network-error",{originalErrorMessage:f?.message})}if(l.status!==200)throw qt.create("fetch-status-error",{httpStatus:l.status});let c;try{c=yield l.json()}catch(f){throw qt.create("fetch-parse-error",{originalErrorMessage:f?.message})}let d=c.ttl.match(/^([\d.]+)(s)$/);if(!d||!d[2]||isNaN(Number(d[1])))throw qt.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${c.ttl}`});let u=Number(d[1])*1e3,h=Date.now();return{token:c.token,expireTimeMillis:h+u,issuedAtTimeMillis:h}})}function kh(t,e){let{projectId:n,appId:i,apiKey:s}=t.options;return{url:`${a1}/projects/${n}/apps/${i}:${l1}?key=${s}`,body:{debug_token:e}}}var u1="firebase-app-check-database",h1=1,ua="firebase-app-check-store";var Ws=null;function p1(){return Ws||(Ws=new Promise((t,e)=>{try{let n=indexedDB.open(u1,h1);n.onsuccess=i=>{t(i.target.result)},n.onerror=i=>{var s;e(qt.create("storage-open",{originalErrorMessage:(s=i.target.error)===null||s===void 0?void 0:s.message}))},n.onupgradeneeded=i=>{let s=i.target.result;switch(i.oldVersion){case 0:s.createObjectStore(ua,{keyPath:"compositeKey"})}}}catch(n){e(qt.create("storage-open",{originalErrorMessage:n?.message}))}}),Ws)}function f1(t,e){return g1(m1(t),e)}function g1(t,e){return C(this,null,function*(){let i=(yield p1()).transaction(ua,"readwrite"),r=i.objectStore(ua).put({compositeKey:t,value:e});return new Promise((o,a)=>{r.onsuccess=l=>{o()},i.onerror=l=>{var c;a(qt.create("storage-set",{originalErrorMessage:(c=l.target.error)===null||c===void 0?void 0:c.message}))}})})}function m1(t){return`${t.options.appId}-${t.name}`}var ha=new jt("@firebase/app-check");function ca(t,e){return on()?f1(t,e).catch(n=>{ha.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function Oh(){return Ih().enabled}function Rh(){return C(this,null,function*(){let t=Ih();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var _1={error:"UNKNOWN_ERROR"};function y1(t){return Ss.encodeString(JSON.stringify(t),!1)}function pa(t,e=!1){return C(this,null,function*(){let n=t.app;Dh(n);let i=dt(n),s=i.token,r;if(s&&!Ai(s)&&(i.token=void 0,s=void 0),!s){let l=yield i.cachedTokenPromise;l&&(Ai(l)?s=l:yield ca(n,void 0))}if(!e&&s&&Ai(s))return{token:s.token};let o=!1;if(Oh()){i.exchangeTokenPromise||(i.exchangeTokenPromise=Mh(kh(n,yield Rh()),t.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),o=!0);let l=yield i.exchangeTokenPromise;return yield ca(n,l),i.token=l,{token:l.token}}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),o=!0),s=yield dt(n).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"?ha.warn(l.message):ha.error(l),r=l}let a;return s?r?Ai(s)?a={token:s.token,internalError:r}:a=Eh(r):(a={token:s.token},i.token=s,yield ca(n,s)):a=Eh(r),o&&C1(n,a),a})}function v1(t){return C(this,null,function*(){let e=t.app;Dh(e);let{provider:n}=dt(e);if(Oh()){let i=yield Rh(),{token:s}=yield Mh(kh(e,i),t.heartbeatServiceProvider);return{token:s}}else{let{token:i}=yield n.getToken();return{token:i}}})}function b1(t,e,n,i){let{app:s}=t,r=dt(s),o={next:n,error:i,type:e};if(r.tokenObservers=[...r.tokenObservers,o],r.token&&Ai(r.token)){let a=r.token;Promise.resolve().then(()=>{n({token:a.token}),Th(t)}).catch(()=>{})}r.cachedTokenPromise.then(()=>Th(t))}function Ah(t,e){let n=dt(t),i=n.tokenObservers.filter(s=>s.next!==e);i.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=i}function Th(t){let{app:e}=t,n=dt(e),i=n.tokenRefresher;i||(i=w1(t),n.tokenRefresher=i),!i.isRunning()&&n.isTokenAutoRefreshEnabled&&i.start()}function w1(t){let{app:e}=t;return new da(()=>C(this,null,function*(){let n=dt(e),i;if(n.token?i=yield pa(t,!0):i=yield pa(t),i.error)throw i.error;if(i.internalError)throw i.internalError}),()=>!0,()=>{let n=dt(e);if(n.token){let i=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5,s=n.token.expireTimeMillis-5*60*1e3;return i=Math.min(i,s),Math.max(0,i-Date.now())}else return 0},Ch.RETRIAL_MIN_WAIT,Ch.RETRIAL_MAX_WAIT)}function C1(t,e){let n=dt(t).tokenObservers;for(let i of n)try{i.type==="EXTERNAL"&&e.error!=null?i.error(e.error):i.next(e)}catch{}}function Ai(t){return t.expireTimeMillis-Date.now()>0}function Eh(t){return{token:y1(_1),error:t}}var fa=class{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){let{tokenObservers:e}=dt(this.app);for(let n of e)Ah(this.app,n.next);return Promise.resolve()}};function T1(t,e){return new fa(t,e)}function E1(t){return{getToken:e=>pa(t,e),getLimitedUseToken:()=>v1(t),addTokenListener:e=>b1(t,"INTERNAL",e),removeTokenListener:e=>Ah(t.app,e)}}var S1="@firebase/app-check",I1="0.8.3";var D1="app-check",Sh="app-check-internal";function M1(){Ie(new le(D1,t=>{let e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return T1(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(Sh).initialize()})),Ie(new le(Sh,t=>{let e=t.getProvider("app-check").getImmediate();return E1(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),G(S1,I1)}M1();var k1=["localhost","0.0.0.0","127.0.0.1"],vD=typeof window<"u"&&k1.includes(window.location.hostname);var O1="firebase",R1="10.10.0";lt.registerVersion(O1,R1,"app-compat");var A1=["ngOnDestroy"],Ph=(t,e,n,i={})=>new Proxy(t,{get:(s,r)=>n.runOutsideAngular(()=>{if(t[r])return i?.spy?.get&&i.spy.get(r,t[r]),t[r];if(A1.indexOf(r)>-1)return()=>{};let o=e.toPromise().then(a=>{let l=a?.[r];return typeof l=="function"?l.bind(a):l?.then?l.then(c=>n.run(()=>c)):n.run(()=>l)});return new Proxy(()=>{},{get:(a,l)=>o[l],apply:(a,l,c)=>o.then(d=>{let u=d?.(...c);return i?.spy?.apply&&i.spy.apply(r,c,u),u})})})});var ga=class{constructor(e){return e}},Ks=new q("angularfire2.app.options"),qs=new q("angularfire2.app.name");function Ys(t,e,n){let i=typeof n=="string"&&n||"[DEFAULT]",s=typeof n=="object"&&n||{};s.name=s.name||i;let o=lt.apps.filter(a=>a&&a.name===s.name)[0]||e.runOutsideAngular(()=>lt.initializeApp(t,s));try{if(JSON.stringify(t)!==JSON.stringify(o.options)){let a=!!module.hot;N1("error",`${o.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new ga(o)}var N1=(t,...e)=>{ao()&&typeof console<"u"&&console[t](...e)};function Qs(t,e,n,i,s){let[,r,o]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===t)||[];if(r)return x1(s,o)||(xh("error",`${e} was already initialized on the ${n} Firebase App with different settings.${P1?" You may need to reload as Firebase is not HMR aware.":""}`),xh("warn",{is:s,was:o})),r;{let a=i();return globalThis.\u0275AngularfireInstanceCache.push([t,a,s]),a}}function x1(t,e){try{return t.toString()===e.toString()}catch{return t===e}}var P1=typeof module<"u"&&!!module.hot,xh=(t,...e)=>{ao()&&typeof console<"u"&&console[t](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var ma=new q("angularfire2.auth.use-emulator"),_a=new q("angularfire2.auth.settings"),ya=new q("angularfire2.auth.tenant-id"),va=new q("angularfire2.auth.langugage-code"),ba=new q("angularfire2.auth.use-device-language"),wa=new q("angularfire.auth.persistence"),Ca=(t,e,n,i,s,r,o,a)=>Qs(`${t.name}.auth`,"AngularFireAuth",t.name,()=>{let l=e.runOutsideAngular(()=>t.auth());if(n&&l.useEmulator(...n),i&&(l.tenantId=i),l.languageCode=s,r&&l.useDeviceLanguage(),o)for(let[c,d]of Object.entries(o))l.settings[c]=d;return a&&l.setPersistence(a),l},[n,i,s,r,o,a]),Fh=(()=>{class t{authState;idToken;user;idTokenResult;credential;constructor(n,i,s,r,o,a,l,c,d,u,h,f){let w=new Ve,S=Te(void 0).pipe(ui(o.outsideAngular),_e(()=>r.runOutsideAngular(()=>import("./chunk-4T7SIAW7.js"))),de(()=>Ys(n,r,i)),de(M=>Ca(M,r,a,c,d,u,l,h)),Zr({bufferSize:1,refCount:!1}));if(jc(s))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Te(null);else{S.pipe(Ic()).subscribe();let M=S.pipe(_e(F=>F.getRedirectResult().then(J=>J,()=>null)),xt,Zr({bufferSize:1,refCount:!1})),ce=S.pipe(_e(F=>new Rt(J=>({unsubscribe:r.runOutsideAngular(()=>F.onAuthStateChanged(Ke=>J.next(Ke),Ke=>J.error(Ke),()=>J.complete()))})))),Ce=S.pipe(_e(F=>new Rt(J=>({unsubscribe:r.runOutsideAngular(()=>F.onIdTokenChanged(Ke=>J.next(Ke),Ke=>J.error(Ke),()=>J.complete()))}))));this.authState=M.pipe(Xr(ce),hs(o.outsideAngular),ui(o.insideAngular)),this.user=M.pipe(Xr(Ce),hs(o.outsideAngular),ui(o.insideAngular)),this.idToken=this.user.pipe(_e(F=>F?ps(F.getIdToken()):Te(null))),this.idTokenResult=this.user.pipe(_e(F=>F?ps(F.getIdTokenResult()):Te(null))),this.credential=vn(M,w,this.authState.pipe(pt(F=>!F))).pipe(de(F=>F?.user?F:null),hs(o.outsideAngular),ui(o.insideAngular))}return Ph(this,S,r,{spy:{apply:(M,ce,Ce)=>{(M.startsWith("signIn")||M.startsWith("createUser"))&&Ce.then(F=>w.next(F))}}})}static \u0275fac=function(i){return new(i||t)(I(Ks),I(qs,8),I(nt),I(V),I(Be),I(ma,8),I(_a,8),I(ya,8),I(va,8),I(ba,8),I(wa,8),I(Nt,8))};static \u0275prov=ye({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})();var zh="@firebase/database",Lh="1.0.4";var xl="";function Pl(t){xl=t}var Oa=class{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),re(n))}get(e){let n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Ds(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}};var Ra=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return Ye(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}};var gp=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){let e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Oa(e)}}catch{}return new Ra},dn=gp("localStorage"),Aa=gp("sessionStorage");var Qn=new jt("@firebase/database"),mp=function(){let t=1;return function(){return t++}}(),_p=function(t){let e=Pd(t),n=new xd;n.update(e);let i=n.digest();return Ss.encodeByteArray(i)},ns=function(...t){let e="";for(let n=0;n<t.length;n++){let i=t[n];Array.isArray(i)||i&&typeof i=="object"&&typeof i.length=="number"?e+=ns.apply(null,i):typeof i=="object"?e+=re(i):e+=i,e+=" "}return e},un=null,Bh=!0,yp=function(t,e){_(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(Qn.logLevel=Fd.VERBOSE,un=Qn.log.bind(Qn),e&&Aa.set("logging_enabled",!0)):typeof t=="function"?un=t:(un=null,Aa.remove("logging_enabled"))},pe=function(...t){if(Bh===!0&&(Bh=!1,un===null&&Aa.get("logging_enabled")===!0&&yp(!0)),un){let e=ns.apply(null,t);un(e)}},is=function(t){return function(...e){pe(t,...e)}},Na=function(...t){let e="FIREBASE INTERNAL ERROR: "+ns(...t);Qn.error(e)},Mt=function(...t){let e=`FIREBASE FATAL ERROR: ${ns(...t)}`;throw Qn.error(e),new Error(e)},we=function(...t){let e="FIREBASE WARNING: "+ns(...t);Qn.warn(e)},L1=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&we("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Er=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},B1=function(t){if(mt()||document.readyState==="complete")t();else{let e=!1,n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Jt="[MIN_NAME]",Lt="[MAX_NAME]",pn=function(t,e){if(t===e)return 0;if(t===Jt||e===Lt)return-1;if(e===Jt||t===Lt)return 1;{let n=Vh(t),i=Vh(e);return n!==null?i!==null?n-i===0?t.length-e.length:n-i:-1:i!==null?1:t<e?-1:1}},V1=function(t,e){return t===e?0:t<e?-1:1},Ni=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+re(e))},Fl=function(t){if(typeof t!="object"||t===null)return re(t);let e=[];for(let i in t)e.push(i);e.sort();let n="{";for(let i=0;i<e.length;i++)i!==0&&(n+=","),n+=re(e[i]),n+=":",n+=Fl(t[e[i]]);return n+="}",n},vp=function(t,e){let n=t.length;if(n<=e)return[t];let i=[];for(let s=0;s<n;s+=e)s+e>n?i.push(t.substring(s,n)):i.push(t.substring(s,s+e));return i};function fe(t,e){for(let n in t)t.hasOwnProperty(n)&&e(n,t[n])}var bp=function(t){_(!Er(t),"Invalid JSON number");let e=11,n=52,i=(1<<e-1)-1,s,r,o,a,l;t===0?(r=0,o=0,s=1/t===-1/0?1:0):(s=t<0,t=Math.abs(t),t>=Math.pow(2,1-i)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),i),r=a+i,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(r=0,o=Math.round(t/Math.pow(2,1-i-n))));let c=[];for(l=n;l;l-=1)c.push(o%2?1:0),o=Math.floor(o/2);for(l=e;l;l-=1)c.push(r%2?1:0),r=Math.floor(r/2);c.push(s?1:0),c.reverse();let d=c.join(""),u="";for(l=0;l<64;l+=8){let h=parseInt(d.substr(l,8),2).toString(16);h.length===1&&(h="0"+h),u=u+h}return u.toLowerCase()},U1=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},G1=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function H1(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");let i=new Error(t+" at "+e._path.toString()+": "+n);return i.code=t.toUpperCase(),i}var $1=new RegExp("^-?(0*)\\d{1,10}$"),j1=-2147483648,W1=2147483647,Vh=function(t){if($1.test(t)){let e=Number(t);if(e>=j1&&e<=W1)return e}return null},ri=function(t){try{t()}catch(e){setTimeout(()=>{let n=e.stack||"";throw we("Exception was thrown by user callback.",n),e},Math.floor(0))}},K1=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},zi=function(t,e){let n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};var xa=class{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n?.getImmediate({optional:!0}),this.appCheck||n?.get().then(i=>this.appCheck=i)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,i)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,i):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(i=>i.addTokenListener(e))}notifyForInvalidToken(){we(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}};var Pa=class{constructor(e,n,i){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(s=>this.auth_=s)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(pe("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,i)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,i):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',we(e)}},Li=(()=>{class t{constructor(n){this.accessToken=n}getToken(n){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(n){n(this.accessToken)}removeTokenChangeListener(n){}notifyForInvalidToken(){}}t.OWNER="owner";return t})(),Js="5",wp="v",Cp="s",Tp="r",Ep="f",Sp=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Ip="ls",Dp="p",Fa="ac",Mp="websocket",kp="long_polling";var Xs=class{constructor(e,n,i,s,r=!1,o="",a=!1,l=!1){this.secure=n,this.namespace=i,this.webSocketOnly=s,this.nodeAdmin=r,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=dn.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&dn.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){let e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}};function q1(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function Op(t,e,n){_(typeof e=="string","typeof type must == string"),_(typeof n=="object","typeof params must == object");let i;if(e===Mp)i=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===kp)i=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);q1(t)&&(n.ns=t.namespace);let s=[];return fe(n,(r,o)=>{s.push(r+"="+o)}),i+s.join("&")}var za=class{constructor(){this.counters_={}}incrementCounter(e,n=1){Ye(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return Md(this.counters_)}};var Ta={},Ea={};function zl(t){let e=t.toString();return Ta[e]||(Ta[e]=new za),Ta[e]}function Y1(t,e){let n=t.toString();return Ea[n]||(Ea[n]=e()),Ea[n]}var La=class{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){let i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let s=0;s<i.length;++s)i[s]&&ri(()=>{this.onMessage_(i[s])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var Uh="start",Q1="close",Z1="pLPCommand",J1="pRTLPCB",Rp="id",Ap="pw",Np="ser",X1="cb",ey="seg",ty="ts",ny="d",iy="dframe",xp=1870,Pp=30,sy=xp-Pp,ry=25e3,oy=3e4,Gi=class t{constructor(e,n,i,s,r,o,a){this.connId=e,this.repoInfo=n,this.applicationId=i,this.appCheckToken=s,this.authToken=r,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=is(e),this.stats_=zl(n),this.urlFn=l=>(this.appCheckToken&&(l[Fa]=this.appCheckToken),Op(n,kp,l))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new La(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(oy)),B1(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Ba((...r)=>{let[o,a,l,c,d]=r;if(this.incrementIncomingBytes_(r),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===Uh)this.id=a,this.password=l;else if(o===Q1)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...r)=>{let[o,a]=r;this.incrementIncomingBytes_(r),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);let i={};i[Uh]="t",i[Np]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(i[X1]=this.scriptTagHolder.uniqueCallbackIdentifier),i[wp]=Js,this.transportSessionId&&(i[Cp]=this.transportSessionId),this.lastSessionId&&(i[Ip]=this.lastSessionId),this.applicationId&&(i[Dp]=this.applicationId),this.appCheckToken&&(i[Fa]=this.appCheckToken),typeof location<"u"&&location.hostname&&Sp.test(location.hostname)&&(i[Tp]=Ep);let s=this.urlFn(i);this.log_("Connecting via long-poll to "+s),this.scriptTagHolder.addTag(s,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){t.forceAllow_=!0}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){return mt()?!1:t.forceAllow_?!0:!t.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!U1()&&!G1()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){let n=re(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);let i=Dd(n),s=vp(i,sy);for(let r=0;r<s.length;r++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[r]),this.curSegmentNum++}addDisconnectPingFrame(e,n){if(mt())return;this.myDisconnFrame=document.createElement("iframe");let i={};i[iy]="t",i[Rp]=e,i[Ap]=n,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){let n=re(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}},Ba=class t{constructor(e,n,i,s){if(this.onDisconnect=i,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,mt())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=mp(),window[Z1+this.uniqueCallbackIdentifier]=e,window[J1+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();let r="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(r='<script>document.domain="'+document.domain+'";<\/script>');let o="<html><body>"+r+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){pe("frame writing exception"),a.stack&&pe(a.stack),pe(a)}}}static createIFrame_(){let e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||pe("No IE domain setting required")}catch{let i=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let e={};e[Rp]=this.myID,e[Ap]=this.myPW,e[Np]=this.currentSerial;let n=this.urlFn(e),i="",s=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+Pp+i.length<=xp;){let o=this.pendingSegs.shift();i=i+"&"+ey+s+"="+o.seg+"&"+ty+s+"="+o.ts+"&"+ny+s+"="+o.d,s++}return n=n+i,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,i){this.pendingSegs.push({seg:e,ts:n,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);let i=()=>{this.outstandingRequests.delete(n),this.newRequest_()},s=setTimeout(i,Math.floor(ry)),r=()=>{clearTimeout(s),i()};this.addTag(e,r)}addTag(e,n){mt()?this.doNodeLongPoll(e,n):setTimeout(()=>{try{if(!this.sendNewPolls)return;let i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){let s=i.readyState;(!s||s==="loaded"||s==="complete")&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),n())},i.onerror=()=>{pe("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}};var ay=16384,ly=45e3,er=null;typeof MozWebSocket<"u"?er=MozWebSocket:typeof WebSocket<"u"&&(er=WebSocket);var qn=(()=>{class t{constructor(n,i,s,r,o,a,l){this.connId=n,this.applicationId=s,this.appCheckToken=r,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=is(this.connId),this.stats_=zl(i),this.connURL=t.connectionURL_(i,a,l,r,s),this.nodeAdmin=i.nodeAdmin}static connectionURL_(n,i,s,r,o){let a={};return a[wp]=Js,!mt()&&typeof location<"u"&&location.hostname&&Sp.test(location.hostname)&&(a[Tp]=Ep),i&&(a[Cp]=i),s&&(a[Ip]=s),r&&(a[Fa]=r),o&&(a[Dp]=o),Op(n,Mp,a)}open(n,i){this.onDisconnect=i,this.onMessage=n,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,dn.set("previous_websocket_failure",!0);try{let s;if(mt()){let r=this.nodeAdmin?"AdminNode":"Node";s={headers:{"User-Agent":`Firebase/${Js}/${xl}/${process.platform}/${r}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(s.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(s.headers["X-Firebase-AppCheck"]=this.appCheckToken);let o=process.env,a=this.connURL.indexOf("wss://")===0?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;a&&(s.proxy={origin:a})}this.mySock=new er(this.connURL,[],s)}catch(s){this.log_("Error instantiating WebSocket.");let r=s.message||s.data;r&&this.log_(r),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=s=>{this.handleIncomingFrame(s)},this.mySock.onerror=s=>{this.log_("WebSocket error.  Closing connection.");let r=s.message||s.data;r&&this.log_(r),this.onClosed_()}}start(){}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){let n=!1;if(typeof navigator<"u"&&navigator.userAgent){let i=/Android ([0-9]{0,}\.[0-9]{0,})/,s=navigator.userAgent.match(i);s&&s.length>1&&parseFloat(s[1])<4.4&&(n=!0)}return!n&&er!==null&&!t.forceDisallow_}static previouslyFailed(){return dn.isInMemoryStorage||dn.get("previous_websocket_failure")===!0}markConnectionHealthy(){dn.remove("previous_websocket_failure")}appendFrame_(n){if(this.frames.push(n),this.frames.length===this.totalFrames){let i=this.frames.join("");this.frames=null;let s=Ds(i);this.onMessage(s)}}handleNewFrameCount_(n){this.totalFrames=n,this.frames=[]}extractFrameCount_(n){if(_(this.frames===null,"We already have a frame buffer"),n.length<=6){let i=Number(n);if(!isNaN(i))return this.handleNewFrameCount_(i),null}return this.handleNewFrameCount_(1),n}handleIncomingFrame(n){if(this.mySock===null)return;let i=n.data;if(this.bytesReceived+=i.length,this.stats_.incrementCounter("bytes_received",i.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(i);else{let s=this.extractFrameCount_(i);s!==null&&this.appendFrame_(s)}}send(n){this.resetKeepAlive();let i=re(n);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);let s=vp(i,ay);s.length>1&&this.sendString_(String(s.length));for(let r=0;r<s.length;r++)this.sendString_(s[r])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(ly))}sendString_(n){try{this.mySock.send(n)}catch(i){this.log_("Exception thrown from WebSocket.send():",i.message||i.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4;return t})(),Fp=(()=>{class t{constructor(n){this.initTransports_(n)}static get ALL_TRANSPORTS(){return[Gi,qn]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(n){let i=qn&&qn.isAvailable(),s=i&&!qn.previouslyFailed();if(n.webSocketOnly&&(i||we("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),s=!0),s)this.transports_=[qn];else{let r=this.transports_=[];for(let o of t.ALL_TRANSPORTS)o&&o.isAvailable()&&r.push(o);t.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}t.globalTransportInitialized_=!1;return t})(),cy=6e4,dy=5e3,uy=10*1024,hy=100*1024,Sa="t",Gh="d",py="s",Hh="r",fy="e",$h="o",jh="a",Wh="n",Kh="p",gy="h",Va=class{constructor(e,n,i,s,r,o,a,l,c,d){this.id=e,this.repoInfo_=n,this.applicationId_=i,this.appCheckToken_=s,this.authToken_=r,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=c,this.lastSessionId=d,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=is("c:"+this.id+":"),this.transportManager_=new Fp(n),this.log_("Connection created"),this.start_()}start_(){let e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,i)},Math.floor(0));let s=e.healthyTimeout||0;s>0&&(this.healthyTimeout_=zi(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>hy?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>uy?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){let n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Sa in e){let n=e[Sa];n===jh?this.upgradeIfSecondaryHealthy_():n===Hh?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===$h&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){let n=Ni("t",e),i=Ni("d",e);if(n==="c")this.onSecondaryControl_(i);else if(n==="d")this.pendingDataMessages.push(i);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:Kh,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:jh,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:Wh,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){let n=Ni("t",e),i=Ni("d",e);n==="c"?this.onControl_(i):n==="d"&&this.onDataMessage_(i)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){let n=Ni(Sa,e);if(Gh in e){let i=e[Gh];if(n===gy){let s=Object.assign({},i);this.repoInfo_.isUsingEmulator&&(s.h=this.repoInfo_.host),this.onHandshake_(s)}else if(n===Wh){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===py?this.onConnectionShutdown_(i):n===Hh?this.onReset_(i):n===fy?Na("Server Error: "+i):n===$h?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Na("Unknown control packet command: "+n)}}onHandshake_(e){let n=e.ts,i=e.v,s=e.h;this.sessionId=e.s,this.repoInfo_.host=s,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),Js!==i&&we("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,i),zi(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(cy))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):zi(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(dy))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:Kh,d:{}}}))}onSecondaryConnectionLost_(){let e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(dn.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var tr=class{put(e,n,i,s){}merge(e,n,i,s){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,i){}onDisconnectMerge(e,n,i){}onDisconnectCancel(e,n){}reportStats(e){}};var nr=class{constructor(e){this.allowedEvents_=e,this.listeners_={},_(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){let i=[...this.listeners_[e]];for(let s=0;s<i.length;s++)i[s].callback.apply(i[s].context,n)}}on(e,n,i){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:i});let s=this.getInitialEvent(e);s&&n.apply(i,s)}off(e,n,i){this.validateEventType_(e);let s=this.listeners_[e]||[];for(let r=0;r<s.length;r++)if(s[r].callback===n&&(!i||i===s[r].context)){s.splice(r,1);return}}validateEventType_(e){_(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}};var ir=class t extends nr{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!lo()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new t}getInitialEvent(e){return _(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}};var qh=32,Yh=768,B=class{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let i=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[i]=this.pieces_[s],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}};function L(){return new B("")}function R(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Xt(t){return t.pieces_.length-t.pieceNum_}function $(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new B(t.pieces_,e)}function Ll(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function my(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function Hi(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function zp(t){if(t.pieceNum_>=t.pieces_.length)return null;let e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new B(e,0)}function Z(t,e){let n=[];for(let i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);if(e instanceof B)for(let i=e.pieceNum_;i<e.pieces_.length;i++)n.push(e.pieces_[i]);else{let i=e.split("/");for(let s=0;s<i.length;s++)i[s].length>0&&n.push(i[s])}return new B(n,0)}function A(t){return t.pieceNum_>=t.pieces_.length}function Oe(t,e){let n=R(t),i=R(e);if(n===null)return e;if(n===i)return Oe($(t),$(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function _y(t,e){let n=Hi(t,0),i=Hi(e,0);for(let s=0;s<n.length&&s<i.length;s++){let r=pn(n[s],i[s]);if(r!==0)return r}return n.length===i.length?0:n.length<i.length?-1:1}function Bl(t,e){if(Xt(t)!==Xt(e))return!1;for(let n=t.pieceNum_,i=e.pieceNum_;n<=t.pieces_.length;n++,i++)if(t.pieces_[n]!==e.pieces_[i])return!1;return!0}function Ze(t,e){let n=t.pieceNum_,i=e.pieceNum_;if(Xt(t)>Xt(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[i])return!1;++n,++i}return!0}var Ua=class{constructor(e,n){this.errorPrefix_=n,this.parts_=Hi(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=Ti(this.parts_[i]);Lp(this)}};function yy(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Ti(e),Lp(t)}function vy(t){let e=t.parts_.pop();t.byteLength_-=Ti(e),t.parts_.length>0&&(t.byteLength_-=1)}function Lp(t){if(t.byteLength_>Yh)throw new Error(t.errorPrefix_+"has a key path longer than "+Yh+" bytes ("+t.byteLength_+").");if(t.parts_.length>qh)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+qh+") or object contains a cycle "+cn(t))}function cn(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}var Ga=class t extends nr{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{let i=!document[e];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new t}getInitialEvent(e){return _(e==="visible","Unknown event type: "+e),[this.visible_]}};var xi=1e3,by=60*5*1e3,Qh=30*1e3,wy=1.3,Cy=3e4,Ty="server_kill",Zh=3,Vl=(()=>{class t extends tr{constructor(n,i,s,r,o,a,l,c){if(super(),this.repoInfo_=n,this.applicationId_=i,this.onDataUpdate_=s,this.onConnectStatus_=r,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=l,this.authOverride_=c,this.id=t.nextPersistentConnectionId_++,this.log_=is("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=xi,this.maxReconnectDelay_=by,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c&&!mt())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Ga.getInstance().on("visible",this.onVisible_,this),n.host.indexOf("fblocal")===-1&&ir.getInstance().on("online",this.onOnline_,this)}sendRequest(n,i,s){let r=++this.requestNumber_,o={r,a:n,b:i};this.log_(re(o)),_(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),s&&(this.requestCBHash_[r]=s)}get(n){this.initConnection_();let i=new he,r={action:"g",request:{p:n._path.toString(),q:n._queryObject},onComplete:a=>{let l=a.d;a.s==="ok"?i.resolve(l):i.reject(l)}};this.outstandingGets_.push(r),this.outstandingGetCount_++;let o=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(o),i.promise}listen(n,i,s,r){this.initConnection_();let o=n._queryIdentifier,a=n._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),_(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"listen() called for non-default but complete query"),_(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");let l={onComplete:r,hashFn:i,query:n,tag:s};this.listens.get(a).set(o,l),this.connected_&&this.sendListen_(l)}sendGet_(n){let i=this.outstandingGets_[n];this.sendRequest("g",i.request,s=>{delete this.outstandingGets_[n],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),i.onComplete&&i.onComplete(s)})}sendListen_(n){let i=n.query,s=i._path.toString(),r=i._queryIdentifier;this.log_("Listen on "+s+" for "+r);let o={p:s},a="q";n.tag&&(o.q=i._queryObject,o.t=n.tag),o.h=n.hashFn(),this.sendRequest(a,o,l=>{let c=l.d,d=l.s;t.warnOnListenWarnings_(c,i),(this.listens.get(s)&&this.listens.get(s).get(r))===n&&(this.log_("listen response",l),d!=="ok"&&this.removeListen_(s,r),n.onComplete&&n.onComplete(d,c))})}static warnOnListenWarnings_(n,i){if(n&&typeof n=="object"&&Ye(n,"w")){let s=$t(n,"w");if(Array.isArray(s)&&~s.indexOf("no_index")){let r='".indexOn": "'+i._queryParams.getIndex().toString()+'"',o=i._path.toString();we(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${r} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(n){this.authToken_=n,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(n)}reduceReconnectDelayIfAdminCredential_(n){(n&&n.length===40||Rd(n))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=Qh)}refreshAppCheckToken(n){this.appCheckToken_=n,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let n=this.authToken_,i=Od(n)?"auth":"gauth",s={cred:n};this.authOverride_===null?s.noauth=!0:typeof this.authOverride_=="object"&&(s.authvar=this.authOverride_),this.sendRequest(i,s,r=>{let o=r.s,a=r.d||"error";this.authToken_===n&&(o==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},n=>{let i=n.s,s=n.d||"error";i==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(i,s)})}unlisten(n,i){let s=n._path.toString(),r=n._queryIdentifier;this.log_("Unlisten called for "+s+" "+r),_(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(s,r)&&this.connected_&&this.sendUnlisten_(s,r,n._queryObject,i)}sendUnlisten_(n,i,s,r){this.log_("Unlisten on "+n+" for "+i);let o={p:n},a="n";r&&(o.q=s,o.t=r),this.sendRequest(a,o)}onDisconnectPut(n,i,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",n,i,s):this.onDisconnectRequestQueue_.push({pathString:n,action:"o",data:i,onComplete:s})}onDisconnectMerge(n,i,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",n,i,s):this.onDisconnectRequestQueue_.push({pathString:n,action:"om",data:i,onComplete:s})}onDisconnectCancel(n,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",n,null,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"oc",data:null,onComplete:i})}sendOnDisconnect_(n,i,s,r){let o={p:i,d:s};this.log_("onDisconnect "+n,o),this.sendRequest(n,o,a=>{r&&setTimeout(()=>{r(a.s,a.d)},Math.floor(0))})}put(n,i,s,r){this.putInternal("p",n,i,s,r)}merge(n,i,s,r){this.putInternal("m",n,i,s,r)}putInternal(n,i,s,r,o){this.initConnection_();let a={p:i,d:s};o!==void 0&&(a.h=o),this.outstandingPuts_.push({action:n,request:a,onComplete:r}),this.outstandingPutCount_++;let l=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(l):this.log_("Buffering put: "+i)}sendPut_(n){let i=this.outstandingPuts_[n].action,s=this.outstandingPuts_[n].request,r=this.outstandingPuts_[n].onComplete;this.outstandingPuts_[n].queued=this.connected_,this.sendRequest(i,s,o=>{this.log_(i+" response",o),delete this.outstandingPuts_[n],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),r&&r(o.s,o.d)})}reportStats(n){if(this.connected_){let i={c:n};this.log_("reportStats",i),this.sendRequest("s",i,s=>{if(s.s!=="ok"){let o=s.d;this.log_("reportStats","Error sending stats: "+o)}})}}onDataMessage_(n){if("r"in n){this.log_("from server: "+re(n));let i=n.r,s=this.requestCBHash_[i];s&&(delete this.requestCBHash_[i],s(n.b))}else{if("error"in n)throw"A server-side error has occurred: "+n.error;"a"in n&&this.onDataPush_(n.a,n.b)}}onDataPush_(n,i){this.log_("handleServerMessage",n,i),n==="d"?this.onDataUpdate_(i.p,i.d,!1,i.t):n==="m"?this.onDataUpdate_(i.p,i.d,!0,i.t):n==="c"?this.onListenRevoked_(i.p,i.q):n==="ac"?this.onAuthRevoked_(i.s,i.d):n==="apc"?this.onAppCheckRevoked_(i.s,i.d):n==="sd"?this.onSecurityDebugPacket_(i):Na("Unrecognized action received from server: "+re(n)+`
Are you using the latest client?`)}onReady_(n,i){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(n),this.lastSessionId=i,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(n){_(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(n))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(n){n&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=xi,this.realtime_||this.scheduleConnect_(0)),this.visible_=n}onOnline_(n){n?(this.log_("Browser went online."),this.reconnectDelay_=xi,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>Cy&&(this.reconnectDelay_=xi),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let n=new Date().getTime()-this.lastConnectionAttemptTime_,i=Math.max(0,this.reconnectDelay_-n);i=Math.random()*i,this.log_("Trying to reconnect in "+i+"ms"),this.scheduleConnect_(i),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*wy)}this.onConnectStatus_(!1)}establishConnection_(){return C(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let n=this.onDataMessage_.bind(this),i=this.onReady_.bind(this),s=this.onRealtimeDisconnect_.bind(this),r=this.id+":"+t.nextConnectionId_++,o=this.lastSessionId,a=!1,l=null,c=function(){l?l.close():(a=!0,s())},d=function(h){_(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(h)};this.realtime_={close:c,sendRequest:d};let u=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[h,f]=yield Promise.all([this.authTokenProvider_.getToken(u),this.appCheckTokenProvider_.getToken(u)]);a?pe("getToken() completed but was canceled"):(pe("getToken() completed. Creating connection."),this.authToken_=h&&h.accessToken,this.appCheckToken_=f&&f.token,l=new Va(r,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,n,i,s,w=>{we(w+" ("+this.repoInfo_.toString()+")"),this.interrupt(Ty)},o))}catch(h){this.log_("Failed to get token: "+h),a||(this.repoInfo_.nodeAdmin&&we(h),c())}}})}interrupt(n){pe("Interrupting connection for reason: "+n),this.interruptReasons_[n]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(n){pe("Resuming connection for reason: "+n),delete this.interruptReasons_[n],Ms(this.interruptReasons_)&&(this.reconnectDelay_=xi,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(n){let i=n-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:i})}cancelSentTransactions_(){for(let n=0;n<this.outstandingPuts_.length;n++){let i=this.outstandingPuts_[n];i&&"h"in i.request&&i.queued&&(i.onComplete&&i.onComplete("disconnect"),delete this.outstandingPuts_[n],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(n,i){let s;i?s=i.map(o=>Fl(o)).join("$"):s="default";let r=this.removeListen_(n,s);r&&r.onComplete&&r.onComplete("permission_denied")}removeListen_(n,i){let s=new B(n).toString(),r;if(this.listens.has(s)){let o=this.listens.get(s);r=o.get(i),o.delete(i),o.size===0&&this.listens.delete(s)}else r=void 0;return r}onAuthRevoked_(n,i){pe("Auth token revoked: "+n+"/"+i),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(n==="invalid_token"||n==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=Zh&&(this.reconnectDelay_=Qh,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(n,i){pe("App check token revoked: "+n+"/"+i),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(n==="invalid_token"||n==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=Zh&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(n){this.securityDebugCallback_?this.securityDebugCallback_(n):"msg"in n&&console.log("FIREBASE: "+n.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let n of this.listens.values())for(let i of n.values())this.sendListen_(i);for(let n=0;n<this.outstandingPuts_.length;n++)this.outstandingPuts_[n]&&this.sendPut_(n);for(;this.onDisconnectRequestQueue_.length;){let n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}for(let n=0;n<this.outstandingGets_.length;n++)this.outstandingGets_[n]&&this.sendGet_(n)}sendConnectStats_(){let n={},i="js";mt()&&(this.repoInfo_.nodeAdmin?i="admin_node":i="node"),n["sdk."+i+"."+xl.replace(/\./g,"-")]=1,lo()?n["framework.cordova"]=1:kd()&&(n["framework.reactnative"]=1),this.reportStats(n)}shouldReconnect_(){let n=ir.getInstance().currentlyOnline();return Ms(this.interruptReasons_)&&n}}t.nextPersistentConnectionId_=0,t.nextConnectionId_=0;return t})(),N=class t{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new t(e,n)}};var Zn=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){let i=new N(Jt,e),s=new N(Jt,n);return this.compare(i,s)!==0}minPost(){return N.MIN}};var Zs,sr=class extends Zn{static get __EMPTY_NODE(){return Zs}static set __EMPTY_NODE(e){Zs=e}compare(e,n){return pn(e.name,n.name)}isDefinedOn(e){throw zn("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return N.MIN}maxPost(){return new N(Lt,Zs)}makePost(e,n){return _(typeof e=="string","KeyIndex indexValue must always be a string."),new N(e,Zs)}toString(){return".key"}},Dt=new sr;var Yn=class{constructor(e,n,i,s,r=null){this.isReverse_=s,this.resultGenerator_=r,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?i(e.key,n):1,s&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},ut=(()=>{class t{constructor(n,i,s,r,o){this.key=n,this.value=i,this.color=s??t.RED,this.left=r??Je.EMPTY_NODE,this.right=o??Je.EMPTY_NODE}copy(n,i,s,r,o){return new t(n??this.key,i??this.value,s??this.color,r??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||!!n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,i,s){let r=this,o=s(n,r.key);return o<0?r=r.copy(null,null,null,r.left.insert(n,i,s),null):o===0?r=r.copy(null,i,null,null,null):r=r.copy(null,null,null,null,r.right.insert(n,i,s)),r.fixUp_()}removeMin_(){if(this.left.isEmpty())return Je.EMPTY_NODE;let n=this;return!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.removeMin_(),null),n.fixUp_()}remove(n,i){let s,r;if(s=this,i(n,s.key)<0)!s.left.isEmpty()&&!s.left.isRed_()&&!s.left.left.isRed_()&&(s=s.moveRedLeft_()),s=s.copy(null,null,null,s.left.remove(n,i),null);else{if(s.left.isRed_()&&(s=s.rotateRight_()),!s.right.isEmpty()&&!s.right.isRed_()&&!s.right.left.isRed_()&&(s=s.moveRedRight_()),i(n,s.key)===0){if(s.right.isEmpty())return Je.EMPTY_NODE;r=s.right.min_(),s=s.copy(r.key,r.value,null,null,s.right.removeMin_())}s=s.copy(null,null,null,null,s.right.remove(n,i))}return s.fixUp_()}isRed_(){return this.color}fixUp_(){let n=this;return n.right.isRed_()&&!n.left.isRed_()&&(n=n.rotateLeft_()),n.left.isRed_()&&n.left.left.isRed_()&&(n=n.rotateRight_()),n.left.isRed_()&&n.right.isRed_()&&(n=n.colorFlip_()),n}moveRedLeft_(){let n=this.colorFlip_();return n.right.left.isRed_()&&(n=n.copy(null,null,null,null,n.right.rotateRight_()),n=n.rotateLeft_(),n=n.colorFlip_()),n}moveRedRight_(){let n=this.colorFlip_();return n.left.left.isRed_()&&(n=n.rotateRight_(),n=n.colorFlip_()),n}rotateLeft_(){let n=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight_(){let n=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip_(){let n=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,i)}checkMaxDepth_(){let n=this.check_();return Math.pow(2,n)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let n=this.left.check_();if(n!==this.right.check_())throw new Error("Black depths differ");return n+(this.isRed_()?0:1)}}return t.RED=!0,t.BLACK=!1,t})(),Ha=class{copy(e,n,i,s,r){return this}insert(e,n,i){return new ut(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},Je=class t{constructor(e,n=t.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,ut.BLACK,null,null))}remove(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,ut.BLACK,null,null))}get(e){let n,i=this.root_;for(;!i.isEmpty();){if(n=this.comparator_(e,i.key),n===0)return i.value;n<0?i=i.left:n>0&&(i=i.right)}return null}getPredecessorKey(e){let n,i=this.root_,s=null;for(;!i.isEmpty();)if(n=this.comparator_(e,i.key),n===0){if(i.left.isEmpty())return s?s.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}else n<0?i=i.left:n>0&&(s=i,i=i.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Yn(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Yn(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Yn(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Yn(this.root_,null,this.comparator_,!0,e)}};Je.EMPTY_NODE=new Ha;function Ey(t,e){return pn(t.name,e.name)}function Ul(t,e){return pn(t,e)}var $a;function Sy(t){$a=t}var Bp=function(t){return typeof t=="number"?"number:"+bp(t):"string:"+t},Vp=function(t){if(t.isLeafNode()){let e=t.val();_(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Ye(e,".sv"),"Priority must be a string or number.")}else _(t===$a||t.isEmpty(),"priority of unexpected type.");_(t===$a||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var Jh,Jn=(()=>{class t{constructor(n,i=t.__childrenNodeConstructor.EMPTY_NODE){this.value_=n,this.priorityNode_=i,this.lazyHash_=null,_(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),Vp(this.priorityNode_)}static set __childrenNodeConstructor(n){Jh=n}static get __childrenNodeConstructor(){return Jh}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(n){return new t(this.value_,n)}getImmediateChild(n){return n===".priority"?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}getChild(n){return A(n)?this:R(n)===".priority"?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(n,i){return null}updateImmediateChild(n,i){return n===".priority"?this.updatePriority(i):i.isEmpty()&&n!==".priority"?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(n,i).updatePriority(this.priorityNode_)}updateChild(n,i){let s=R(n);return s===null?i:i.isEmpty()&&s!==".priority"?this:(_(s!==".priority"||Xt(n)===1,".priority must be the last token in a path"),this.updateImmediateChild(s,t.__childrenNodeConstructor.EMPTY_NODE.updateChild($(n),i)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(n,i){return!1}val(n){return n&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let n="";this.priorityNode_.isEmpty()||(n+="priority:"+Bp(this.priorityNode_.val())+":");let i=typeof this.value_;n+=i+":",i==="number"?n+=bp(this.value_):n+=this.value_,this.lazyHash_=_p(n)}return this.lazyHash_}getValue(){return this.value_}compareTo(n){return n===t.__childrenNodeConstructor.EMPTY_NODE?1:n instanceof t.__childrenNodeConstructor?-1:(_(n.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(n))}compareToLeafNode_(n){let i=typeof n.value_,s=typeof this.value_,r=t.VALUE_TYPE_ORDER.indexOf(i),o=t.VALUE_TYPE_ORDER.indexOf(s);return _(r>=0,"Unknown leaf type: "+i),_(o>=0,"Unknown leaf type: "+s),r===o?s==="object"?0:this.value_<n.value_?-1:this.value_===n.value_?0:1:o-r}withIndex(){return this}isIndexed(){return!0}equals(n){if(n===this)return!0;if(n.isLeafNode()){let i=n;return this.value_===i.value_&&this.priorityNode_.equals(i.priorityNode_)}else return!1}}t.VALUE_TYPE_ORDER=["object","boolean","number","string"];return t})(),Up,Gp;function Iy(t){Up=t}function Dy(t){Gp=t}var ja=class extends Zn{compare(e,n){let i=e.node.getPriority(),s=n.node.getPriority(),r=i.compareTo(s);return r===0?pn(e.name,n.name):r}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return N.MIN}maxPost(){return new N(Lt,new Jn("[PRIORITY-POST]",Gp))}makePost(e,n){let i=Up(e);return new N(n,new Jn("[PRIORITY-POST]",i))}toString(){return".priority"}},K=new ja;var My=Math.log(2),Wa=class{constructor(e){let n=r=>parseInt(Math.log(r)/My,10),i=r=>parseInt(Array(r+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;let s=i(this.count);this.bits_=e+1&s}nextBitIsOne(){let e=!(this.bits_&1<<this.current_);return this.current_--,e}},rr=function(t,e,n,i){t.sort(e);let s=function(l,c){let d=c-l,u,h;if(d===0)return null;if(d===1)return u=t[l],h=n?n(u):u,new ut(h,u.node,ut.BLACK,null,null);{let f=parseInt(d/2,10)+l,w=s(l,f),S=s(f+1,c);return u=t[f],h=n?n(u):u,new ut(h,u.node,ut.BLACK,w,S)}},r=function(l){let c=null,d=null,u=t.length,h=function(w,S){let M=u-w,ce=u;u-=w;let Ce=s(M+1,ce),F=t[M],J=n?n(F):F;f(new ut(J,F.node,S,null,Ce))},f=function(w){c?(c.left=w,c=w):(d=w,c=w)};for(let w=0;w<l.count;++w){let S=l.nextBitIsOne(),M=Math.pow(2,l.count-(w+1));S?h(M,ut.BLACK):(h(M,ut.BLACK),h(M,ut.RED))}return d},o=new Wa(t.length),a=r(o);return new Je(i||e,a)};var Ia,Kn={},Xn=class t{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return _(Kn&&K,"ChildrenNode.ts has not been loaded"),Ia=Ia||new t({".priority":Kn},{".priority":K}),Ia}get(e){let n=$t(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof Je?n:null}hasIndex(e){return Ye(this.indexSet_,e.toString())}addIndex(e,n){_(e!==Dt,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let i=[],s=!1,r=n.getIterator(N.Wrap),o=r.getNext();for(;o;)s=s||e.isDefinedOn(o.node),i.push(o),o=r.getNext();let a;s?a=rr(i,e.getCompare()):a=Kn;let l=e.toString(),c=Object.assign({},this.indexSet_);c[l]=e;let d=Object.assign({},this.indexes_);return d[l]=a,new t(d,c)}addToIndexes(e,n){let i=Ci(this.indexes_,(s,r)=>{let o=$t(this.indexSet_,r);if(_(o,"Missing index implementation for "+r),s===Kn)if(o.isDefinedOn(e.node)){let a=[],l=n.getIterator(N.Wrap),c=l.getNext();for(;c;)c.name!==e.name&&a.push(c),c=l.getNext();return a.push(e),rr(a,o.getCompare())}else return Kn;else{let a=n.get(e.name),l=s;return a&&(l=l.remove(new N(e.name,a))),l.insert(e,e.node)}});return new t(i,this.indexSet_)}removeFromIndexes(e,n){let i=Ci(this.indexes_,s=>{if(s===Kn)return s;{let r=n.get(e.name);return r?s.remove(new N(e.name,r)):s}});return new t(i,this.indexSet_)}};var Pi,E=(()=>{class t{constructor(n,i,s){this.children_=n,this.priorityNode_=i,this.indexMap_=s,this.lazyHash_=null,this.priorityNode_&&Vp(this.priorityNode_),this.children_.isEmpty()&&_(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Pi||(Pi=new t(new Je(Ul),null,Xn.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Pi}updatePriority(n){return this.children_.isEmpty()?this:new t(this.children_,n,this.indexMap_)}getImmediateChild(n){if(n===".priority")return this.getPriority();{let i=this.children_.get(n);return i===null?Pi:i}}getChild(n){let i=R(n);return i===null?this:this.getImmediateChild(i).getChild($(n))}hasChild(n){return this.children_.get(n)!==null}updateImmediateChild(n,i){if(_(i,"We should always be passing snapshot nodes"),n===".priority")return this.updatePriority(i);{let s=new N(n,i),r,o;i.isEmpty()?(r=this.children_.remove(n),o=this.indexMap_.removeFromIndexes(s,this.children_)):(r=this.children_.insert(n,i),o=this.indexMap_.addToIndexes(s,this.children_));let a=r.isEmpty()?Pi:this.priorityNode_;return new t(r,a,o)}}updateChild(n,i){let s=R(n);if(s===null)return i;{_(R(n)!==".priority"||Xt(n)===1,".priority must be the last token in a path");let r=this.getImmediateChild(s).updateChild($(n),i);return this.updateImmediateChild(s,r)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(n){if(this.isEmpty())return null;let i={},s=0,r=0,o=!0;if(this.forEachChild(K,(a,l)=>{i[a]=l.val(n),s++,o&&t.INTEGER_REGEXP_.test(a)?r=Math.max(r,Number(a)):o=!1}),!n&&o&&r<2*s){let a=[];for(let l in i)a[l]=i[l];return a}else return n&&!this.getPriority().isEmpty()&&(i[".priority"]=this.getPriority().val()),i}hash(){if(this.lazyHash_===null){let n="";this.getPriority().isEmpty()||(n+="priority:"+Bp(this.getPriority().val())+":"),this.forEachChild(K,(i,s)=>{let r=s.hash();r!==""&&(n+=":"+i+":"+r)}),this.lazyHash_=n===""?"":_p(n)}return this.lazyHash_}getPredecessorChildName(n,i,s){let r=this.resolveIndex_(s);if(r){let o=r.getPredecessorKey(new N(n,i));return o?o.name:null}else return this.children_.getPredecessorKey(n)}getFirstChildName(n){let i=this.resolveIndex_(n);if(i){let s=i.minKey();return s&&s.name}else return this.children_.minKey()}getFirstChild(n){let i=this.getFirstChildName(n);return i?new N(i,this.children_.get(i)):null}getLastChildName(n){let i=this.resolveIndex_(n);if(i){let s=i.maxKey();return s&&s.name}else return this.children_.maxKey()}getLastChild(n){let i=this.getLastChildName(n);return i?new N(i,this.children_.get(i)):null}forEachChild(n,i){let s=this.resolveIndex_(n);return s?s.inorderTraversal(r=>i(r.name,r.node)):this.children_.inorderTraversal(i)}getIterator(n){return this.getIteratorFrom(n.minPost(),n)}getIteratorFrom(n,i){let s=this.resolveIndex_(i);if(s)return s.getIteratorFrom(n,r=>r);{let r=this.children_.getIteratorFrom(n.name,N.Wrap),o=r.peek();for(;o!=null&&i.compare(o,n)<0;)r.getNext(),o=r.peek();return r}}getReverseIterator(n){return this.getReverseIteratorFrom(n.maxPost(),n)}getReverseIteratorFrom(n,i){let s=this.resolveIndex_(i);if(s)return s.getReverseIteratorFrom(n,r=>r);{let r=this.children_.getReverseIteratorFrom(n.name,N.Wrap),o=r.peek();for(;o!=null&&i.compare(o,n)>0;)r.getNext(),o=r.peek();return r}}compareTo(n){return this.isEmpty()?n.isEmpty()?0:-1:n.isLeafNode()||n.isEmpty()?1:n===ss?-1:0}withIndex(n){if(n===Dt||this.indexMap_.hasIndex(n))return this;{let i=this.indexMap_.addIndex(n,this.children_);return new t(this.children_,this.priorityNode_,i)}}isIndexed(n){return n===Dt||this.indexMap_.hasIndex(n)}equals(n){if(n===this)return!0;if(n.isLeafNode())return!1;{let i=n;if(this.getPriority().equals(i.getPriority()))if(this.children_.count()===i.children_.count()){let s=this.getIterator(K),r=i.getIterator(K),o=s.getNext(),a=r.getNext();for(;o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=s.getNext(),a=r.getNext()}return o===null&&a===null}else return!1;else return!1}}resolveIndex_(n){return n===Dt?null:this.indexMap_.get(n.toString())}}return t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t})(),Ka=class extends E{constructor(){super(new Je(Ul),E.EMPTY_NODE,Xn.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return E.EMPTY_NODE}isEmpty(){return!1}},ss=new Ka;Object.defineProperties(N,{MIN:{value:new N(Jt,E.EMPTY_NODE)},MAX:{value:new N(Lt,ss)}});sr.__EMPTY_NODE=E.EMPTY_NODE;Jn.__childrenNodeConstructor=E;Sy(ss);Dy(ss);var ky=!0;function X(t,e=null){if(t===null)return E.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),_(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){let n=t;return new Jn(n,X(e))}if(!(t instanceof Array)&&ky){let n=[],i=!1;if(fe(t,(o,a)=>{if(o.substring(0,1)!=="."){let l=X(a);l.isEmpty()||(i=i||!l.getPriority().isEmpty(),n.push(new N(o,l)))}}),n.length===0)return E.EMPTY_NODE;let r=rr(n,Ey,o=>o.name,Ul);if(i){let o=rr(n,K.getCompare());return new E(r,X(e),new Xn({".priority":o},{".priority":K}))}else return new E(r,X(e),Xn.Default)}else{let n=E.EMPTY_NODE;return fe(t,(i,s)=>{if(Ye(t,i)&&i.substring(0,1)!=="."){let r=X(s);(r.isLeafNode()||!r.isEmpty())&&(n=n.updateImmediateChild(i,r))}}),n.updatePriority(X(e))}}Iy(X);var $i=class extends Zn{constructor(e){super(),this.indexPath_=e,_(!A(e)&&R(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){let i=this.extractChild(e.node),s=this.extractChild(n.node),r=i.compareTo(s);return r===0?pn(e.name,n.name):r}makePost(e,n){let i=X(e),s=E.EMPTY_NODE.updateChild(this.indexPath_,i);return new N(n,s)}maxPost(){let e=E.EMPTY_NODE.updateChild(this.indexPath_,ss);return new N(Lt,e)}toString(){return Hi(this.indexPath_,0).join("/")}};var qa=class extends Zn{compare(e,n){let i=e.node.compareTo(n.node);return i===0?pn(e.name,n.name):i}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return N.MIN}maxPost(){return N.MAX}makePost(e,n){let i=X(e);return new N(n,i)}toString(){return".value"}},Gl=new qa;function Hp(t){return{type:"value",snapshotNode:t}}function ei(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function ji(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function Wi(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function Oy(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}var Ki=class{constructor(e){this.index_=e}updateChild(e,n,i,s,r,o){_(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");let a=e.getImmediateChild(n);return a.getChild(s).equals(i.getChild(s))&&a.isEmpty()===i.isEmpty()||(o!=null&&(i.isEmpty()?e.hasChild(n)?o.trackChildChange(ji(n,a)):_(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(ei(n,i)):o.trackChildChange(Wi(n,i,a))),e.isLeafNode()&&i.isEmpty())?e:e.updateImmediateChild(n,i).withIndex(this.index_)}updateFullNode(e,n,i){return i!=null&&(e.isLeafNode()||e.forEachChild(K,(s,r)=>{n.hasChild(s)||i.trackChildChange(ji(s,r))}),n.isLeafNode()||n.forEachChild(K,(s,r)=>{if(e.hasChild(s)){let o=e.getImmediateChild(s);o.equals(r)||i.trackChildChange(Wi(s,r,o))}else i.trackChildChange(ei(s,r))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?E.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}};var or=class t{constructor(e){this.indexedFilter_=new Ki(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){let n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,i=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&i}updateChild(e,n,i,s,r,o){return this.matches(new N(n,i))||(i=E.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,i,s,r,o)}updateFullNode(e,n,i){n.isLeafNode()&&(n=E.EMPTY_NODE);let s=n.withIndex(this.index_);s=s.updatePriority(E.EMPTY_NODE);let r=this;return n.forEachChild(K,(o,a)=>{r.matches(new N(o,a))||(s=s.updateImmediateChild(o,E.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,s,i)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){let n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){let n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}};var Ya=class{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{let i=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?i<=0:i<0},this.withinEndPost=n=>{let i=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?i<=0:i<0},this.rangedFilter_=new or(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,i,s,r,o){return this.rangedFilter_.matches(new N(n,i))||(i=E.EMPTY_NODE),e.getImmediateChild(n).equals(i)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,i,s,r,o):this.fullLimitUpdateChild_(e,n,i,r,o)}updateFullNode(e,n,i){let s;if(n.isLeafNode()||n.isEmpty())s=E.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){s=E.EMPTY_NODE.withIndex(this.index_);let r;this.reverse_?r=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):r=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;r.hasNext()&&o<this.limit_;){let a=r.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))s=s.updateImmediateChild(a.name,a.node),o++;else break;else continue}}else{s=n.withIndex(this.index_),s=s.updatePriority(E.EMPTY_NODE);let r;this.reverse_?r=s.getReverseIterator(this.index_):r=s.getIterator(this.index_);let o=0;for(;r.hasNext();){let a=r.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:s=s.updateImmediateChild(a.name,E.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,s,i)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,i,s,r){let o;if(this.reverse_){let u=this.index_.getCompare();o=(h,f)=>u(f,h)}else o=this.index_.getCompare();let a=e;_(a.numChildren()===this.limit_,"");let l=new N(n,i),c=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),d=this.rangedFilter_.matches(l);if(a.hasChild(n)){let u=a.getImmediateChild(n),h=s.getChildAfterChild(this.index_,c,this.reverse_);for(;h!=null&&(h.name===n||a.hasChild(h.name));)h=s.getChildAfterChild(this.index_,h,this.reverse_);let f=h==null?1:o(h,l);if(d&&!i.isEmpty()&&f>=0)return r?.trackChildChange(Wi(n,i,u)),a.updateImmediateChild(n,i);{r?.trackChildChange(ji(n,u));let S=a.updateImmediateChild(n,E.EMPTY_NODE);return h!=null&&this.rangedFilter_.matches(h)?(r?.trackChildChange(ei(h.name,h.node)),S.updateImmediateChild(h.name,h.node)):S}}else return i.isEmpty()?e:d&&o(c,l)>=0?(r!=null&&(r.trackChildChange(ji(c.name,c.node)),r.trackChildChange(ei(n,i))),a.updateImmediateChild(n,i).updateImmediateChild(c.name,E.EMPTY_NODE)):e}};var qi=class t{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=K}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return _(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return _(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Jt}hasEnd(){return this.endSet_}getIndexEndValue(){return _(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return _(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Lt}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return _(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===K}copy(){let e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}};function Ry(t){return t.loadsAllData()?new Ki(t.getIndex()):t.hasLimit()?new Ya(t):new or(t)}function Ay(t,e){let n=t.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="l",n}function Ny(t,e){let n=t.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="r",n}function Qa(t,e,n){let i=t.copy();return i.startSet_=!0,e===void 0&&(e=null),i.indexStartValue_=e,n!=null?(i.startNameSet_=!0,i.indexStartName_=n):(i.startNameSet_=!1,i.indexStartName_=""),i}function xy(t,e,n){let i;return t.index_===Dt||n?i=Qa(t,e,n):i=Qa(t,e,Lt),i.startAfterSet_=!0,i}function Za(t,e,n){let i=t.copy();return i.endSet_=!0,e===void 0&&(e=null),i.indexEndValue_=e,n!==void 0?(i.endNameSet_=!0,i.indexEndName_=n):(i.endNameSet_=!1,i.indexEndName_=""),i}function Py(t,e,n){let i;return t.index_===Dt||n?i=Za(t,e,n):i=Za(t,e,Jt),i.endBeforeSet_=!0,i}function Sr(t,e){let n=t.copy();return n.index_=e,n}function Xh(t){let e={};if(t.isDefault())return e;let n;if(t.index_===K?n="$priority":t.index_===Gl?n="$value":t.index_===Dt?n="$key":(_(t.index_ instanceof $i,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=re(n),t.startSet_){let i=t.startAfterSet_?"startAfter":"startAt";e[i]=re(t.indexStartValue_),t.startNameSet_&&(e[i]+=","+re(t.indexStartName_))}if(t.endSet_){let i=t.endBeforeSet_?"endBefore":"endAt";e[i]=re(t.indexEndValue_),t.endNameSet_&&(e[i]+=","+re(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function ep(t){let e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==K&&(e.i=t.index_.toString()),e}var Ja=class t extends tr{constructor(e,n,i,s){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=i,this.appCheckTokenProvider_=s,this.log_=is("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(_(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,i,s){let r=e._path.toString();this.log_("Listen called for "+r+" "+e._queryIdentifier);let o=t.getListenId_(e,i),a={};this.listens_[o]=a;let l=Xh(e._queryParams);this.restRequest_(r+".json",l,(c,d)=>{let u=d;if(c===404&&(u=null,c=null),c===null&&this.onDataUpdate_(r,u,!1,i),$t(this.listens_,o)===a){let h;c?c===401?h="permission_denied":h="rest_error:"+c:h="ok",s(h,null)}})}unlisten(e,n){let i=t.getListenId_(e,n);delete this.listens_[i]}get(e){let n=Xh(e._queryParams),i=e._path.toString(),s=new he;return this.restRequest_(i+".json",n,(r,o)=>{let a=o;r===404&&(a=null,r=null),r===null?(this.onDataUpdate_(i,a,!1,null),s.resolve(a)):s.reject(new Error(a))}),s.promise}refreshAuthToken(e){}restRequest_(e,n={},i){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([s,r])=>{s&&s.accessToken&&(n.auth=s.accessToken),r&&r.token&&(n.ac=r.token);let o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Nd(n);this.log_("Sending REST request for "+o);let a=new XMLHttpRequest;a.onreadystatechange=()=>{if(i&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=Ds(a.responseText)}catch{we("Failed to parse JSON response for "+o+": "+a.responseText)}i(null,l)}else a.status!==401&&a.status!==404&&we("Got unsuccessful REST response for "+o+" Status: "+a.status),i(a.status);i=null}},a.open("GET",o,!0),a.send()})}};var Xa=class{constructor(){this.rootNode_=E.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}};function ar(){return{value:null,children:new Map}}function oi(t,e,n){if(A(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{let i=R(e);t.children.has(i)||t.children.set(i,ar());let s=t.children.get(i);e=$(e),oi(s,e,n)}}function el(t,e){if(A(e))return t.value=null,t.children.clear(),!0;if(t.value!==null){if(t.value.isLeafNode())return!1;{let n=t.value;return t.value=null,n.forEachChild(K,(i,s)=>{oi(t,new B(i),s)}),el(t,e)}}else if(t.children.size>0){let n=R(e);return e=$(e),t.children.has(n)&&el(t.children.get(n),e)&&t.children.delete(n),t.children.size===0}else return!0}function tl(t,e,n){t.value!==null?n(e,t.value):Fy(t,(i,s)=>{let r=new B(e.toString()+"/"+i);tl(s,r,n)})}function Fy(t,e){t.children.forEach((n,i)=>{e(i,n)})}var nl=class{constructor(e){this.collection_=e,this.last_=null}get(){let e=this.collection_.get(),n=Object.assign({},e);return this.last_&&fe(this.last_,(i,s)=>{n[i]=n[i]-s}),this.last_=e,n}};var tp=10*1e3,zy=30*1e3,Ly=5*60*1e3,il=class{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new nl(e);let i=tp+(zy-tp)*Math.random();zi(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){let e=this.statsListener_.get(),n={},i=!1;fe(e,(s,r)=>{r>0&&Ye(this.statsToReport_,s)&&(n[s]=r,i=!0)}),i&&this.server_.reportStats(n),zi(this.reportStats_.bind(this),Math.floor(Math.random()*2*Ly))}};var It=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}(It||{});function Hl(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function $l(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function jl(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}var sl=class t{constructor(e,n,i){this.path=e,this.affectedTree=n,this.revert=i,this.type=It.ACK_USER_WRITE,this.source=Hl()}operationForChild(e){if(A(this.path)){if(this.affectedTree.value!=null)return _(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let n=this.affectedTree.subtree(new B(e));return new t(L(),n,this.revert)}}else return _(R(this.path)===e,"operationForChild called for unrelated child."),new t($(this.path),this.affectedTree,this.revert)}};var lr=class t{constructor(e,n){this.source=e,this.path=n,this.type=It.LISTEN_COMPLETE}operationForChild(e){return A(this.path)?new t(this.source,L()):new t(this.source,$(this.path))}};var ti=class t{constructor(e,n,i){this.source=e,this.path=n,this.snap=i,this.type=It.OVERWRITE}operationForChild(e){return A(this.path)?new t(this.source,L(),this.snap.getImmediateChild(e)):new t(this.source,$(this.path),this.snap)}};var Yi=class t{constructor(e,n,i){this.source=e,this.path=n,this.children=i,this.type=It.MERGE}operationForChild(e){if(A(this.path)){let n=this.children.subtree(new B(e));return n.isEmpty()?null:n.value?new ti(this.source,L(),n.value):new t(this.source,L(),n)}else return _(R(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,$(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var kt=class{constructor(e,n,i){this.node_=e,this.fullyInitialized_=n,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(A(e))return this.isFullyInitialized()&&!this.filtered_;let n=R(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}};var rl=class{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}};function By(t,e,n,i){let s=[],r=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&r.push(Oy(o.childName,o.snapshotNode))}),Fi(t,s,"child_removed",e,i,n),Fi(t,s,"child_added",e,i,n),Fi(t,s,"child_moved",r,i,n),Fi(t,s,"child_changed",e,i,n),Fi(t,s,"value",e,i,n),s}function Fi(t,e,n,i,s,r){let o=i.filter(a=>a.type===n);o.sort((a,l)=>Uy(t,a,l)),o.forEach(a=>{let l=Vy(t,a,r);s.forEach(c=>{c.respondsTo(a.type)&&e.push(c.createEvent(l,t.query_))})})}function Vy(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function Uy(t,e,n){if(e.childName==null||n.childName==null)throw zn("Should only compare child_ events.");let i=new N(e.childName,e.snapshotNode),s=new N(n.childName,n.snapshotNode);return t.index_.compare(i,s)}function Ir(t,e){return{eventCache:t,serverCache:e}}function Bi(t,e,n,i){return Ir(new kt(e,n,i),t.serverCache)}function $p(t,e,n,i){return Ir(t.eventCache,new kt(e,n,i))}function cr(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function hn(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}var Da,Gy=()=>(Da||(Da=new Je(V1)),Da),Re=class t{constructor(e,n=Gy()){this.value=e,this.children=n}static fromObject(e){let n=new t(null);return fe(e,(i,s)=>{n=n.set(new B(i),s)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:L(),value:this.value};if(A(e))return null;{let i=R(e),s=this.children.get(i);if(s!==null){let r=s.findRootMostMatchingPathAndValue($(e),n);return r!=null?{path:Z(new B(i),r.path),value:r.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(A(e))return this;{let n=R(e),i=this.children.get(n);return i!==null?i.subtree($(e)):new t(null)}}set(e,n){if(A(e))return new t(n,this.children);{let i=R(e),r=(this.children.get(i)||new t(null)).set($(e),n),o=this.children.insert(i,r);return new t(this.value,o)}}remove(e){if(A(e))return this.children.isEmpty()?new t(null):new t(null,this.children);{let n=R(e),i=this.children.get(n);if(i){let s=i.remove($(e)),r;return s.isEmpty()?r=this.children.remove(n):r=this.children.insert(n,s),this.value===null&&r.isEmpty()?new t(null):new t(this.value,r)}else return this}}get(e){if(A(e))return this.value;{let n=R(e),i=this.children.get(n);return i?i.get($(e)):null}}setTree(e,n){if(A(e))return n;{let i=R(e),r=(this.children.get(i)||new t(null)).setTree($(e),n),o;return r.isEmpty()?o=this.children.remove(i):o=this.children.insert(i,r),new t(this.value,o)}}fold(e){return this.fold_(L(),e)}fold_(e,n){let i={};return this.children.inorderTraversal((s,r)=>{i[s]=r.fold_(Z(e,s),n)}),n(e,this.value,i)}findOnPath(e,n){return this.findOnPath_(e,L(),n)}findOnPath_(e,n,i){let s=this.value?i(n,this.value):!1;if(s)return s;if(A(e))return null;{let r=R(e),o=this.children.get(r);return o?o.findOnPath_($(e),Z(n,r),i):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,L(),n)}foreachOnPath_(e,n,i){if(A(e))return this;{this.value&&i(n,this.value);let s=R(e),r=this.children.get(s);return r?r.foreachOnPath_($(e),Z(n,s),i):new t(null)}}foreach(e){this.foreach_(L(),e)}foreach_(e,n){this.children.inorderTraversal((i,s)=>{s.foreach_(Z(e,i),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,i)=>{i.value&&e(n,i.value)})}};var ht=class t{constructor(e){this.writeTree_=e}static empty(){return new t(new Re(null))}};function Vi(t,e,n){if(A(e))return new ht(new Re(n));{let i=t.writeTree_.findRootMostValueAndPath(e);if(i!=null){let s=i.path,r=i.value,o=Oe(s,e);return r=r.updateChild(o,n),new ht(t.writeTree_.set(s,r))}else{let s=new Re(n),r=t.writeTree_.setTree(e,s);return new ht(r)}}}function ol(t,e,n){let i=t;return fe(n,(s,r)=>{i=Vi(i,Z(e,s),r)}),i}function np(t,e){if(A(e))return ht.empty();{let n=t.writeTree_.setTree(e,new Re(null));return new ht(n)}}function al(t,e){return fn(t,e)!=null}function fn(t,e){let n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(Oe(n.path,e)):null}function ip(t){let e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(K,(i,s)=>{e.push(new N(i,s))}):t.writeTree_.children.inorderTraversal((i,s)=>{s.value!=null&&e.push(new N(i,s.value))}),e}function Qt(t,e){if(A(e))return t;{let n=fn(t,e);return n!=null?new ht(new Re(n)):new ht(t.writeTree_.subtree(e))}}function ll(t){return t.writeTree_.isEmpty()}function ni(t,e){return jp(L(),t.writeTree_,e)}function jp(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let i=null;return e.children.inorderTraversal((s,r)=>{s===".priority"?(_(r.value!==null,"Priority writes must always be leaf nodes"),i=r.value):n=jp(Z(t,s),r,n)}),!n.getChild(t).isEmpty()&&i!==null&&(n=n.updateChild(Z(t,".priority"),i)),n}}function Dr(t,e){return Yp(e,t)}function Hy(t,e,n,i,s){_(i>t.lastWriteId,"Stacking an older write on top of newer ones"),s===void 0&&(s=!0),t.allWrites.push({path:e,snap:n,writeId:i,visible:s}),s&&(t.visibleWrites=Vi(t.visibleWrites,e,n)),t.lastWriteId=i}function $y(t,e,n,i){_(i>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:i,visible:!0}),t.visibleWrites=ol(t.visibleWrites,e,n),t.lastWriteId=i}function jy(t,e){for(let n=0;n<t.allWrites.length;n++){let i=t.allWrites[n];if(i.writeId===e)return i}return null}function Wy(t,e){let n=t.allWrites.findIndex(a=>a.writeId===e);_(n>=0,"removeWrite called with nonexistent writeId.");let i=t.allWrites[n];t.allWrites.splice(n,1);let s=i.visible,r=!1,o=t.allWrites.length-1;for(;s&&o>=0;){let a=t.allWrites[o];a.visible&&(o>=n&&Ky(a,i.path)?s=!1:Ze(i.path,a.path)&&(r=!0)),o--}if(s){if(r)return qy(t),!0;if(i.snap)t.visibleWrites=np(t.visibleWrites,i.path);else{let a=i.children;fe(a,l=>{t.visibleWrites=np(t.visibleWrites,Z(i.path,l))})}return!0}else return!1}function Ky(t,e){if(t.snap)return Ze(t.path,e);for(let n in t.children)if(t.children.hasOwnProperty(n)&&Ze(Z(t.path,n),e))return!0;return!1}function qy(t){t.visibleWrites=Wp(t.allWrites,Yy,L()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function Yy(t){return t.visible}function Wp(t,e,n){let i=ht.empty();for(let s=0;s<t.length;++s){let r=t[s];if(e(r)){let o=r.path,a;if(r.snap)Ze(n,o)?(a=Oe(n,o),i=Vi(i,a,r.snap)):Ze(o,n)&&(a=Oe(o,n),i=Vi(i,L(),r.snap.getChild(a)));else if(r.children){if(Ze(n,o))a=Oe(n,o),i=ol(i,a,r.children);else if(Ze(o,n))if(a=Oe(o,n),A(a))i=ol(i,L(),r.children);else{let l=$t(r.children,R(a));if(l){let c=l.getChild($(a));i=Vi(i,L(),c)}}}else throw zn("WriteRecord should have .snap or .children")}}return i}function Kp(t,e,n,i,s){if(!i&&!s){let r=fn(t.visibleWrites,e);if(r!=null)return r;{let o=Qt(t.visibleWrites,e);if(ll(o))return n;if(n==null&&!al(o,L()))return null;{let a=n||E.EMPTY_NODE;return ni(o,a)}}}else{let r=Qt(t.visibleWrites,e);if(!s&&ll(r))return n;if(!s&&n==null&&!al(r,L()))return null;{let o=function(c){return(c.visible||s)&&(!i||!~i.indexOf(c.writeId))&&(Ze(c.path,e)||Ze(e,c.path))},a=Wp(t.allWrites,o,e),l=n||E.EMPTY_NODE;return ni(a,l)}}}function Qy(t,e,n){let i=E.EMPTY_NODE,s=fn(t.visibleWrites,e);if(s)return s.isLeafNode()||s.forEachChild(K,(r,o)=>{i=i.updateImmediateChild(r,o)}),i;if(n){let r=Qt(t.visibleWrites,e);return n.forEachChild(K,(o,a)=>{let l=ni(Qt(r,new B(o)),a);i=i.updateImmediateChild(o,l)}),ip(r).forEach(o=>{i=i.updateImmediateChild(o.name,o.node)}),i}else{let r=Qt(t.visibleWrites,e);return ip(r).forEach(o=>{i=i.updateImmediateChild(o.name,o.node)}),i}}function Zy(t,e,n,i,s){_(i||s,"Either existingEventSnap or existingServerSnap must exist");let r=Z(e,n);if(al(t.visibleWrites,r))return null;{let o=Qt(t.visibleWrites,r);return ll(o)?s.getChild(n):ni(o,s.getChild(n))}}function Jy(t,e,n,i){let s=Z(e,n),r=fn(t.visibleWrites,s);if(r!=null)return r;if(i.isCompleteForChild(n)){let o=Qt(t.visibleWrites,s);return ni(o,i.getNode().getImmediateChild(n))}else return null}function Xy(t,e){return fn(t.visibleWrites,e)}function ev(t,e,n,i,s,r,o){let a,l=Qt(t.visibleWrites,e),c=fn(l,L());if(c!=null)a=c;else if(n!=null)a=ni(l,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){let d=[],u=o.getCompare(),h=r?a.getReverseIteratorFrom(i,o):a.getIteratorFrom(i,o),f=h.getNext();for(;f&&d.length<s;)u(f,i)!==0&&d.push(f),f=h.getNext();return d}else return[]}function tv(){return{visibleWrites:ht.empty(),allWrites:[],lastWriteId:-1}}function dr(t,e,n,i){return Kp(t.writeTree,t.treePath,e,n,i)}function Wl(t,e){return Qy(t.writeTree,t.treePath,e)}function sp(t,e,n,i){return Zy(t.writeTree,t.treePath,e,n,i)}function ur(t,e){return Xy(t.writeTree,Z(t.treePath,e))}function nv(t,e,n,i,s,r){return ev(t.writeTree,t.treePath,e,n,i,s,r)}function Kl(t,e,n){return Jy(t.writeTree,t.treePath,e,n)}function qp(t,e){return Yp(Z(t.treePath,e),t.writeTree)}function Yp(t,e){return{treePath:t,writeTree:e}}var cl=class{constructor(){this.changeMap=new Map}trackChildChange(e){let n=e.type,i=e.childName;_(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),_(i!==".priority","Only non-priority child changes can be tracked.");let s=this.changeMap.get(i);if(s){let r=s.type;if(n==="child_added"&&r==="child_removed")this.changeMap.set(i,Wi(i,e.snapshotNode,s.snapshotNode));else if(n==="child_removed"&&r==="child_added")this.changeMap.delete(i);else if(n==="child_removed"&&r==="child_changed")this.changeMap.set(i,ji(i,s.oldSnap));else if(n==="child_changed"&&r==="child_added")this.changeMap.set(i,ei(i,e.snapshotNode));else if(n==="child_changed"&&r==="child_changed")this.changeMap.set(i,Wi(i,e.snapshotNode,s.oldSnap));else throw zn("Illegal combination of changes: "+e+" occurred after "+s)}else this.changeMap.set(i,e)}getChanges(){return Array.from(this.changeMap.values())}};var dl=class{getCompleteChild(e){return null}getChildAfterChild(e,n,i){return null}},Qp=new dl,Qi=class{constructor(e,n,i=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=i}getCompleteChild(e){let n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{let i=this.optCompleteServerCache_!=null?new kt(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Kl(this.writes_,e,i)}}getChildAfterChild(e,n,i){let s=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:hn(this.viewCache_),r=nv(this.writes_,s,n,1,i,e);return r.length===0?null:r[0]}};function iv(t){return{filter:t}}function sv(t,e){_(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),_(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function rv(t,e,n,i,s){let r=new cl,o,a;if(n.type===It.OVERWRITE){let c=n;c.source.fromUser?o=ul(t,e,c.path,c.snap,i,s,r):(_(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!A(c.path),o=hr(t,e,c.path,c.snap,i,s,a,r))}else if(n.type===It.MERGE){let c=n;c.source.fromUser?o=av(t,e,c.path,c.children,i,s,r):(_(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered(),o=hl(t,e,c.path,c.children,i,s,a,r))}else if(n.type===It.ACK_USER_WRITE){let c=n;c.revert?o=dv(t,e,c.path,i,s,r):o=lv(t,e,c.path,c.affectedTree,i,s,r)}else if(n.type===It.LISTEN_COMPLETE)o=cv(t,e,n.path,i,r);else throw zn("Unknown operation type: "+n.type);let l=r.getChanges();return ov(e,o,l),{viewCache:o,changes:l}}function ov(t,e,n){let i=e.eventCache;if(i.isFullyInitialized()){let s=i.getNode().isLeafNode()||i.getNode().isEmpty(),r=cr(t);(n.length>0||!t.eventCache.isFullyInitialized()||s&&!i.getNode().equals(r)||!i.getNode().getPriority().equals(r.getPriority()))&&n.push(Hp(cr(e)))}}function Zp(t,e,n,i,s,r){let o=e.eventCache;if(ur(i,n)!=null)return e;{let a,l;if(A(n))if(_(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){let c=hn(e),d=c instanceof E?c:E.EMPTY_NODE,u=Wl(i,d);a=t.filter.updateFullNode(e.eventCache.getNode(),u,r)}else{let c=dr(i,hn(e));a=t.filter.updateFullNode(e.eventCache.getNode(),c,r)}else{let c=R(n);if(c===".priority"){_(Xt(n)===1,"Can't have a priority with additional path components");let d=o.getNode();l=e.serverCache.getNode();let u=sp(i,n,d,l);u!=null?a=t.filter.updatePriority(d,u):a=o.getNode()}else{let d=$(n),u;if(o.isCompleteForChild(c)){l=e.serverCache.getNode();let h=sp(i,n,o.getNode(),l);h!=null?u=o.getNode().getImmediateChild(c).updateChild(d,h):u=o.getNode().getImmediateChild(c)}else u=Kl(i,c,e.serverCache);u!=null?a=t.filter.updateChild(o.getNode(),c,u,d,s,r):a=o.getNode()}}return Bi(e,a,o.isFullyInitialized()||A(n),t.filter.filtersNodes())}}function hr(t,e,n,i,s,r,o,a){let l=e.serverCache,c,d=o?t.filter:t.filter.getIndexedFilter();if(A(n))c=d.updateFullNode(l.getNode(),i,null);else if(d.filtersNodes()&&!l.isFiltered()){let f=l.getNode().updateChild(n,i);c=d.updateFullNode(l.getNode(),f,null)}else{let f=R(n);if(!l.isCompleteForPath(n)&&Xt(n)>1)return e;let w=$(n),M=l.getNode().getImmediateChild(f).updateChild(w,i);f===".priority"?c=d.updatePriority(l.getNode(),M):c=d.updateChild(l.getNode(),f,M,w,Qp,null)}let u=$p(e,c,l.isFullyInitialized()||A(n),d.filtersNodes()),h=new Qi(s,u,r);return Zp(t,u,n,s,h,a)}function ul(t,e,n,i,s,r,o){let a=e.eventCache,l,c,d=new Qi(s,e,r);if(A(n))c=t.filter.updateFullNode(e.eventCache.getNode(),i,o),l=Bi(e,c,!0,t.filter.filtersNodes());else{let u=R(n);if(u===".priority")c=t.filter.updatePriority(e.eventCache.getNode(),i),l=Bi(e,c,a.isFullyInitialized(),a.isFiltered());else{let h=$(n),f=a.getNode().getImmediateChild(u),w;if(A(h))w=i;else{let S=d.getCompleteChild(u);S!=null?Ll(h)===".priority"&&S.getChild(zp(h)).isEmpty()?w=S:w=S.updateChild(h,i):w=E.EMPTY_NODE}if(f.equals(w))l=e;else{let S=t.filter.updateChild(a.getNode(),u,w,h,d,o);l=Bi(e,S,a.isFullyInitialized(),t.filter.filtersNodes())}}}return l}function rp(t,e){return t.eventCache.isCompleteForChild(e)}function av(t,e,n,i,s,r,o){let a=e;return i.foreach((l,c)=>{let d=Z(n,l);rp(e,R(d))&&(a=ul(t,a,d,c,s,r,o))}),i.foreach((l,c)=>{let d=Z(n,l);rp(e,R(d))||(a=ul(t,a,d,c,s,r,o))}),a}function op(t,e,n){return n.foreach((i,s)=>{e=e.updateChild(i,s)}),e}function hl(t,e,n,i,s,r,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let l=e,c;A(n)?c=i:c=new Re(null).setTree(n,i);let d=e.serverCache.getNode();return c.children.inorderTraversal((u,h)=>{if(d.hasChild(u)){let f=e.serverCache.getNode().getImmediateChild(u),w=op(t,f,h);l=hr(t,l,new B(u),w,s,r,o,a)}}),c.children.inorderTraversal((u,h)=>{let f=!e.serverCache.isCompleteForChild(u)&&h.value===null;if(!d.hasChild(u)&&!f){let w=e.serverCache.getNode().getImmediateChild(u),S=op(t,w,h);l=hr(t,l,new B(u),S,s,r,o,a)}}),l}function lv(t,e,n,i,s,r,o){if(ur(s,n)!=null)return e;let a=e.serverCache.isFiltered(),l=e.serverCache;if(i.value!=null){if(A(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return hr(t,e,n,l.getNode().getChild(n),s,r,a,o);if(A(n)){let c=new Re(null);return l.getNode().forEachChild(Dt,(d,u)=>{c=c.set(new B(d),u)}),hl(t,e,n,c,s,r,a,o)}else return e}else{let c=new Re(null);return i.foreach((d,u)=>{let h=Z(n,d);l.isCompleteForPath(h)&&(c=c.set(d,l.getNode().getChild(h)))}),hl(t,e,n,c,s,r,a,o)}}function cv(t,e,n,i,s){let r=e.serverCache,o=$p(e,r.getNode(),r.isFullyInitialized()||A(n),r.isFiltered());return Zp(t,o,n,i,Qp,s)}function dv(t,e,n,i,s,r){let o;if(ur(i,n)!=null)return e;{let a=new Qi(i,e,s),l=e.eventCache.getNode(),c;if(A(n)||R(n)===".priority"){let d;if(e.serverCache.isFullyInitialized())d=dr(i,hn(e));else{let u=e.serverCache.getNode();_(u instanceof E,"serverChildren would be complete if leaf node"),d=Wl(i,u)}d=d,c=t.filter.updateFullNode(l,d,r)}else{let d=R(n),u=Kl(i,d,e.serverCache);u==null&&e.serverCache.isCompleteForChild(d)&&(u=l.getImmediateChild(d)),u!=null?c=t.filter.updateChild(l,d,u,$(n),a,r):e.eventCache.getNode().hasChild(d)?c=t.filter.updateChild(l,d,E.EMPTY_NODE,$(n),a,r):c=l,c.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=dr(i,hn(e)),o.isLeafNode()&&(c=t.filter.updateFullNode(c,o,r)))}return o=e.serverCache.isFullyInitialized()||ur(i,L())!=null,Bi(e,c,o,t.filter.filtersNodes())}}var pl=class{constructor(e,n){this.query_=e,this.eventRegistrations_=[];let i=this.query_._queryParams,s=new Ki(i.getIndex()),r=Ry(i);this.processor_=iv(r);let o=n.serverCache,a=n.eventCache,l=s.updateFullNode(E.EMPTY_NODE,o.getNode(),null),c=r.updateFullNode(E.EMPTY_NODE,a.getNode(),null),d=new kt(l,o.isFullyInitialized(),s.filtersNodes()),u=new kt(c,a.isFullyInitialized(),r.filtersNodes());this.viewCache_=Ir(u,d),this.eventGenerator_=new rl(this.query_)}get query(){return this.query_}};function uv(t){return t.viewCache_.serverCache.getNode()}function hv(t){return cr(t.viewCache_)}function pv(t,e){let n=hn(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!A(e)&&!n.getImmediateChild(R(e)).isEmpty())?n.getChild(e):null}function ap(t){return t.eventRegistrations_.length===0}function fv(t,e){t.eventRegistrations_.push(e)}function lp(t,e,n){let i=[];if(n){_(e==null,"A cancel should cancel all event registrations.");let s=t.query._path;t.eventRegistrations_.forEach(r=>{let o=r.createCancelEvent(n,s);o&&i.push(o)})}if(e){let s=[];for(let r=0;r<t.eventRegistrations_.length;++r){let o=t.eventRegistrations_[r];if(!o.matches(e))s.push(o);else if(e.hasAnyCallback()){s=s.concat(t.eventRegistrations_.slice(r+1));break}}t.eventRegistrations_=s}else t.eventRegistrations_=[];return i}function cp(t,e,n,i){e.type===It.MERGE&&e.source.queryId!==null&&(_(hn(t.viewCache_),"We should always have a full cache before handling merges"),_(cr(t.viewCache_),"Missing event cache, even though we have a server cache"));let s=t.viewCache_,r=rv(t.processor_,s,e,n,i);return sv(t.processor_,r.viewCache),_(r.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=r.viewCache,Jp(t,r.changes,r.viewCache.eventCache.getNode(),null)}function gv(t,e){let n=t.viewCache_.eventCache,i=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(K,(r,o)=>{i.push(ei(r,o))}),n.isFullyInitialized()&&i.push(Hp(n.getNode())),Jp(t,i,n.getNode(),e)}function Jp(t,e,n,i){let s=i?[i]:t.eventRegistrations_;return By(t.eventGenerator_,e,n,s)}var pr,fr=class{constructor(){this.views=new Map}};function mv(t){_(!pr,"__referenceConstructor has already been defined"),pr=t}function _v(){return _(pr,"Reference.ts has not been loaded"),pr}function yv(t){return t.views.size===0}function ql(t,e,n,i){let s=e.source.queryId;if(s!==null){let r=t.views.get(s);return _(r!=null,"SyncTree gave us an op for an invalid query."),cp(r,e,n,i)}else{let r=[];for(let o of t.views.values())r=r.concat(cp(o,e,n,i));return r}}function Xp(t,e,n,i,s){let r=e._queryIdentifier,o=t.views.get(r);if(!o){let a=dr(n,s?i:null),l=!1;a?l=!0:i instanceof E?(a=Wl(n,i),l=!1):(a=E.EMPTY_NODE,l=!1);let c=Ir(new kt(a,l,!1),new kt(i,s,!1));return new pl(e,c)}return o}function vv(t,e,n,i,s,r){let o=Xp(t,e,i,s,r);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),fv(o,n),gv(o,n)}function bv(t,e,n,i){let s=e._queryIdentifier,r=[],o=[],a=en(t);if(s==="default")for(let[l,c]of t.views.entries())o=o.concat(lp(c,n,i)),ap(c)&&(t.views.delete(l),c.query._queryParams.loadsAllData()||r.push(c.query));else{let l=t.views.get(s);l&&(o=o.concat(lp(l,n,i)),ap(l)&&(t.views.delete(s),l.query._queryParams.loadsAllData()||r.push(l.query)))}return a&&!en(t)&&r.push(new(_v())(e._repo,e._path)),{removed:r,events:o}}function ef(t){let e=[];for(let n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function Zt(t,e){let n=null;for(let i of t.views.values())n=n||pv(i,e);return n}function tf(t,e){if(e._queryParams.loadsAllData())return Mr(t);{let i=e._queryIdentifier;return t.views.get(i)}}function nf(t,e){return tf(t,e)!=null}function en(t){return Mr(t)!=null}function Mr(t){for(let e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}var gr;function wv(t){_(!gr,"__referenceConstructor has already been defined"),gr=t}function Cv(){return _(gr,"Reference.ts has not been loaded"),gr}var Tv=1,mr=class{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Re(null),this.pendingWriteTree_=tv(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function Yl(t,e,n,i,s){return Hy(t.pendingWriteTree_,e,n,i,s),s?ai(t,new ti(Hl(),e,n)):[]}function Ev(t,e,n,i){$y(t.pendingWriteTree_,e,n,i);let s=Re.fromObject(n);return ai(t,new Yi(Hl(),e,s))}function Yt(t,e,n=!1){let i=jy(t.pendingWriteTree_,e);if(Wy(t.pendingWriteTree_,e)){let r=new Re(null);return i.snap!=null?r=r.set(L(),!0):fe(i.children,o=>{r=r.set(new B(o),!0)}),ai(t,new sl(i.path,r,n))}else return[]}function rs(t,e,n){return ai(t,new ti($l(),e,n))}function Sv(t,e,n){let i=Re.fromObject(n);return ai(t,new Yi($l(),e,i))}function Iv(t,e){return ai(t,new lr($l(),e))}function Dv(t,e,n){let i=Ql(t,n);if(i){let s=Zl(i),r=s.path,o=s.queryId,a=Oe(r,e),l=new lr(jl(o),a);return Jl(t,r,l)}else return[]}function _r(t,e,n,i,s=!1){let r=e._path,o=t.syncPointTree_.get(r),a=[];if(o&&(e._queryIdentifier==="default"||nf(o,e))){let l=bv(o,e,n,i);yv(o)&&(t.syncPointTree_=t.syncPointTree_.remove(r));let c=l.removed;if(a=l.events,!s){let d=c.findIndex(h=>h._queryParams.loadsAllData())!==-1,u=t.syncPointTree_.findOnPath(r,(h,f)=>en(f));if(d&&!u){let h=t.syncPointTree_.subtree(r);if(!h.isEmpty()){let f=Ov(h);for(let w=0;w<f.length;++w){let S=f[w],M=S.query,ce=af(t,S);t.listenProvider_.startListening(Ui(M),Zi(t,M),ce.hashFn,ce.onComplete)}}}!u&&c.length>0&&!i&&(d?t.listenProvider_.stopListening(Ui(e),null):c.forEach(h=>{let f=t.queryToTagMap.get(Or(h));t.listenProvider_.stopListening(Ui(h),f)}))}Rv(t,c)}return a}function sf(t,e,n,i){let s=Ql(t,i);if(s!=null){let r=Zl(s),o=r.path,a=r.queryId,l=Oe(o,e),c=new ti(jl(a),l,n);return Jl(t,o,c)}else return[]}function Mv(t,e,n,i){let s=Ql(t,i);if(s){let r=Zl(s),o=r.path,a=r.queryId,l=Oe(o,e),c=Re.fromObject(n),d=new Yi(jl(a),l,c);return Jl(t,o,d)}else return[]}function fl(t,e,n,i=!1){let s=e._path,r=null,o=!1;t.syncPointTree_.foreachOnPath(s,(h,f)=>{let w=Oe(h,s);r=r||Zt(f,w),o=o||en(f)});let a=t.syncPointTree_.get(s);a?(o=o||en(a),r=r||Zt(a,L())):(a=new fr,t.syncPointTree_=t.syncPointTree_.set(s,a));let l;r!=null?l=!0:(l=!1,r=E.EMPTY_NODE,t.syncPointTree_.subtree(s).foreachChild((f,w)=>{let S=Zt(w,L());S&&(r=r.updateImmediateChild(f,S))}));let c=nf(a,e);if(!c&&!e._queryParams.loadsAllData()){let h=Or(e);_(!t.queryToTagMap.has(h),"View does not exist, but we have a tag");let f=Av();t.queryToTagMap.set(h,f),t.tagToQueryMap.set(f,h)}let d=Dr(t.pendingWriteTree_,s),u=vv(a,e,n,d,r,l);if(!c&&!o&&!i){let h=tf(a,e);u=u.concat(Nv(t,e,h))}return u}function kr(t,e,n){let s=t.pendingWriteTree_,r=t.syncPointTree_.findOnPath(e,(o,a)=>{let l=Oe(o,e),c=Zt(a,l);if(c)return c});return Kp(s,e,r,n,!0)}function kv(t,e){let n=e._path,i=null;t.syncPointTree_.foreachOnPath(n,(c,d)=>{let u=Oe(c,n);i=i||Zt(d,u)});let s=t.syncPointTree_.get(n);s?i=i||Zt(s,L()):(s=new fr,t.syncPointTree_=t.syncPointTree_.set(n,s));let r=i!=null,o=r?new kt(i,!0,!1):null,a=Dr(t.pendingWriteTree_,e._path),l=Xp(s,e,a,r?o.getNode():E.EMPTY_NODE,r);return hv(l)}function ai(t,e){return rf(e,t.syncPointTree_,null,Dr(t.pendingWriteTree_,L()))}function rf(t,e,n,i){if(A(t.path))return of(t,e,n,i);{let s=e.get(L());n==null&&s!=null&&(n=Zt(s,L()));let r=[],o=R(t.path),a=t.operationForChild(o),l=e.children.get(o);if(l&&a){let c=n?n.getImmediateChild(o):null,d=qp(i,o);r=r.concat(rf(a,l,c,d))}return s&&(r=r.concat(ql(s,t,i,n))),r}}function of(t,e,n,i){let s=e.get(L());n==null&&s!=null&&(n=Zt(s,L()));let r=[];return e.children.inorderTraversal((o,a)=>{let l=n?n.getImmediateChild(o):null,c=qp(i,o),d=t.operationForChild(o);d&&(r=r.concat(of(d,a,l,c)))}),s&&(r=r.concat(ql(s,t,i,n))),r}function af(t,e){let n=e.query,i=Zi(t,n);return{hashFn:()=>(uv(e)||E.EMPTY_NODE).hash(),onComplete:s=>{if(s==="ok")return i?Dv(t,n._path,i):Iv(t,n._path);{let r=H1(s,n);return _r(t,n,null,r)}}}}function Zi(t,e){let n=Or(e);return t.queryToTagMap.get(n)}function Or(t){return t._path.toString()+"$"+t._queryIdentifier}function Ql(t,e){return t.tagToQueryMap.get(e)}function Zl(t){let e=t.indexOf("$");return _(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new B(t.substr(0,e))}}function Jl(t,e,n){let i=t.syncPointTree_.get(e);_(i,"Missing sync point for query tag that we're tracking");let s=Dr(t.pendingWriteTree_,e);return ql(i,n,s,null)}function Ov(t){return t.fold((e,n,i)=>{if(n&&en(n))return[Mr(n)];{let s=[];return n&&(s=ef(n)),fe(i,(r,o)=>{s=s.concat(o)}),s}})}function Ui(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(Cv())(t._repo,t._path):t}function Rv(t,e){for(let n=0;n<e.length;++n){let i=e[n];if(!i._queryParams.loadsAllData()){let s=Or(i),r=t.queryToTagMap.get(s);t.queryToTagMap.delete(s),t.tagToQueryMap.delete(r)}}}function Av(){return Tv++}function Nv(t,e,n){let i=e._path,s=Zi(t,e),r=af(t,n),o=t.listenProvider_.startListening(Ui(e),s,r.hashFn,r.onComplete),a=t.syncPointTree_.subtree(i);if(s)_(!en(a.value),"If we're adding a query, it shouldn't be shadowed");else{let l=a.fold((c,d,u)=>{if(!A(c)&&d&&en(d))return[Mr(d).query];{let h=[];return d&&(h=h.concat(ef(d).map(f=>f.query))),fe(u,(f,w)=>{h=h.concat(w)}),h}});for(let c=0;c<l.length;++c){let d=l[c];t.listenProvider_.stopListening(Ui(d),Zi(t,d))}}return o}var gl=class t{constructor(e){this.node_=e}getImmediateChild(e){let n=this.node_.getImmediateChild(e);return new t(n)}node(){return this.node_}},ml=class t{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){let n=Z(this.path_,e);return new t(this.syncTree_,n)}node(){return kr(this.syncTree_,this.path_)}},xv=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},dp=function(t,e,n){if(!t||typeof t!="object")return t;if(_(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return Pv(t[".sv"],e,n);if(typeof t[".sv"]=="object")return Fv(t[".sv"],e);_(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},Pv=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:_(!1,"Unexpected server value: "+t)}},Fv=function(t,e,n){t.hasOwnProperty("increment")||_(!1,"Unexpected server value: "+JSON.stringify(t,null,2));let i=t.increment;typeof i!="number"&&_(!1,"Unexpected increment value: "+i);let s=e.node();if(_(s!==null&&typeof s<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return i;let o=s.getValue();return typeof o!="number"?i:o+i},lf=function(t,e,n,i){return ec(e,new ml(n,t),i)},Xl=function(t,e,n){return ec(t,new gl(e),n)};function ec(t,e,n){let i=t.getPriority().val(),s=dp(i,e.getImmediateChild(".priority"),n),r;if(t.isLeafNode()){let o=t,a=dp(o.getValue(),e,n);return a!==o.getValue()||s!==o.getPriority().val()?new Jn(a,X(s)):t}else{let o=t;return r=o,s!==o.getPriority().val()&&(r=r.updatePriority(new Jn(s))),o.forEachChild(K,(a,l)=>{let c=ec(l,e.getImmediateChild(a),n);c!==l&&(r=r.updateImmediateChild(a,c))}),r}}var Ji=class{constructor(e="",n=null,i={children:{},childCount:0}){this.name=e,this.parent=n,this.node=i}};function Rr(t,e){let n=e instanceof B?e:new B(e),i=t,s=R(n);for(;s!==null;){let r=$t(i.node.children,s)||{children:{},childCount:0};i=new Ji(s,i,r),n=$(n),s=R(n)}return i}function gn(t){return t.node.value}function tc(t,e){t.node.value=e,_l(t)}function cf(t){return t.node.childCount>0}function zv(t){return gn(t)===void 0&&!cf(t)}function Ar(t,e){fe(t.node.children,(n,i)=>{e(new Ji(n,t,i))})}function df(t,e,n,i){n&&!i&&e(t),Ar(t,s=>{df(s,e,!0,i)}),n&&i&&e(t)}function Lv(t,e,n){let i=n?t:t.parent;for(;i!==null;){if(e(i))return!0;i=i.parent}return!1}function os(t){return new B(t.parent===null?t.name:os(t.parent)+"/"+t.name)}function _l(t){t.parent!==null&&Bv(t.parent,t.name,t)}function Bv(t,e,n){let i=zv(n),s=Ye(t.node.children,e);i&&s?(delete t.node.children[e],t.node.childCount--,_l(t)):!i&&!s&&(t.node.children[e]=n.node,t.node.childCount++,_l(t))}var Vv=/[\[\].#$\/\u0000-\u001F\u007F]/,Uv=/[\[\].#$\u0000-\u001F\u007F]/,Ma=10*1024*1024,Nr=function(t){return typeof t=="string"&&t.length!==0&&!Vv.test(t)},uf=function(t){return typeof t=="string"&&t.length!==0&&!Uv.test(t)},Gv=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),uf(t)},Xi=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!Er(t)||t&&typeof t=="object"&&Ye(t,".sv")},Ot=function(t,e,n,i){i&&e===void 0||as(Le(t,"value"),e,n)},as=function(t,e,n){let i=n instanceof B?new Ua(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+cn(i));if(typeof e=="function")throw new Error(t+"contains a function "+cn(i)+" with contents = "+e.toString());if(Er(e))throw new Error(t+"contains "+e.toString()+" "+cn(i));if(typeof e=="string"&&e.length>Ma/3&&Ti(e)>Ma)throw new Error(t+"contains a string greater than "+Ma+" utf8 bytes "+cn(i)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let s=!1,r=!1;if(fe(e,(o,a)=>{if(o===".value")s=!0;else if(o!==".priority"&&o!==".sv"&&(r=!0,!Nr(o)))throw new Error(t+" contains an invalid key ("+o+") "+cn(i)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);yy(i,o),as(t,a,i),vy(i)}),s&&r)throw new Error(t+' contains ".value" child '+cn(i)+" in addition to actual children.")}},Hv=function(t,e){let n,i;for(n=0;n<e.length;n++){i=e[n];let r=Hi(i);for(let o=0;o<r.length;o++)if(!(r[o]===".priority"&&o===r.length-1)){if(!Nr(r[o]))throw new Error(t+"contains an invalid key ("+r[o]+") in path "+i.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(_y);let s=null;for(n=0;n<e.length;n++){if(i=e[n],s!==null&&Ze(s,i))throw new Error(t+"contains a path "+s.toString()+" that is ancestor of another path "+i.toString());s=i}},hf=function(t,e,n,i){if(i&&e===void 0)return;let s=Le(t,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(s+" must be an object containing the children to replace.");let r=[];fe(e,(o,a)=>{let l=new B(o);if(as(s,a,Z(n,l)),Ll(l)===".priority"&&!Xi(a))throw new Error(s+"contains an invalid value for '"+l.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");r.push(l)}),Hv(s,r)},nc=function(t,e,n){if(!(n&&e===void 0)){if(Er(e))throw new Error(Le(t,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Xi(e))throw new Error(Le(t,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},ls=function(t,e,n,i){if(!(i&&n===void 0)&&!Nr(n))throw new Error(Le(t,e)+'was an invalid key = "'+n+`".  Firebase keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]").`)},li=function(t,e,n,i){if(!(i&&n===void 0)&&!uf(n))throw new Error(Le(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},$v=function(t,e,n,i){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),li(t,e,n,i)},He=function(t,e){if(R(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},pf=function(t,e){let n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!Nr(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!Gv(n))throw new Error(Le(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var yl=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function xr(t,e){let n=null;for(let i=0;i<e.length;i++){let s=e[i],r=s.getPath();n!==null&&!Bl(r,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:r}),n.events.push(s)}n&&t.eventLists_.push(n)}function ff(t,e,n){xr(t,n),gf(t,i=>Bl(i,e))}function $e(t,e,n){xr(t,n),gf(t,i=>Ze(i,e)||Ze(e,i))}function gf(t,e){t.recursionDepth_++;let n=!0;for(let i=0;i<t.eventLists_.length;i++){let s=t.eventLists_[i];if(s){let r=s.path;e(r)?(jv(t.eventLists_[i]),t.eventLists_[i]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function jv(t){for(let e=0;e<t.events.length;e++){let n=t.events[e];if(n!==null){t.events[e]=null;let i=n.getEventRunner();un&&pe("event: "+n.toString()),ri(i)}}}var mf="repo_interrupt",Wv=25,vl=class{constructor(e,n,i,s){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=i,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new yl,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=ar(),this.transactionQueueTree_=new Ji,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function Kv(t,e,n){if(t.stats_=zl(t.repoInfo_),t.forceRestClient_||K1())t.server_=new Ja(t.repoInfo_,(i,s,r,o)=>{up(t,i,s,r,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>hp(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{re(n)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}t.persistentConnection_=new Vl(t.repoInfo_,e,(i,s,r,o)=>{up(t,i,s,r,o)},i=>{hp(t,i)},i=>{qv(t,i)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(i=>{t.server_.refreshAuthToken(i)}),t.appCheckProvider_.addTokenChangeListener(i=>{t.server_.refreshAppCheckToken(i.token)}),t.statsReporter_=Y1(t.repoInfo_,()=>new il(t.stats_,t.server_)),t.infoData_=new Xa,t.infoSyncTree_=new mr({startListening:(i,s,r,o)=>{let a=[],l=t.infoData_.getNode(i._path);return l.isEmpty()||(a=rs(t.infoSyncTree_,i._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),ic(t,"connected",!1),t.serverSyncTree_=new mr({startListening:(i,s,r,o)=>(t.server_.listen(i,r,s,(a,l)=>{let c=o(a,l);$e(t.eventQueue_,i._path,c)}),[]),stopListening:(i,s)=>{t.server_.unlisten(i,s)}})}function _f(t){let n=t.infoData_.getNode(new B(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function cs(t){return xv({timestamp:_f(t)})}function up(t,e,n,i,s){t.dataUpdateCount++;let r=new B(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(s)if(i){let l=Ci(n,c=>X(c));o=Mv(t.serverSyncTree_,r,l,s)}else{let l=X(n);o=sf(t.serverSyncTree_,r,l,s)}else if(i){let l=Ci(n,c=>X(c));o=Sv(t.serverSyncTree_,r,l)}else{let l=X(n);o=rs(t.serverSyncTree_,r,l)}let a=r;o.length>0&&(a=ii(t,r)),$e(t.eventQueue_,a,o)}function hp(t,e){ic(t,"connected",e),e===!1&&Zv(t)}function qv(t,e){fe(e,(n,i)=>{ic(t,n,i)})}function ic(t,e,n){let i=new B("/.info/"+e),s=X(n);t.infoData_.updateSnapshot(i,s);let r=rs(t.infoSyncTree_,i,s);$e(t.eventQueue_,i,r)}function Pr(t){return t.nextWriteId_++}function Yv(t,e,n){let i=kv(t.serverSyncTree_,e);return i!=null?Promise.resolve(i):t.server_.get(e).then(s=>{let r=X(s).withIndex(e._queryParams.getIndex());fl(t.serverSyncTree_,e,n,!0);let o;if(e._queryParams.loadsAllData())o=rs(t.serverSyncTree_,e._path,r);else{let a=Zi(t.serverSyncTree_,e);o=sf(t.serverSyncTree_,e._path,r,a)}return $e(t.eventQueue_,e._path,o),_r(t.serverSyncTree_,e,n,null,!0),r},s=>(ci(t,"get for query "+re(e)+" failed: "+s),Promise.reject(new Error(s))))}function sc(t,e,n,i,s){ci(t,"set",{path:e.toString(),value:n,priority:i});let r=cs(t),o=X(n,i),a=kr(t.serverSyncTree_,e),l=Xl(o,a,r),c=Pr(t),d=Yl(t.serverSyncTree_,e,l,c,!0);xr(t.eventQueue_,d),t.server_.put(e.toString(),o.val(!0),(h,f)=>{let w=h==="ok";w||we("set at "+e+" failed: "+h);let S=Yt(t.serverSyncTree_,c,!w);$e(t.eventQueue_,e,S),tn(t,s,h,f)});let u=oc(t,e);ii(t,u),$e(t.eventQueue_,u,[])}function Qv(t,e,n,i){ci(t,"update",{path:e.toString(),value:n});let s=!0,r=cs(t),o={};if(fe(n,(a,l)=>{s=!1,o[a]=lf(Z(e,a),X(l),t.serverSyncTree_,r)}),s)pe("update() called with empty data.  Don't do anything."),tn(t,i,"ok",void 0);else{let a=Pr(t),l=Ev(t.serverSyncTree_,e,o,a);xr(t.eventQueue_,l),t.server_.merge(e.toString(),n,(c,d)=>{let u=c==="ok";u||we("update at "+e+" failed: "+c);let h=Yt(t.serverSyncTree_,a,!u),f=h.length>0?ii(t,e):e;$e(t.eventQueue_,f,h),tn(t,i,c,d)}),fe(n,c=>{let d=oc(t,Z(e,c));ii(t,d)}),$e(t.eventQueue_,e,[])}}function Zv(t){ci(t,"onDisconnectEvents");let e=cs(t),n=ar();tl(t.onDisconnect_,L(),(s,r)=>{let o=lf(s,r,t.serverSyncTree_,e);oi(n,s,o)});let i=[];tl(n,L(),(s,r)=>{i=i.concat(rs(t.serverSyncTree_,s,r));let o=oc(t,s);ii(t,o)}),t.onDisconnect_=ar(),$e(t.eventQueue_,L(),i)}function Jv(t,e,n){t.server_.onDisconnectCancel(e.toString(),(i,s)=>{i==="ok"&&el(t.onDisconnect_,e),tn(t,n,i,s)})}function pp(t,e,n,i){let s=X(n);t.server_.onDisconnectPut(e.toString(),s.val(!0),(r,o)=>{r==="ok"&&oi(t.onDisconnect_,e,s),tn(t,i,r,o)})}function Xv(t,e,n,i,s){let r=X(n,i);t.server_.onDisconnectPut(e.toString(),r.val(!0),(o,a)=>{o==="ok"&&oi(t.onDisconnect_,e,r),tn(t,s,o,a)})}function eb(t,e,n,i){if(Ms(n)){pe("onDisconnect().update() called with empty data.  Don't do anything."),tn(t,i,"ok",void 0);return}t.server_.onDisconnectMerge(e.toString(),n,(s,r)=>{s==="ok"&&fe(n,(o,a)=>{let l=X(a);oi(t.onDisconnect_,Z(e,o),l)}),tn(t,i,s,r)})}function tb(t,e,n){let i;R(e._path)===".info"?i=fl(t.infoSyncTree_,e,n):i=fl(t.serverSyncTree_,e,n),ff(t.eventQueue_,e._path,i)}function bl(t,e,n){let i;R(e._path)===".info"?i=_r(t.infoSyncTree_,e,n):i=_r(t.serverSyncTree_,e,n),ff(t.eventQueue_,e._path,i)}function yf(t){t.persistentConnection_&&t.persistentConnection_.interrupt(mf)}function nb(t){t.persistentConnection_&&t.persistentConnection_.resume(mf)}function ci(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),pe(n,...e)}function tn(t,e,n,i){e&&ri(()=>{if(n==="ok")e(null);else{let s=(n||"error").toUpperCase(),r=s;i&&(r+=": "+i);let o=new Error(r);o.code=s,e(o)}})}function ib(t,e,n,i,s,r){ci(t,"transaction on "+e);let o={path:e,update:n,onComplete:i,status:null,order:mp(),applyLocally:r,retryCount:0,unwatcher:s,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},a=rc(t,e,void 0);o.currentInputSnapshot=a;let l=o.update(a.val());if(l===void 0)o.unwatcher(),o.currentOutputSnapshotRaw=null,o.currentOutputSnapshotResolved=null,o.onComplete&&o.onComplete(null,!1,o.currentInputSnapshot);else{as("transaction failed: Data returned ",l,o.path),o.status=0;let c=Rr(t.transactionQueueTree_,e),d=gn(c)||[];d.push(o),tc(c,d);let u;typeof l=="object"&&l!==null&&Ye(l,".priority")?(u=$t(l,".priority"),_(Xi(u),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):u=(kr(t.serverSyncTree_,e)||E.EMPTY_NODE).getPriority().val();let h=cs(t),f=X(l,u),w=Xl(f,a,h);o.currentOutputSnapshotRaw=f,o.currentOutputSnapshotResolved=w,o.currentWriteId=Pr(t);let S=Yl(t.serverSyncTree_,e,w,o.currentWriteId,o.applyLocally);$e(t.eventQueue_,e,S),Fr(t,t.transactionQueueTree_)}}function rc(t,e,n){return kr(t.serverSyncTree_,e,n)||E.EMPTY_NODE}function Fr(t,e=t.transactionQueueTree_){if(e||zr(t,e),gn(e)){let n=bf(t,e);_(n.length>0,"Sending zero length transaction queue"),n.every(s=>s.status===0)&&sb(t,os(e),n)}else cf(e)&&Ar(e,n=>{Fr(t,n)})}function sb(t,e,n){let i=n.map(c=>c.currentWriteId),s=rc(t,e,i),r=s,o=s.hash();for(let c=0;c<n.length;c++){let d=n[c];_(d.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),d.status=1,d.retryCount++;let u=Oe(e,d.path);r=r.updateChild(u,d.currentOutputSnapshotRaw)}let a=r.val(!0),l=e;t.server_.put(l.toString(),a,c=>{ci(t,"transaction put response",{path:l.toString(),status:c});let d=[];if(c==="ok"){let u=[];for(let h=0;h<n.length;h++)n[h].status=2,d=d.concat(Yt(t.serverSyncTree_,n[h].currentWriteId)),n[h].onComplete&&u.push(()=>n[h].onComplete(null,!0,n[h].currentOutputSnapshotResolved)),n[h].unwatcher();zr(t,Rr(t.transactionQueueTree_,e)),Fr(t,t.transactionQueueTree_),$e(t.eventQueue_,e,d);for(let h=0;h<u.length;h++)ri(u[h])}else{if(c==="datastale")for(let u=0;u<n.length;u++)n[u].status===3?n[u].status=4:n[u].status=0;else{we("transaction at "+l.toString()+" failed: "+c);for(let u=0;u<n.length;u++)n[u].status=4,n[u].abortReason=c}ii(t,e)}},o)}function ii(t,e){let n=vf(t,e),i=os(n),s=bf(t,n);return rb(t,s,i),i}function rb(t,e,n){if(e.length===0)return;let i=[],s=[],o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){let l=e[a],c=Oe(n,l.path),d=!1,u;if(_(c!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),l.status===4)d=!0,u=l.abortReason,s=s.concat(Yt(t.serverSyncTree_,l.currentWriteId,!0));else if(l.status===0)if(l.retryCount>=Wv)d=!0,u="maxretry",s=s.concat(Yt(t.serverSyncTree_,l.currentWriteId,!0));else{let h=rc(t,l.path,o);l.currentInputSnapshot=h;let f=e[a].update(h.val());if(f!==void 0){as("transaction failed: Data returned ",f,l.path);let w=X(f);typeof f=="object"&&f!=null&&Ye(f,".priority")||(w=w.updatePriority(h.getPriority()));let M=l.currentWriteId,ce=cs(t),Ce=Xl(w,h,ce);l.currentOutputSnapshotRaw=w,l.currentOutputSnapshotResolved=Ce,l.currentWriteId=Pr(t),o.splice(o.indexOf(M),1),s=s.concat(Yl(t.serverSyncTree_,l.path,Ce,l.currentWriteId,l.applyLocally)),s=s.concat(Yt(t.serverSyncTree_,M,!0))}else d=!0,u="nodata",s=s.concat(Yt(t.serverSyncTree_,l.currentWriteId,!0))}$e(t.eventQueue_,n,s),s=[],d&&(e[a].status=2,function(h){setTimeout(h,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(u==="nodata"?i.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):i.push(()=>e[a].onComplete(new Error(u),!1,null))))}zr(t,t.transactionQueueTree_);for(let a=0;a<i.length;a++)ri(i[a]);Fr(t,t.transactionQueueTree_)}function vf(t,e){let n,i=t.transactionQueueTree_;for(n=R(e);n!==null&&gn(i)===void 0;)i=Rr(i,n),e=$(e),n=R(e);return i}function bf(t,e){let n=[];return wf(t,e,n),n.sort((i,s)=>i.order-s.order),n}function wf(t,e,n){let i=gn(e);if(i)for(let s=0;s<i.length;s++)n.push(i[s]);Ar(e,s=>{wf(t,s,n)})}function zr(t,e){let n=gn(e);if(n){let i=0;for(let s=0;s<n.length;s++)n[s].status!==2&&(n[i]=n[s],i++);n.length=i,tc(e,n.length>0?n:void 0)}Ar(e,i=>{zr(t,i)})}function oc(t,e){let n=os(vf(t,e)),i=Rr(t.transactionQueueTree_,e);return Lv(i,s=>{ka(t,s)}),ka(t,i),df(i,s=>{ka(t,s)}),n}function ka(t,e){let n=gn(e);if(n){let i=[],s=[],r=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(_(r===o-1,"All SENT items should be at beginning of queue."),r=o,n[o].status=3,n[o].abortReason="set"):(_(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),s=s.concat(Yt(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&i.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));r===-1?tc(e,void 0):n.length=r+1,$e(t.eventQueue_,os(e),s);for(let o=0;o<i.length;o++)ri(i[o])}}function ob(t){let e="",n=t.split("/");for(let i=0;i<n.length;i++)if(n[i].length>0){let s=n[i];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch{}e+="/"+s}return e}function ab(t){let e={};t.charAt(0)==="?"&&(t=t.substring(1));for(let n of t.split("&")){if(n.length===0)continue;let i=n.split("=");i.length===2?e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):we(`Invalid query segment '${n}' in query '${t}'`)}return e}var wl=function(t,e){let n=lb(t),i=n.namespace;n.domain==="firebase.com"&&Mt(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||i==="undefined")&&n.domain!=="localhost"&&Mt("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||L1();let s=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new Xs(n.host,n.secure,i,s,e,"",i!==n.subdomain),path:new B(n.pathString)}},lb=function(t){let e="",n="",i="",s="",r="",o=!0,a="https",l=443;if(typeof t=="string"){let c=t.indexOf("//");c>=0&&(a=t.substring(0,c-1),t=t.substring(c+2));let d=t.indexOf("/");d===-1&&(d=t.length);let u=t.indexOf("?");u===-1&&(u=t.length),e=t.substring(0,Math.min(d,u)),d<u&&(s=ob(t.substring(d,u)));let h=ab(t.substring(Math.min(t.length,u)));c=e.indexOf(":"),c>=0?(o=a==="https"||a==="wss",l=parseInt(e.substring(c+1),10)):c=e.length;let f=e.slice(0,c);if(f.toLowerCase()==="localhost")n="localhost";else if(f.split(".").length<=2)n=f;else{let w=e.indexOf(".");i=e.substring(0,w).toLowerCase(),n=e.substring(w+1),r=i}"ns"in h&&(r=h.ns)}return{host:e,port:l,domain:n,subdomain:i,secure:o,scheme:a,pathString:s,namespace:r}};var fp="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",cb=function(){let t=0,e=[];return function(n){let i=n===t;t=n;let s,r=new Array(8);for(s=7;s>=0;s--)r[s]=fp.charAt(n%64),n=Math.floor(n/64);_(n===0,"Cannot push at time == 0");let o=r.join("");if(i){for(s=11;s>=0&&e[s]===63;s--)e[s]=0;e[s]++}else for(s=0;s<12;s++)e[s]=Math.floor(Math.random()*64);for(s=0;s<12;s++)o+=fp.charAt(e[s]);return _(o.length===20,"nextPushId: Length should be 20."),o}}();var yr=class{constructor(e,n,i,s){this.eventType=e,this.eventRegistration=n,this.snapshot=i,this.prevName=s}getPath(){let e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+re(this.snapshot.exportVal())}},vr=class{constructor(e,n,i){this.eventRegistration=e,this.error=n,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}};var es=class{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return _(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}};var br=class{constructor(e,n){this._repo=e,this._path=n}cancel(){let e=new he;return Jv(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){He("OnDisconnect.remove",this._path);let e=new he;return pp(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){He("OnDisconnect.set",this._path),Ot("OnDisconnect.set",e,this._path,!1);let n=new he;return pp(this._repo,this._path,e,n.wrapCallback(()=>{})),n.promise}setWithPriority(e,n){He("OnDisconnect.setWithPriority",this._path),Ot("OnDisconnect.setWithPriority",e,this._path,!1),nc("OnDisconnect.setWithPriority",n,!1);let i=new he;return Xv(this._repo,this._path,e,n,i.wrapCallback(()=>{})),i.promise}update(e){He("OnDisconnect.update",this._path),hf("OnDisconnect.update",e,this._path,!1);let n=new he;return eb(this._repo,this._path,e,n.wrapCallback(()=>{})),n.promise}};var Ae=class t{constructor(e,n,i,s){this._repo=e,this._path=n,this._queryParams=i,this._orderByCalled=s}get key(){return A(this._path)?null:Ll(this._path)}get ref(){return new je(this._repo,this._path)}get _queryIdentifier(){let e=ep(this._queryParams),n=Fl(e);return n==="{}"?"default":n}get _queryObject(){return ep(this._queryParams)}isEqual(e){if(e=j(e),!(e instanceof t))return!1;let n=this._repo===e._repo,i=Bl(this._path,e._path),s=this._queryIdentifier===e._queryIdentifier;return n&&i&&s}toJSON(){return this.toString()}toString(){return this._repo.toString()+my(this._path)}};function Lr(t,e){if(t._orderByCalled===!0)throw new Error(e+": You can't combine multiple orderBy calls.")}function sn(t){let e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===Dt){let i="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",s="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==Jt)throw new Error(i);if(typeof e!="string")throw new Error(s)}if(t.hasEnd()){if(t.getIndexEndName()!==Lt)throw new Error(i);if(typeof n!="string")throw new Error(s)}}else if(t.getIndex()===K){if(e!=null&&!Xi(e)||n!=null&&!Xi(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(_(t.getIndex()instanceof $i||t.getIndex()===Gl,"unknown index type."),e!=null&&typeof e=="object"||n!=null&&typeof n=="object")throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Br(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var je=class t extends Ae{constructor(e,n){super(e,n,new qi,!1)}get parent(){let e=zp(this._path);return e===null?null:new t(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}},si=class t{constructor(e,n,i){this._node=e,this.ref=n,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){let n=new B(e),i=nn(this.ref,e);return new t(this._node.getChild(n),i,K)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(i,s)=>e(new t(s,nn(this.ref,i),K)))}hasChild(e){let n=new B(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}};function ac(t,e){return t=j(t),t._checkNotDeleted("ref"),e!==void 0?nn(t._root,e):t._root}function lc(t,e){t=j(t),t._checkNotDeleted("refFromURL");let n=wl(e,t._repo.repoInfo_.nodeAdmin);pf("refFromURL",n);let i=n.repoInfo;return!t._repo.repoInfo_.isCustomHost()&&i.host!==t._repo.repoInfo_.host&&Mt("refFromURL: Host name does not match the current database: (found "+i.host+" but expected "+t._repo.repoInfo_.host+")"),ac(t,n.path.toString())}function nn(t,e){return t=j(t),R(t._path)===null?$v("child","path",e,!1):li("child","path",e,!1),new je(t._repo,Z(t._path,e))}function Cf(t,e){t=j(t),He("push",t._path),Ot("push",e,t._path,!0);let n=_f(t._repo),i=cb(n),s=nn(t,i),r=nn(t,i),o;return e!=null?o=Vr(r,e).then(()=>r):o=Promise.resolve(r),s.then=o.then.bind(o),s.catch=o.then.bind(o,void 0),s}function Tf(t){return He("remove",t._path),Vr(t,null)}function Vr(t,e){t=j(t),He("set",t._path),Ot("set",e,t._path,!1);let n=new he;return sc(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function Ef(t,e){t=j(t),He("setPriority",t._path),nc("setPriority",e,!1);let n=new he;return sc(t._repo,Z(t._path,".priority"),e,null,n.wrapCallback(()=>{})),n.promise}function Sf(t,e,n){if(He("setWithPriority",t._path),Ot("setWithPriority",e,t._path,!1),nc("setWithPriority",n,!1),t.key===".length"||t.key===".keys")throw"setWithPriority failed: "+t.key+" is a read-only object.";let i=new he;return sc(t._repo,t._path,e,n,i.wrapCallback(()=>{})),i.promise}function If(t,e){hf("update",e,t._path,!1);let n=new he;return Qv(t._repo,t._path,e,n.wrapCallback(()=>{})),n.promise}function Df(t){t=j(t);let e=new es(()=>{}),n=new ts(e);return Yv(t._repo,t,n).then(i=>new si(i,new je(t._repo,t._path),t._queryParams.getIndex()))}var ts=class t{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){let i=n._queryParams.getIndex();return new yr("value",this,new si(e.snapshotNode,new je(n._repo,n._path),i))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new vr(this,e,n):null}matches(e){return e instanceof t?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}},wr=class t{constructor(e,n){this.eventType=e,this.callbackContext=n}respondsTo(e){let n=e==="children_added"?"child_added":e;return n=n==="children_removed"?"child_removed":n,this.eventType===n}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new vr(this,e,n):null}createEvent(e,n){_(e.childName!=null,"Child events should have a childName.");let i=nn(new je(n._repo,n._path),e.childName),s=n._queryParams.getIndex();return new yr(e.type,this,new si(e.snapshotNode,i,s),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof t?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}};function ds(t,e,n,i,s){let r;if(typeof i=="object"&&(r=void 0,s=i),typeof i=="function"&&(r=i),s&&s.onlyOnce){let l=n,c=(d,u)=>{bl(t._repo,t,a),l(d,u)};c.userCallback=n.userCallback,c.context=n.context,n=c}let o=new es(n,r||void 0),a=e==="value"?new ts(o):new wr(e,o);return tb(t._repo,t,a),()=>bl(t._repo,t,a)}function Ur(t,e,n,i){return ds(t,"value",e,n,i)}function cc(t,e,n,i){return ds(t,"child_added",e,n,i)}function dc(t,e,n,i){return ds(t,"child_changed",e,n,i)}function uc(t,e,n,i){return ds(t,"child_moved",e,n,i)}function hc(t,e,n,i){return ds(t,"child_removed",e,n,i)}function pc(t,e,n){let i=null,s=n?new es(n):null;e==="value"?i=new ts(s):e&&(i=new wr(e,s)),bl(t._repo,t,i)}var We=class{},Cr=class extends We{constructor(e,n){super(),this._value=e,this._key=n,this.type="endAt"}_apply(e){Ot("endAt",this._value,e._path,!0);let n=Za(e._queryParams,this._value,this._key);if(Br(n),sn(n),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Ae(e._repo,e._path,n,e._orderByCalled)}};function Mf(t,e){return ls("endAt","key",e,!0),new Cr(t,e)}var Cl=class extends We{constructor(e,n){super(),this._value=e,this._key=n,this.type="endBefore"}_apply(e){Ot("endBefore",this._value,e._path,!1);let n=Py(e._queryParams,this._value,this._key);if(Br(n),sn(n),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Ae(e._repo,e._path,n,e._orderByCalled)}};function kf(t,e){return ls("endBefore","key",e,!0),new Cl(t,e)}var Tr=class extends We{constructor(e,n){super(),this._value=e,this._key=n,this.type="startAt"}_apply(e){Ot("startAt",this._value,e._path,!0);let n=Qa(e._queryParams,this._value,this._key);if(Br(n),sn(n),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Ae(e._repo,e._path,n,e._orderByCalled)}};function Of(t=null,e){return ls("startAt","key",e,!0),new Tr(t,e)}var Tl=class extends We{constructor(e,n){super(),this._value=e,this._key=n,this.type="startAfter"}_apply(e){Ot("startAfter",this._value,e._path,!1);let n=xy(e._queryParams,this._value,this._key);if(Br(n),sn(n),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Ae(e._repo,e._path,n,e._orderByCalled)}};function Rf(t,e){return ls("startAfter","key",e,!0),new Tl(t,e)}var El=class extends We{constructor(e){super(),this._limit=e,this.type="limitToFirst"}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Ae(e._repo,e._path,Ay(e._queryParams,this._limit),e._orderByCalled)}};function Af(t){if(typeof t!="number"||Math.floor(t)!==t||t<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new El(t)}var Sl=class extends We{constructor(e){super(),this._limit=e,this.type="limitToLast"}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Ae(e._repo,e._path,Ny(e._queryParams,this._limit),e._orderByCalled)}};function Nf(t){if(typeof t!="number"||Math.floor(t)!==t||t<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new Sl(t)}var Il=class extends We{constructor(e){super(),this._path=e,this.type="orderByChild"}_apply(e){Lr(e,"orderByChild");let n=new B(this._path);if(A(n))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");let i=new $i(n),s=Sr(e._queryParams,i);return sn(s),new Ae(e._repo,e._path,s,!0)}};function xf(t){if(t==="$key")throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if(t==="$priority")throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if(t==="$value")throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return li("orderByChild","path",t,!1),new Il(t)}var Dl=class extends We{constructor(){super(...arguments),this.type="orderByKey"}_apply(e){Lr(e,"orderByKey");let n=Sr(e._queryParams,Dt);return sn(n),new Ae(e._repo,e._path,n,!0)}};function Pf(){return new Dl}var Ml=class extends We{constructor(){super(...arguments),this.type="orderByPriority"}_apply(e){Lr(e,"orderByPriority");let n=Sr(e._queryParams,K);return sn(n),new Ae(e._repo,e._path,n,!0)}};function Ff(){return new Ml}var kl=class extends We{constructor(){super(...arguments),this.type="orderByValue"}_apply(e){Lr(e,"orderByValue");let n=Sr(e._queryParams,Gl);return sn(n),new Ae(e._repo,e._path,n,!0)}};function zf(){return new kl}var Ol=class extends We{constructor(e,n){super(),this._value=e,this._key=n,this.type="equalTo"}_apply(e){if(Ot("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Cr(this._value,this._key)._apply(new Tr(this._value,this._key)._apply(e))}};function Lf(t,e){return ls("equalTo","key",e,!0),new Ol(t,e)}function Xe(t,...e){let n=j(t);for(let i of e)n=i._apply(n);return n}mv(je);wv(je);var db="FIREBASE_DATABASE_EMULATOR_HOST",Rl={},ub=!1;function hb(t,e,n,i){t.repoInfo_=new Xs(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),i&&(t.authTokenProvider_=i)}function fc(t,e,n,i,s){let r=i||t.options.databaseURL;r===void 0&&(t.options.projectId||Mt("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),pe("Using default host for project ",t.options.projectId),r=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=wl(r,s),a=o.repoInfo,l,c;typeof process<"u"&&process.env&&(c=process.env[db]),c?(l=!0,r=`http://${c}?ns=${a.namespace}`,o=wl(r,s),a=o.repoInfo):l=!o.repoInfo.secure;let d=s&&l?new Li(Li.OWNER):new Pa(t.name,t.options,e);pf("Invalid Firebase Database URL",o),A(o.path)||Mt("Database URL must point to the root of a Firebase Database (not including a child path).");let u=fb(a,t,d,new xa(t.name,n));return new Al(u,t)}function pb(t,e){let n=Rl[e];(!n||n[t.key]!==t)&&Mt(`Database ${e}(${t.repoInfo_}) has already been deleted.`),yf(t),delete n[t.key]}function fb(t,e,n,i){let s=Rl[e.name];s||(s={},Rl[e.name]=s);let r=s[t.toURLString()];return r&&Mt("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),r=new vl(t,ub,n,i),s[t.toURLString()]=r,r}var Al=class{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(Kv(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new je(this._repo,L())),this._rootInternal}_delete(){return this._rootInternal!==null&&(pb(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Mt("Cannot call "+e+" on a deleted database.")}};function Bf(){Fp.IS_TRANSPORT_INITIALIZED&&we("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function Vf(){Bf(),Gi.forceDisallow()}function Uf(){Bf(),qn.forceDisallow(),Gi.forceAllow()}function Gf(t,e,n,i={}){t=j(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&Mt("Cannot call useEmulator() after instance has already been initialized.");let s=t._repoInternal,r;if(s.repoInfo_.nodeAdmin)i.mockUserToken&&Mt('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),r=new Li(Li.OWNER);else if(i.mockUserToken){let o=typeof i.mockUserToken=="string"?i.mockUserToken:Is(i.mockUserToken,t.app.options.projectId);r=new Li(o)}hb(s,e,n,r)}function Hf(t){t=j(t),t._checkNotDeleted("goOffline"),yf(t._repo)}function $f(t){t=j(t),t._checkNotDeleted("goOnline"),nb(t._repo)}function jf(t,e){yp(t,e)}function gb(t){Pl(As),Ie(new le("database",(e,{instanceIdentifier:n})=>{let i=e.getProvider("app").getImmediate(),s=e.getProvider("auth-internal"),r=e.getProvider("app-check-internal");return fc(i,s,r,n)},"PUBLIC").setMultipleInstances(!0)),G(zh,Lh,t),G(zh,Lh,"esm2017")}var mb={".sv":"timestamp"};function Wf(){return mb}function Kf(t){return{".sv":{increment:t}}}var Nl=class{constructor(e,n){this.committed=e,this.snapshot=n}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}};function qf(t,e,n){var i;if(t=j(t),He("Reference.transaction",t._path),t.key===".length"||t.key===".keys")throw"Reference.transaction failed: "+t.key+" is a read-only object.";let s=(i=n?.applyLocally)!==null&&i!==void 0?i:!0,r=new he,o=(l,c,d)=>{let u=null;l?r.reject(l):(u=new si(d,new je(t._repo,t._path),K),r.resolve(new Nl(c,u)))},a=Ur(t,()=>{});return ib(t._repo,t._path,e,o,a,s),r.promise}Vl.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Vl.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};gb();var _b="@firebase/database-compat",yb="1.0.4";var vb=new jt("@firebase/database-compat"),Yf=function(t){let e="FIREBASE WARNING: "+t;vb.warn(e)};var bb=function(t,e,n,i){if(!(i&&n===void 0)&&typeof n!="boolean")throw new Error(Le(t,e)+"must be a boolean.")},wb=function(t,e,n){if(!(n&&e===void 0))switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(Le(t,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}};var gc=class{constructor(e){this._delegate=e}cancel(e){T("OnDisconnect.cancel",0,1,arguments.length),ae("OnDisconnect.cancel","onComplete",e,!0);let n=this._delegate.cancel();return e&&n.then(()=>e(null),i=>e(i)),n}remove(e){T("OnDisconnect.remove",0,1,arguments.length),ae("OnDisconnect.remove","onComplete",e,!0);let n=this._delegate.remove();return e&&n.then(()=>e(null),i=>e(i)),n}set(e,n){T("OnDisconnect.set",1,2,arguments.length),ae("OnDisconnect.set","onComplete",n,!0);let i=this._delegate.set(e);return n&&i.then(()=>n(null),s=>n(s)),i}setWithPriority(e,n,i){T("OnDisconnect.setWithPriority",2,3,arguments.length),ae("OnDisconnect.setWithPriority","onComplete",i,!0);let s=this._delegate.setWithPriority(e,n);return i&&s.then(()=>i(null),r=>i(r)),s}update(e,n){if(T("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){let s={};for(let r=0;r<e.length;++r)s[""+r]=e[r];e=s,Yf("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}ae("OnDisconnect.update","onComplete",n,!0);let i=this._delegate.update(e);return n&&i.then(()=>n(null),s=>n(s)),i}};var mc=class{constructor(e,n){this.committed=e,this.snapshot=n}toJSON(){return T("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}};var mn=class t{constructor(e,n){this._database=e,this._delegate=n}val(){return T("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return T("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return T("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return T("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return T("DataSnapshot.child",0,1,arguments.length),e=String(e),li("DataSnapshot.child","path",e,!1),new t(this._database,this._delegate.child(e))}hasChild(e){return T("DataSnapshot.hasChild",1,1,arguments.length),li("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return T("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return T("DataSnapshot.forEach",1,1,arguments.length),ae("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(n=>e(new t(this._database,n)))}hasChildren(){return T("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return T("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return T("DataSnapshot.ref",0,0,arguments.length),new Bt(this._database,this._delegate.ref)}get ref(){return this.getRef()}},Gr=class t{constructor(e,n){this.database=e,this._delegate=n}on(e,n,i,s){var r;T("Query.on",2,4,arguments.length),ae("Query.on","callback",n,!1);let o=t.getCancelAndContextArgs_("Query.on",i,s),a=(c,d)=>{n.call(o.context,new mn(this.database,c),d)};a.userCallback=n,a.context=o.context;let l=(r=o.cancel)===null||r===void 0?void 0:r.bind(o.context);switch(e){case"value":return Ur(this._delegate,a,l),n;case"child_added":return cc(this._delegate,a,l),n;case"child_removed":return hc(this._delegate,a,l),n;case"child_changed":return dc(this._delegate,a,l),n;case"child_moved":return uc(this._delegate,a,l),n;default:throw new Error(Le("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,n,i){if(T("Query.off",0,3,arguments.length),wb("Query.off",e,!0),ae("Query.off","callback",n,!0),uo("Query.off","context",i,!0),n){let s=()=>{};s.userCallback=n,s.context=i,pc(this._delegate,e,s)}else pc(this._delegate,e)}get(){return Df(this._delegate).then(e=>new mn(this.database,e))}once(e,n,i,s){T("Query.once",1,4,arguments.length),ae("Query.once","callback",n,!0);let r=t.getCancelAndContextArgs_("Query.once",i,s),o=new he,a=(c,d)=>{let u=new mn(this.database,c);n&&n.call(r.context,u,d),o.resolve(u)};a.userCallback=n,a.context=r.context;let l=c=>{r.cancel&&r.cancel.call(r.context,c),o.reject(c)};switch(e){case"value":Ur(this._delegate,a,l,{onlyOnce:!0});break;case"child_added":cc(this._delegate,a,l,{onlyOnce:!0});break;case"child_removed":hc(this._delegate,a,l,{onlyOnce:!0});break;case"child_changed":dc(this._delegate,a,l,{onlyOnce:!0});break;case"child_moved":uc(this._delegate,a,l,{onlyOnce:!0});break;default:throw new Error(Le("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return o.promise}limitToFirst(e){return T("Query.limitToFirst",1,1,arguments.length),new t(this.database,Xe(this._delegate,Af(e)))}limitToLast(e){return T("Query.limitToLast",1,1,arguments.length),new t(this.database,Xe(this._delegate,Nf(e)))}orderByChild(e){return T("Query.orderByChild",1,1,arguments.length),new t(this.database,Xe(this._delegate,xf(e)))}orderByKey(){return T("Query.orderByKey",0,0,arguments.length),new t(this.database,Xe(this._delegate,Pf()))}orderByPriority(){return T("Query.orderByPriority",0,0,arguments.length),new t(this.database,Xe(this._delegate,Ff()))}orderByValue(){return T("Query.orderByValue",0,0,arguments.length),new t(this.database,Xe(this._delegate,zf()))}startAt(e=null,n){return T("Query.startAt",0,2,arguments.length),new t(this.database,Xe(this._delegate,Of(e,n)))}startAfter(e=null,n){return T("Query.startAfter",0,2,arguments.length),new t(this.database,Xe(this._delegate,Rf(e,n)))}endAt(e=null,n){return T("Query.endAt",0,2,arguments.length),new t(this.database,Xe(this._delegate,Mf(e,n)))}endBefore(e=null,n){return T("Query.endBefore",0,2,arguments.length),new t(this.database,Xe(this._delegate,kf(e,n)))}equalTo(e,n){return T("Query.equalTo",1,2,arguments.length),new t(this.database,Xe(this._delegate,Lf(e,n)))}toString(){return T("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return T("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if(T("Query.isEqual",1,1,arguments.length),!(e instanceof t)){let n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,n,i){let s={cancel:void 0,context:void 0};if(n&&i)s.cancel=n,ae(e,"cancel",s.cancel,!0),s.context=i,uo(e,"context",s.context,!0);else if(n)if(typeof n=="object"&&n!==null)s.context=n;else if(typeof n=="function")s.cancel=n;else throw new Error(Le(e,"cancelOrContext")+" must either be a cancel callback or a context object.");return s}get ref(){return new Bt(this.database,new je(this._delegate._repo,this._delegate._path))}},Bt=class t extends Gr{constructor(e,n){super(e,new Ae(n._repo,n._path,new qi,!1)),this.database=e,this._delegate=n}getKey(){return T("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return T("Reference.child",1,1,arguments.length),typeof e=="number"&&(e=String(e)),new t(this.database,nn(this._delegate,e))}getParent(){T("Reference.parent",0,0,arguments.length);let e=this._delegate.parent;return e?new t(this.database,e):null}getRoot(){return T("Reference.root",0,0,arguments.length),new t(this.database,this._delegate.root)}set(e,n){T("Reference.set",1,2,arguments.length),ae("Reference.set","onComplete",n,!0);let i=Vr(this._delegate,e);return n&&i.then(()=>n(null),s=>n(s)),i}update(e,n){if(T("Reference.update",1,2,arguments.length),Array.isArray(e)){let s={};for(let r=0;r<e.length;++r)s[""+r]=e[r];e=s,Yf("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}He("Reference.update",this._delegate._path),ae("Reference.update","onComplete",n,!0);let i=If(this._delegate,e);return n&&i.then(()=>n(null),s=>n(s)),i}setWithPriority(e,n,i){T("Reference.setWithPriority",2,3,arguments.length),ae("Reference.setWithPriority","onComplete",i,!0);let s=Sf(this._delegate,e,n);return i&&s.then(()=>i(null),r=>i(r)),s}remove(e){T("Reference.remove",0,1,arguments.length),ae("Reference.remove","onComplete",e,!0);let n=Tf(this._delegate);return e&&n.then(()=>e(null),i=>e(i)),n}transaction(e,n,i){T("Reference.transaction",1,3,arguments.length),ae("Reference.transaction","transactionUpdate",e,!1),ae("Reference.transaction","onComplete",n,!0),bb("Reference.transaction","applyLocally",i,!0);let s=qf(this._delegate,e,{applyLocally:i}).then(r=>new mc(r.committed,new mn(this.database,r.snapshot)));return n&&s.then(r=>n(null,r.committed,r.snapshot),r=>n(r,!1,null)),s}setPriority(e,n){T("Reference.setPriority",1,2,arguments.length),ae("Reference.setPriority","onComplete",n,!0);let i=Ef(this._delegate,e);return n&&i.then(()=>n(null),s=>n(s)),i}push(e,n){T("Reference.push",0,2,arguments.length),ae("Reference.push","onComplete",n,!0);let i=Cf(this._delegate,e),s=i.then(o=>new t(this.database,o));n&&s.then(()=>n(null),o=>n(o));let r=new t(this.database,i);return r.then=s.then.bind(s),r.catch=s.catch.bind(s,void 0),r}onDisconnect(){return He("Reference.onDisconnect",this._delegate._path),new gc(new br(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}};var _n=class{constructor(e,n){this._delegate=e,this.app=n,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:Vf,forceLongPolling:Uf}}useEmulator(e,n,i={}){Gf(this._delegate,e,n,i)}ref(e){if(T("database.ref",0,1,arguments.length),e instanceof Bt){let n=lc(this._delegate,e.toString());return new Bt(this,n)}else{let n=ac(this._delegate,e);return new Bt(this,n)}}refFromURL(e){T("database.refFromURL",1,1,arguments.length);let i=lc(this._delegate,e);return new Bt(this,i)}goOffline(){return T("database.goOffline",0,0,arguments.length),Hf(this._delegate)}goOnline(){return T("database.goOnline",0,0,arguments.length),$f(this._delegate)}};_n.ServerValue={TIMESTAMP:Wf(),increment:t=>Kf(t)};function Cb({app:t,url:e,version:n,customAuthImpl:i,customAppCheckImpl:s,namespace:r,nodeAdmin:o=!1}){Pl(n);let a=new ho("database-standalone"),l=new Os("auth-internal",a);l.setComponent(new le("auth-internal",()=>i,"PRIVATE"));let c;return s&&(c=new Os("app-check-internal",a),c.setComponent(new le("app-check-internal",()=>s,"PRIVATE"))),{instance:new _n(fc(t,l,c,e,o),t),namespace:r}}var Tb=Object.freeze({__proto__:null,initStandalone:Cb});var Eb=_n.ServerValue;function Sb(t){t.INTERNAL.registerComponent(new le("database-compat",(e,{instanceIdentifier:n})=>{let i=e.getProvider("app-compat").getImmediate(),s=e.getProvider("database").getImmediate({identifier:n});return new _n(s,i)},"PUBLIC").setServiceProps({Reference:Bt,Query:Gr,Database:_n,DataSnapshot:mn,enableLogging:jf,INTERNAL:Tb,ServerValue:Eb}).setMultipleInstances(!0)),t.registerVersion(_b,yb)}Sb(lt);function us(t,e,n="on",i=Cc){return new Rt(s=>{let r=null;return r=t[n](e,(o,a)=>{i.schedule(()=>{s.next({snapshot:o,prevKey:a})}),n==="once"&&i.schedule(()=>s.complete())},o=>{i.schedule(()=>s.error(o))}),n==="on"?{unsubscribe(){r!=null&&t.off(e,r)}}:{unsubscribe(){}}}).pipe(de(s=>{let{snapshot:r,prevKey:o}=s,a=null;return r.exists()&&(a=r.key),{type:e,payload:r,prevKey:o,key:a}}),kc())}function Ib(t){return typeof t=="string"}function Db(t){return typeof t.exportVal=="function"}function eg(t){return t==null}function tg(t){return typeof t.set=="function"}function Qf(t,e){return tg(e)?e:t.ref(e)}function ng(t,e){if(Ib(t))return e.stringCase();if(tg(t))return e.firebaseCase();if(Db(t))return e.snapshotCase();throw new Error(`Expects a string, snapshot, or reference. Got: ${typeof t}`)}function ig(t){return(eg(t)||t.length===0)&&(t=["child_added","child_removed","child_changed","child_moved"]),t}function sg(t,e,n){e=ig(e);let i=e.map(s=>us(t,s,"on",n));return vn(...i)}function Mb(t,e,n){let i=sg(t,e).pipe(Qr((s,r)=>[...s,r],[]));return Ob(t,i,n)}function kb(t,e){return us(t,"value","on",e).pipe(de(n=>{let i;return n.payload.forEach(s=>(i=s.key,!1)),{data:n,lastKeyToLoad:i}}))}function Ob(t,e,n){return kb(t,n).pipe(pi(e),de(([s,r])=>{let o=s.lastKeyToLoad,a=r.map(l=>l.key);return{actions:r,lastKeyToLoad:o,loadedKeys:a}}),Oc(s=>s.loadedKeys.indexOf(s.lastKeyToLoad)===-1),de(s=>s.actions))}function Zf(t,e){return function(i,s){return ng(i,{stringCase:()=>t.child(i)[e](s),firebaseCase:()=>i[e](s),snapshotCase:()=>i.ref[e](s)})}}function Rb(t){return function(n){return n?ng(n,{stringCase:()=>t.child(n).remove(),firebaseCase:()=>n.remove(),snapshotCase:()=>n.ref.remove()}):t.remove()}}function Ab(t,e,n){return us(t,"value","once",n).pipe(_e(i=>{let s=[Te(i)];return e.forEach(r=>s.push(us(t,r,"on",n))),vn(...s).pipe(Qr(xb,[]))}),hi())}function rg(t,e){let n=t.length;for(let i=0;i<n;i++)if(t[i].payload.key===e)return i;return-1}function Nb(t,e){if(eg(e))return 0;{let n=rg(t,e);return n===-1?t.length:n+1}}function xb(t,e){let{payload:n,prevKey:i,key:s}=e,r=rg(t,s),o=Nb(t,i);switch(e.type){case"value":if(e.payload?.exists()){let a=null;e.payload.forEach(l=>{let c={payload:l,type:"value",prevKey:a,key:l.key};return a=l.key,t=[...t,c],!1})}return t;case"child_added":if(r>-1)(t[r-1]?.key||null)!==i&&(t=t.filter(l=>l.payload.key!==n.key),t.splice(o,0,e));else{if(i==null)return[e,...t];t=t.slice(),t.splice(o,0,e)}return t;case"child_removed":return t.filter(a=>a.payload.key!==n.key);case"child_changed":return t.map(a=>a.payload.key===s?e:a);case"child_moved":if(r>-1){let a=t.splice(r,1)[0];return t=t.slice(),t.splice(o,0,a),t}return t;default:return t}}function Jf(t,e,n){return e=ig(e),Ab(t,e,n)}function Pb(t,e){let n=e.schedulers.outsideAngular,i=e.schedulers.ngZone.run(()=>t.ref);return{query:t,update:Zf(i,"update"),set:Zf(i,"set"),push:s=>i.push(s),remove:Rb(i),snapshotChanges(s){return Jf(t,s,n).pipe(xt)},stateChanges(s){return sg(t,s,n).pipe(xt)},auditTrail(s){return Mb(t,s,n).pipe(xt)},valueChanges(s,r){return Jf(t,s,n).pipe(de(a=>a.map(l=>r&&r.idField?Ne(ge({},l.payload.val()),{[r.idField]:l.key}):l.payload.val())),xt)}}}function Xf(t,e){return function(){return us(t,"value","on",e)}}function Fb(t,e){return{query:t,snapshotChanges(){return Xf(t,e.schedulers.outsideAngular)().pipe(xt)},update(n){return t.ref.update(n)},set(n){return t.ref.set(n)},remove(){return t.ref.remove()},valueChanges(){return Xf(t,e.schedulers.outsideAngular)().pipe(xt,de(i=>i.payload.exists()?i.payload.val():null))}}}var zb=new q("angularfire2.realtimeDatabaseURL"),Lb=new q("angularfire2.database.use-emulator"),Bb=(()=>{class t{schedulers;database;constructor(n,i,s,r,o,a,l,c,d,u,h,f,w,S,M){this.schedulers=a;let ce=l,Ce=Ys(n,o,i);c&&Ca(Ce,o,d,h,f,w,u,S),this.database=Qs(`${Ce.name}.database.${s}`,"AngularFireDatabase",Ce.name,()=>{let F=o.runOutsideAngular(()=>Ce.database(s||void 0));return ce&&F.useEmulator(...ce),F},[ce])}list(n,i){let s=this.schedulers.ngZone.runOutsideAngular(()=>Qf(this.database,n)),r=s;return i&&(r=i(s)),Pb(r,this)}object(n){let i=this.schedulers.ngZone.runOutsideAngular(()=>Qf(this.database,n));return Fb(i,this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}static \u0275fac=function(i){return new(i||t)(I(Ks),I(qs,8),I(zb,8),I(nt),I(V),I(Be),I(Lb,8),I(Fh,8),I(ma,8),I(_a,8),I(ya,8),I(va,8),I(ba,8),I(wa,8),I(Nt,8))};static \u0275prov=ye({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})(),og=(()=>{class t{constructor(){lt.registerVersion("angularfire",De.full,"rtdb-compat")}static \u0275fac=function(i){return new(i||t)};static \u0275mod=P({type:t});static \u0275inj=x({providers:[Bb]})}return t})();function Vb(t){let e=t,n=Math.floor(Math.abs(t)),i=t.toString().replace(/^[^.]*\.?/,"").length;return i===0&&n%10===1&&n%100!==11?1:i===0&&n%10===Math.floor(n%10)&&n%10>=2&&n%10<=4&&!(n%100>=12&&n%100<=14)?3:i===0&&n%10===0||i===0&&n%10===Math.floor(n%10)&&n%10>=5&&n%10<=9||i===0&&n%100===Math.floor(n%100)&&n%100>=11&&n%100<=14?4:5}var ag=["uk",[["\u0434\u043F","\u043F\u043F"],void 0,void 0],void 0,[["\u041D","\u041F","\u0412","\u0421","\u0427","\u041F","\u0421"],["\u043D\u0434","\u043F\u043D","\u0432\u0442","\u0441\u0440","\u0447\u0442","\u043F\u0442","\u0441\u0431"],["\u043D\u0435\u0434\u0456\u043B\u044F","\u043F\u043E\u043D\u0435\u0434\u0456\u043B\u043E\u043A","\u0432\u0456\u0432\u0442\u043E\u0440\u043E\u043A","\u0441\u0435\u0440\u0435\u0434\u0430","\u0447\u0435\u0442\u0432\u0435\u0440","\u043F\u02BC\u044F\u0442\u043D\u0438\u0446\u044F","\u0441\u0443\u0431\u043E\u0442\u0430"],["\u043D\u0434","\u043F\u043D","\u0432\u0442","\u0441\u0440","\u0447\u0442","\u043F\u0442","\u0441\u0431"]],void 0,[["\u0441","\u043B","\u0431","\u043A","\u0442","\u0447","\u043B","\u0441","\u0432","\u0436","\u043B","\u0433"],["\u0441\u0456\u0447.","\u043B\u044E\u0442.","\u0431\u0435\u0440.","\u043A\u0432\u0456\u0442.","\u0442\u0440\u0430\u0432.","\u0447\u0435\u0440\u0432.","\u043B\u0438\u043F.","\u0441\u0435\u0440\u043F.","\u0432\u0435\u0440.","\u0436\u043E\u0432\u0442.","\u043B\u0438\u0441\u0442.","\u0433\u0440\u0443\u0434."],["\u0441\u0456\u0447\u043D\u044F","\u043B\u044E\u0442\u043E\u0433\u043E","\u0431\u0435\u0440\u0435\u0437\u043D\u044F","\u043A\u0432\u0456\u0442\u043D\u044F","\u0442\u0440\u0430\u0432\u043D\u044F","\u0447\u0435\u0440\u0432\u043D\u044F","\u043B\u0438\u043F\u043D\u044F","\u0441\u0435\u0440\u043F\u043D\u044F","\u0432\u0435\u0440\u0435\u0441\u043D\u044F","\u0436\u043E\u0432\u0442\u043D\u044F","\u043B\u0438\u0441\u0442\u043E\u043F\u0430\u0434\u0430","\u0433\u0440\u0443\u0434\u043D\u044F"]],[["\u0421","\u041B","\u0411","\u041A","\u0422","\u0427","\u041B","\u0421","\u0412","\u0416","\u041B","\u0413"],["\u0441\u0456\u0447","\u043B\u044E\u0442","\u0431\u0435\u0440","\u043A\u0432\u0456","\u0442\u0440\u0430","\u0447\u0435\u0440","\u043B\u0438\u043F","\u0441\u0435\u0440","\u0432\u0435\u0440","\u0436\u043E\u0432","\u043B\u0438\u0441","\u0433\u0440\u0443"],["\u0441\u0456\u0447\u0435\u043D\u044C","\u043B\u044E\u0442\u0438\u0439","\u0431\u0435\u0440\u0435\u0437\u0435\u043D\u044C","\u043A\u0432\u0456\u0442\u0435\u043D\u044C","\u0442\u0440\u0430\u0432\u0435\u043D\u044C","\u0447\u0435\u0440\u0432\u0435\u043D\u044C","\u043B\u0438\u043F\u0435\u043D\u044C","\u0441\u0435\u0440\u043F\u0435\u043D\u044C","\u0432\u0435\u0440\u0435\u0441\u0435\u043D\u044C","\u0436\u043E\u0432\u0442\u0435\u043D\u044C","\u043B\u0438\u0441\u0442\u043E\u043F\u0430\u0434","\u0433\u0440\u0443\u0434\u0435\u043D\u044C"]],[["\u0434\u043E \u043D.\u0435.","\u043D.\u0435."],["\u0434\u043E \u043D. \u0435.","\u043D. \u0435."],["\u0434\u043E \u043D\u0430\u0448\u043E\u0457 \u0435\u0440\u0438","\u043D\u0430\u0448\u043E\u0457 \u0435\u0440\u0438"]],1,[6,0],["dd.MM.yy","d MMM y '\u0440'.","d MMMM y '\u0440'.","EEEE, d MMMM y '\u0440'."],["HH:mm","HH:mm:ss","HH:mm:ss z","HH:mm:ss zzzz"],["{1}, {0}",void 0,"{1} '\u043E' {0}",void 0],[",","\xA0",";","%","+","-","\u0415","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","#,##0.00\xA0\xA4","#E0"],"UAH","\u20B4","\u0443\u043A\u0440\u0430\u0457\u043D\u0441\u044C\u043A\u0430 \u0433\u0440\u0438\u0432\u043D\u044F",{AUD:[void 0,"$"],BRL:[void 0,"R$"],BYN:[void 0,"\u0440."],CAD:[void 0,"$"],CNY:[void 0,"\xA5"],EUR:[void 0,"\u20AC"],GBP:[void 0,"\xA3"],HKD:[void 0,"$"],ILS:[void 0,"\u20AA"],INR:[void 0,"\u20B9"],KRW:[void 0,"\u20A9"],MXN:[void 0,"$"],NZD:[void 0,"$"],PHP:[void 0,"\u20B1"],RUR:[void 0,"\u0440."],TWD:[void 0,"$"],UAH:["\u20B4"],UAK:["\u043A\u0440\u0431."],USD:[void 0,"$"],VND:[void 0,"\u20AB"],XCD:[void 0,"$"]},"ltr",Vb];function Ub(t){let e=t,n=Math.floor(Math.abs(t)),i=t.toString().replace(/^[^.]*\.?/,"").length;return n===1&&i===0?1:5}var lg=["en",[["a","p"],["AM","PM"],void 0],[["AM","PM"],void 0,void 0],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],void 0,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],void 0,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",void 0,"{1} 'at' {0}",void 0],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",Ub];function Gb(t){let e=t,n=Math.floor(Math.abs(t)),i=t.toString().replace(/^[^.]*\.?/,"").length;return n===1&&i===0?1:n===Math.floor(n)&&n>=2&&n<=4&&i===0?3:i!==0?4:5}var cg=["cs",[["dop.","odp."],void 0,void 0],void 0,[["N","P","\xDA","S","\u010C","P","S"],["ne","po","\xFAt","st","\u010Dt","p\xE1","so"],["ned\u011Ble","pond\u011Bl\xED","\xFAter\xFD","st\u0159eda","\u010Dtvrtek","p\xE1tek","sobota"],["ne","po","\xFAt","st","\u010Dt","p\xE1","so"]],void 0,[["1","2","3","4","5","6","7","8","9","10","11","12"],["led","\xFAno","b\u0159e","dub","kv\u011B","\u010Dvn","\u010Dvc","srp","z\xE1\u0159","\u0159\xEDj","lis","pro"],["ledna","\xFAnora","b\u0159ezna","dubna","kv\u011Btna","\u010Dervna","\u010Dervence","srpna","z\xE1\u0159\xED","\u0159\xEDjna","listopadu","prosince"]],[["1","2","3","4","5","6","7","8","9","10","11","12"],["led","\xFAno","b\u0159e","dub","kv\u011B","\u010Dvn","\u010Dvc","srp","z\xE1\u0159","\u0159\xEDj","lis","pro"],["leden","\xFAnor","b\u0159ezen","duben","kv\u011Bten","\u010Derven","\u010Dervenec","srpen","z\xE1\u0159\xED","\u0159\xEDjen","listopad","prosinec"]],[["p\u0159.n.l.","n.l."],["p\u0159. n. l.","n. l."],["p\u0159ed na\u0161\xEDm letopo\u010Dtem","na\u0161eho letopo\u010Dtu"]],1,[6,0],["dd.MM.yy","d. M. y","d. MMMM y","EEEE d. MMMM y"],["H:mm","H:mm:ss","H:mm:ss z","H:mm:ss zzzz"],["{1} {0}",void 0,void 0,void 0],[",","\xA0",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0\xA0%","#,##0.00\xA0\xA4","#E0"],"CZK","K\u010D","\u010Desk\xE1 koruna",{AUD:["AU$","$"],BYN:[void 0,"\u0440."],CSK:["K\u010Ds"],CZK:["K\u010D"],ILS:[void 0,"\u20AA"],INR:[void 0,"\u20B9"],JPY:["JP\xA5","\xA5"],PHP:[void 0,"\u20B1"],RON:[void 0,"L"],RUR:[void 0,"\u0440."],TWD:["NT$"],USD:["US$","$"],VND:[void 0,"\u20AB"],XEU:["ECU"],XXX:[]},"ltr",Gb];var $b=["*"];var jb=["dialog"];var dg={animation:!0,transitionTimerDelayMs:5},Wb=(()=>{let e=class e{constructor(){this.animation=dg.animation}};e.\u0275fac=function(s){return new(s||e)},e.\u0275prov=ye({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Kb(t){let{transitionDelay:e,transitionDuration:n}=window.getComputedStyle(t),i=parseFloat(e),s=parseFloat(n);return(i+s)*1e3}function ug(t){return typeof t=="string"}function _c(t){return t!=null}function qb(t){return t&&t.then}function hg(t){return(t||document.body).getBoundingClientRect()}function Yb(t){return e=>new Rt(n=>{let i=o=>t.run(()=>n.next(o)),s=o=>t.run(()=>n.error(o)),r=()=>t.run(()=>n.complete());return e.subscribe({next:i,error:s,complete:r})})}var Qb=()=>{},{transitionTimerDelayMs:Zb}=dg,Hr=new Map,yn=(t,e,n,i)=>{let s=i.context||{},r=Hr.get(e);if(r)switch(i.runningTransition){case"continue":return Tc;case"stop":t.run(()=>r.transition$.complete()),s=Object.assign(r.context,s),Hr.delete(e)}let o=n(e,i.animation,s)||Qb;if(!i.animation||window.getComputedStyle(e).transitionProperty==="none")return t.run(()=>o()),Te(void 0).pipe(Yb(t));let a=new Ve,l=new Ve,c=a.pipe(Sc(!0));Hr.set(e,{transition$:a,complete:()=>{l.next(),l.complete()},context:s});let d=Kb(e);return t.runOutsideAngular(()=>{let u=At(e,"transitionend").pipe(xe(c),pt(({target:f})=>f===e)),h=Yr(d+Zb).pipe(xe(c));Ec(h,u,l).pipe(xe(c)).subscribe(()=>{Hr.delete(e),t.run(()=>{o(),a.next(),a.complete()})})}),a.asObservable()};var pg=(()=>{let e=class e{};e.\u0275fac=function(s){return new(s||e)},e.\u0275mod=P({type:e}),e.\u0275inj=x({});let t=e;return t})();var fg=(()=>{let e=class e{};e.\u0275fac=function(s){return new(s||e)},e.\u0275mod=P({type:e}),e.\u0275inj=x({});let t=e;return t})();var gg=(()=>{let e=class e{};e.\u0275fac=function(s){return new(s||e)},e.\u0275mod=P({type:e}),e.\u0275inj=x({});let t=e;return t})(),mg=(()=>{let e=class e{};e.\u0275fac=function(s){return new(s||e)},e.\u0275mod=P({type:e}),e.\u0275inj=x({});let t=e;return t})();var bc=function(t){return t[t.Tab=9]="Tab",t[t.Enter=13]="Enter",t[t.Escape=27]="Escape",t[t.Space=32]="Space",t[t.PageUp=33]="PageUp",t[t.PageDown=34]="PageDown",t[t.End=35]="End",t[t.Home=36]="Home",t[t.ArrowLeft=37]="ArrowLeft",t[t.ArrowUp=38]="ArrowUp",t[t.ArrowRight=39]="ArrowRight",t[t.ArrowDown=40]="ArrowDown",t}(bc||{});var _k=(()=>{let t=()=>/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2,e=()=>/Android/.test(navigator.userAgent);return typeof navigator<"u"?!!navigator.userAgent&&(t()||e()):!1})();var Jb=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function _g(t){let e=Array.from(t.querySelectorAll(Jb)).filter(n=>n.tabIndex!==-1);return[e[0],e[e.length-1]]}var Xb=(t,e,n,i=!1)=>{t.runOutsideAngular(()=>{let s=At(e,"focusin").pipe(xe(n),de(r=>r.target));At(e,"keydown").pipe(xe(n),pt(r=>r.which===bc.Tab),pi(s)).subscribe(([r,o])=>{let[a,l]=_g(e);(o===a||o===e)&&r.shiftKey&&(l.focus(),r.preventDefault()),o===l&&!r.shiftKey&&(a.focus(),r.preventDefault())}),i&&At(e,"click").pipe(xe(n),pi(s),de(r=>r[1])).subscribe(r=>r.focus())})};var yk=new Date(1882,10,12),vk=new Date(2174,10,25);var bk=1e3*60*60*24;var wc=1080,ew=24*wc,tw=12*wc+793,wk=29*ew+tw,Ck=11*wc+204;var yg=(()=>{let e=class e{};e.\u0275fac=function(s){return new(s||e)},e.\u0275mod=P({type:e}),e.\u0275inj=x({});let t=e;return t})();var vg=(()=>{let e=class e{};e.\u0275fac=function(s){return new(s||e)},e.\u0275mod=P({type:e}),e.\u0275inj=x({});let t=e;return t})(),nw=(()=>{let e=class e{constructor(){this._ngbConfig=b(Wb),this.backdrop=!0,this.fullscreen=!1,this.keyboard=!0}get animation(){return this._animation??this._ngbConfig.animation}set animation(i){this._animation=i}};e.\u0275fac=function(s){return new(s||e)},e.\u0275prov=ye({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),di=class{constructor(e,n,i){this.nodes=e,this.viewRef=n,this.componentRef=i}};var iw=(()=>{let e=class e{constructor(){this._document=b(Cn)}hide(){let i=Math.abs(window.innerWidth-this._document.documentElement.clientWidth),s=this._document.body,r=s.style,{overflow:o,paddingRight:a}=r;if(i>0){let l=parseFloat(window.getComputedStyle(s).paddingRight);r.paddingRight=`${l+i}px`}return r.overflow="hidden",()=>{i>0&&(r.paddingRight=a),r.overflow=o}}};e.\u0275fac=function(s){return new(s||e)},e.\u0275prov=ye({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),sw=(()=>{let e=class e{constructor(){this._nativeElement=b(gi).nativeElement,this._zone=b(V)}ngOnInit(){this._zone.onStable.asObservable().pipe(rn(1)).subscribe(()=>{yn(this._zone,this._nativeElement,(i,s)=>{s&&hg(i),i.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return yn(this._zone,this._nativeElement,({classList:i})=>i.remove("show"),{animation:this.animation,runningTransition:"stop"})}};e.\u0275fac=function(s){return new(s||e)},e.\u0275cmp=k({type:e,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1055"],hostVars:6,hostBindings:function(s,r){s&2&&(ms("modal-backdrop"+(r.backdropClass?" "+r.backdropClass:"")),no("show",!r.animation)("fade",r.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},standalone:!0,features:[O],decls:0,vars:0,template:function(s,r){},encapsulation:2});let t=e;return t})(),$r=class{update(e){}close(e){}dismiss(e){}},rw=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","fullscreen","keyboard","scrollable","size","windowClass","modalDialogClass"],ow=["animation","backdropClass"],yc=class{_applyWindowOptions(e,n){rw.forEach(i=>{_c(n[i])&&(e[i]=n[i])})}_applyBackdropOptions(e,n){ow.forEach(i=>{_c(n[i])&&(e[i]=n[i])})}update(e){this._applyWindowOptions(this._windowCmptRef.instance,e),this._backdropCmptRef&&this._backdropCmptRef.instance&&this._applyBackdropOptions(this._backdropCmptRef.instance,e)}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(xe(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(xe(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}constructor(e,n,i,s){this._windowCmptRef=e,this._contentRef=n,this._backdropCmptRef=i,this._beforeDismiss=s,this._closed=new Ve,this._dismissed=new Ve,this._hidden=new Ve,e.instance.dismissEvent.subscribe(r=>{this.dismiss(r)}),this.result=new Promise((r,o)=>{this._resolve=r,this._reject=o}),this.result.then(null,()=>{})}close(e){this._windowCmptRef&&(this._closed.next(e),this._resolve(e),this._removeModalElements())}_dismiss(e){this._dismissed.next(e),this._reject(e),this._removeModalElements()}dismiss(e){if(this._windowCmptRef)if(!this._beforeDismiss)this._dismiss(e);else{let n=this._beforeDismiss();qb(n)?n.then(i=>{i!==!1&&this._dismiss(e)},()=>{}):n!==!1&&this._dismiss(e)}}_removeModalElements(){let e=this._windowCmptRef.instance.hide(),n=this._backdropCmptRef?this._backdropCmptRef.instance.hide():Te(void 0);e.subscribe(()=>{let{nativeElement:i}=this._windowCmptRef.location;i.parentNode.removeChild(i),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),n.subscribe(()=>{if(this._backdropCmptRef){let{nativeElement:i}=this._backdropCmptRef.location;i.parentNode.removeChild(i),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),fs(e,n).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}},vc=function(t){return t[t.BACKDROP_CLICK=0]="BACKDROP_CLICK",t[t.ESC=1]="ESC",t}(vc||{}),aw=(()=>{let e=class e{constructor(){this._document=b(Cn),this._elRef=b(gi),this._zone=b(V),this._closed$=new Ve,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new Ue,this.shown=new Ve,this.hidden=new Ve}get fullscreenClass(){return this.fullscreen===!0?" modal-fullscreen":ug(this.fullscreen)?` modal-fullscreen-${this.fullscreen}-down`:""}dismiss(i){this.dismissEvent.emit(i)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe(rn(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){let{nativeElement:i}=this._elRef,s={animation:this.animation,runningTransition:"stop"},r=yn(this._zone,i,()=>i.classList.remove("show"),s),o=yn(this._zone,this._dialogEl.nativeElement,()=>{},s),a=fs(r,o);return a.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),a}_show(){let i={animation:this.animation,runningTransition:"continue"},s=yn(this._zone,this._elRef.nativeElement,(o,a)=>{a&&hg(o),o.classList.add("show")},i),r=yn(this._zone,this._dialogEl.nativeElement,()=>{},i);fs(s,r).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){let{nativeElement:i}=this._elRef;this._zone.runOutsideAngular(()=>{At(i,"keydown").pipe(xe(this._closed$),pt(r=>r.which===bc.Escape)).subscribe(r=>{this.keyboard?requestAnimationFrame(()=>{r.defaultPrevented||this._zone.run(()=>this.dismiss(vc.ESC))}):this.backdrop==="static"&&this._bumpBackdrop()});let s=!1;At(this._dialogEl.nativeElement,"mousedown").pipe(xe(this._closed$),Rc(()=>s=!1),_e(()=>At(i,"mouseup").pipe(xe(this._closed$),rn(1))),pt(({target:r})=>i===r)).subscribe(()=>{s=!0}),At(i,"click").pipe(xe(this._closed$)).subscribe(({target:r})=>{i===r&&(this.backdrop==="static"?this._bumpBackdrop():this.backdrop===!0&&!s&&this._zone.run(()=>this.dismiss(vc.BACKDROP_CLICK))),s=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){let{nativeElement:i}=this._elRef;if(!i.contains(document.activeElement)){let s=i.querySelector("[ngbAutofocus]"),r=_g(i)[0];(s||r||i).focus()}}_restoreFocus(){let i=this._document.body,s=this._elWithFocus,r;s&&s.focus&&i.contains(s)?r=s:r=i,this._zone.runOutsideAngular(()=>{setTimeout(()=>r.focus()),this._elWithFocus=null})}_bumpBackdrop(){this.backdrop==="static"&&yn(this._zone,this._elRef.nativeElement,({classList:i})=>(i.add("modal-static"),()=>i.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}};e.\u0275fac=function(s){return new(s||e)},e.\u0275cmp=k({type:e,selectors:[["ngb-modal-window"]],viewQuery:function(s,r){if(s&1&&Gc(jb,7),s&2){let o;ro(o=oo())&&(r._dialogEl=o.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(s,r){s&2&&(Lc("aria-modal",!0)("aria-labelledby",r.ariaLabelledBy)("aria-describedby",r.ariaDescribedBy),ms("modal d-block"+(r.windowClass?" "+r.windowClass:"")),no("fade",r.animation))},inputs:{animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",backdrop:"backdrop",centered:"centered",fullscreen:"fullscreen",keyboard:"keyboard",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},standalone:!0,features:[O],ngContentSelectors:$b,decls:4,vars:2,consts:[["role","document"],["dialog",""],[1,"modal-content"]],template:function(s,r){s&1&&(_s(),g(0,"div",0,1)(2,"div",2),ys(3),m()()),s&2&&ms("modal-dialog"+(r.size?" modal-"+r.size:"")+(r.centered?" modal-dialog-centered":"")+r.fullscreenClass+(r.scrollable?" modal-dialog-scrollable":"")+(r.modalDialogClass?" "+r.modalDialogClass:""))},styles:[`ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}
`],encapsulation:2});let t=e;return t})(),lw=(()=>{let e=class e{constructor(){this._applicationRef=b(Hc),this._injector=b(me),this._environmentInjector=b(to),this._document=b(Cn),this._scrollBar=b(iw),this._activeWindowCmptHasChanged=new Ve,this._ariaHiddenValues=new Map,this._scrollBarRestoreFn=null,this._modalRefs=[],this._windowCmpts=[],this._activeInstances=new Ue;let i=b(V);this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){let s=this._windowCmpts[this._windowCmpts.length-1];Xb(i,s.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(s.location.nativeElement)}})}_restoreScrollBar(){let i=this._scrollBarRestoreFn;i&&(this._scrollBarRestoreFn=null,i())}_hideScrollBar(){this._scrollBarRestoreFn||(this._scrollBarRestoreFn=this._scrollBar.hide())}open(i,s,r){let o=r.container instanceof HTMLElement?r.container:_c(r.container)?this._document.querySelector(r.container):this._document.body;if(!o)throw new Error(`The specified modal container "${r.container||"body"}" was not found in the DOM.`);this._hideScrollBar();let a=new $r;i=r.injector||i;let l=i.get(to,null)||this._environmentInjector,c=this._getContentRef(i,l,s,a,r),d=r.backdrop!==!1?this._attachBackdrop(o):void 0,u=this._attachWindowComponent(o,c.nodes),h=new yc(u,c,d,r.beforeDismiss);return this._registerModalRef(h),this._registerWindowCmpt(u),h.hidden.pipe(rn(1)).subscribe(()=>Promise.resolve(!0).then(()=>{this._modalRefs.length||(this._document.body.classList.remove("modal-open"),this._restoreScrollBar(),this._revertAriaHidden())})),a.close=f=>{h.close(f)},a.dismiss=f=>{h.dismiss(f)},a.update=f=>{h.update(f)},h.update(r),this._modalRefs.length===1&&this._document.body.classList.add("modal-open"),d&&d.instance&&d.changeDetectorRef.detectChanges(),u.changeDetectorRef.detectChanges(),h}get activeInstances(){return this._activeInstances}dismissAll(i){this._modalRefs.forEach(s=>s.dismiss(i))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(i){let s=ws(sw,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector});return this._applicationRef.attachView(s.hostView),i.appendChild(s.location.nativeElement),s}_attachWindowComponent(i,s){let r=ws(aw,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector,projectableNodes:s});return this._applicationRef.attachView(r.hostView),i.appendChild(r.location.nativeElement),r}_getContentRef(i,s,r,o,a){return r?r instanceof Uc?this._createFromTemplateRef(r,o):ug(r)?this._createFromString(r):this._createFromComponent(i,s,r,o,a):new di([])}_createFromTemplateRef(i,s){let r={$implicit:s,close(a){s.close(a)},dismiss(a){s.dismiss(a)}},o=i.createEmbeddedView(r);return this._applicationRef.attachView(o),new di([o.rootNodes],o)}_createFromString(i){let s=this._document.createTextNode(`${i}`);return new di([[s]])}_createFromComponent(i,s,r,o,a){let l=me.create({providers:[{provide:$r,useValue:o}],parent:i}),c=ws(r,{environmentInjector:s,elementInjector:l}),d=c.location.nativeElement;return a.scrollable&&d.classList.add("component-host-scrollable"),this._applicationRef.attachView(c.hostView),new di([[d]],c.hostView,c)}_setAriaHidden(i){let s=i.parentElement;s&&i!==this._document.body&&(Array.from(s.children).forEach(r=>{r!==i&&r.nodeName!=="SCRIPT"&&(this._ariaHiddenValues.set(r,r.getAttribute("aria-hidden")),r.setAttribute("aria-hidden","true"))}),this._setAriaHidden(s))}_revertAriaHidden(){this._ariaHiddenValues.forEach((i,s)=>{i?s.setAttribute("aria-hidden",i):s.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(i){let s=()=>{let r=this._modalRefs.indexOf(i);r>-1&&(this._modalRefs.splice(r,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(i),this._activeInstances.emit(this._modalRefs),i.result.then(s,s)}_registerWindowCmpt(i){this._windowCmpts.push(i),this._activeWindowCmptHasChanged.next(),i.onDestroy(()=>{let s=this._windowCmpts.indexOf(i);s>-1&&(this._windowCmpts.splice(s,1),this._activeWindowCmptHasChanged.next())})}};e.\u0275fac=function(s){return new(s||e)},e.\u0275prov=ye({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),cw=(()=>{let e=class e{constructor(){this._injector=b(me),this._modalStack=b(lw),this._config=b(nw)}open(i,s={}){let r=ge(Ne(ge({},this._config),{animation:this._config.animation}),s);return this._modalStack.open(this._injector,i,r)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(i){this._modalStack.dismissAll(i)}hasOpenModals(){return this._modalStack.hasOpenModals()}};e.\u0275fac=function(s){return new(s||e)},e.\u0275prov=ye({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),bg=(()=>{let e=class e{};e.\u0275fac=function(s){return new(s||e)},e.\u0275mod=P({type:e}),e.\u0275inj=x({providers:[cw]});let t=e;return t})();var wg=(()=>{let e=class e{};e.\u0275fac=function(s){return new(s||e)},e.\u0275mod=P({type:e}),e.\u0275inj=x({});let t=e;return t})();var Cg=(()=>{let e=class e{};e.\u0275fac=function(s){return new(s||e)},e.\u0275mod=P({type:e}),e.\u0275inj=x({});let t=e;return t})();var Tg=(()=>{let e=class e{};e.\u0275fac=function(s){return new(s||e)},e.\u0275mod=P({type:e}),e.\u0275inj=x({});let t=e;return t})();var Eg=(()=>{let e=class e{};e.\u0275fac=function(s){return new(s||e)},e.\u0275mod=P({type:e}),e.\u0275inj=x({});let t=e;return t})();var Sg=(()=>{let e=class e{};e.\u0275fac=function(s){return new(s||e)},e.\u0275mod=P({type:e}),e.\u0275inj=x({});let t=e;return t})();var Ig=(()=>{let e=class e{};e.\u0275fac=function(s){return new(s||e)},e.\u0275mod=P({type:e}),e.\u0275inj=x({});let t=e;return t})();var Dg=(()=>{let e=class e{};e.\u0275fac=function(s){return new(s||e)},e.\u0275mod=P({type:e}),e.\u0275inj=x({});let t=e;return t})();var Mg=(()=>{let e=class e{};e.\u0275fac=function(s){return new(s||e)},e.\u0275mod=P({type:e}),e.\u0275inj=x({});let t=e;return t})();var kg=(()=>{let e=class e{};e.\u0275fac=function(s){return new(s||e)},e.\u0275mod=P({type:e}),e.\u0275inj=x({});let t=e;return t})();var Tk=new q("live announcer delay",{providedIn:"root",factory:()=>100});var Og=(()=>{let e=class e{};e.\u0275fac=function(s){return new(s||e)},e.\u0275mod=P({type:e}),e.\u0275inj=x({});let t=e;return t})();var Rg=(()=>{let e=class e{};e.\u0275fac=function(s){return new(s||e)},e.\u0275mod=P({type:e}),e.\u0275inj=x({});let t=e;return t})(),dw=[pg,fg,gg,mg,yg,vg,bg,wg,Rg,Cg,Tg,Eg,Sg,Ig,Dg,Mg,kg,Og],Ag=(()=>{let e=class e{};e.\u0275fac=function(s){return new(s||e)},e.\u0275mod=P({type:e}),e.\u0275inj=x({imports:[dw,pg,fg,gg,mg,yg,vg,bg,wg,Rg,Cg,Tg,Eg,Sg,Ig,Dg,Mg,kg,Og]});let t=e;return t})();Cs(ag);Cs(lg);Cs(cg);var Ng={providers:[td(gu,id(),sd(),nd()),fi([zd(()=>Ld(Id)),Vd(()=>Gd()),Hd(()=>$d()),Pu(()=>Fu()),Zu(()=>Ju()),eh(()=>th()),ph(()=>fh()),wh(()=>Mo())]),og,fi(zs),fi(ld),fi(Ag),mu(),Wc()]};var xg=(()=>{let e=class e{constructor(){this.authService=b(Ct),this.calendarEvents=b(Wt),this.translationsService=b(jd),this.contactsService=b(Bn),this.i18n=b(Et),this.Nzi18n=b(pd),this.showLayoutTopBottom=zc(!0)}ngOnInit(){this.Nzi18n.setLocale(fd),this.calendarEvents.fetchData(),this.authService.fetchAuth(),this.contactsService.fetchData(),this.translationsService.fetchTranslate(),this.getTranslations()}getTranslations(){this.translationsService.fetchTranslate(),console.log(this.translationsService.$translations())}};e.\u0275fac=function(s){return new(s||e)},e.\u0275cmp=k({type:e,selectors:[["app-root"]],standalone:!0,features:[O],decls:1,vars:0,template:function(s,r){s&1&&D(0,"router-outlet")},dependencies:[Jc,wd,se],encapsulation:2});let t=e;return t})();qc(xg,Ng).catch(t=>console.error(t));
